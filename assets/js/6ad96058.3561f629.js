"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[391],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>u});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),m=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},s=function(e){var t=m(e.components);return a.createElement(p.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},k=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=m(n),k=r,u=d["".concat(p,".").concat(k)]||d[k]||c[k]||i;return n?a.createElement(u,o(o({ref:t},s),{},{components:n})):a.createElement(u,o({ref:t},s))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=k;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[d]="string"==typeof e?e:r,o[1]=l;for(var m=2;m<i;m++)o[m]=n[m];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}k.displayName="MDXCreateElement"},9538:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(7294);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r.apply(this,arguments)}const i=e=>{let{title:t,titleId:n,...i}=e;return a.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 16 15","aria-labelledby":n},i),t?a.createElement("title",{id:n},t):null,a.createElement("path",{style:{stroke:"none",fillRule:"evenodd",fill:"#24292f",fillOpacity:1},d:"M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"}))}},222:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(7294);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r.apply(this,arguments)}const i=e=>{let{title:t,titleId:n,...i}=e;return a.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 16 15","aria-labelledby":n},i),t?a.createElement("title",{id:n},t):null,a.createElement("path",{style:{stroke:"none",fillRule:"nonzero",fill:"#326ce5",fillOpacity:1},d:"M7.945 0c-.14.008-.28.043-.41.102L1.973 2.668c-.29.137-.5.39-.575.691L.028 9.13a.976.976 0 0 0 .202.86l3.852 4.624c.203.242.508.387.832.387l6.172-.004c.324 0 .633-.14.832-.383l3.852-4.625a.987.987 0 0 0 .203-.863l-1.375-5.766a1.01 1.01 0 0 0-.575-.691L8.461.102C8.3.027 8.12-.008 7.945 0Zm0 0"}),a.createElement("path",{style:{stroke:"none",fillRule:"nonzero",fill:"#fff",fillOpacity:1},d:"M8 1.965c-.184 0-.332.16-.332.355v.012c0 .023-.004.059 0 .082.004.113.027.2.043.305.031.222.055.41.039.582a.382.382 0 0 1-.11.168l-.007.136c-.2.016-.403.043-.602.09a4.299 4.299 0 0 0-2.176 1.2l-.12-.082c-.06.007-.118.023-.196-.02a3.193 3.193 0 0 1-.45-.39c-.073-.079-.128-.153-.218-.227-.02-.016-.05-.04-.074-.055a.411.411 0 0 0-.235-.086.328.328 0 0 0-.265.113c-.113.141-.074.352.082.477h.008c.02.02.047.04.066.055.098.066.184.101.277.156.2.117.364.219.497.336.05.055.058.144.066.187l.105.09a4.057 4.057 0 0 0-.68 2.903l-.136.039c-.039.046-.09.117-.144.14-.172.051-.364.07-.598.094-.11.008-.203.004-.32.023a.554.554 0 0 1-.086.02l-.004.004h-.004c-.2.047-.324.219-.281.39.039.172.23.278.43.235h.007c.031-.008.063-.012.086-.02.117-.03.2-.074.3-.109.22-.078.403-.14.583-.168.074-.004.152.047.191.066l.145-.023a4.207 4.207 0 0 0 1.918 2.316l-.059.141c.02.055.047.129.027.18-.062.164-.175.336-.3.523-.059.09-.121.156-.176.258-.016.023-.031.062-.043.086-.086.18-.024.383.14.457.165.078.372-.004.458-.18h.003c.012-.027.028-.058.04-.082.046-.105.062-.195.097-.297.086-.215.137-.437.258-.578.031-.039.086-.05.145-.066l.074-.133a4.385 4.385 0 0 0 3.07.008c.024.035.063.105.074.125.055.015.117.027.168.097.09.153.153.329.23.543.032.102.048.188.094.293l.043.082c.09.18.293.262.461.184.164-.078.227-.281.141-.457-.012-.027-.031-.063-.043-.086-.055-.102-.117-.168-.18-.258-.125-.191-.23-.347-.293-.511-.027-.083.004-.133.024-.188-.012-.016-.04-.094-.055-.129a4.21 4.21 0 0 0 1.918-2.336c.043.008.117.02.145.027.05-.035.093-.074.183-.066.18.024.364.086.582.164.102.035.184.082.301.11.023.007.059.011.086.02h.004c.004 0 .004 0 .004.003.199.039.39-.066.43-.238.042-.172-.083-.344-.282-.39-.027-.009-.066-.017-.094-.024-.117-.02-.21-.016-.32-.024a3.314 3.314 0 0 1-.598-.094c-.07-.027-.12-.105-.144-.14l-.133-.04a4.065 4.065 0 0 0-.695-2.895c.035-.026.101-.085.117-.1.008-.059.004-.118.063-.18.132-.121.296-.219.496-.34.093-.05.183-.086.277-.152.023-.016.05-.043.074-.059.16-.125.195-.336.082-.472-.117-.141-.336-.153-.496-.032-.023.02-.055.04-.074.059-.09.074-.145.148-.223.223a2.991 2.991 0 0 1-.445.394c-.066.035-.16.024-.203.02l-.13.09a4.415 4.415 0 0 0-2.76-1.294 2.321 2.321 0 0 1-.009-.14c-.043-.043-.097-.074-.109-.164-.016-.172.008-.36.04-.582.015-.106.038-.192.042-.305.004-.027 0-.066 0-.094 0-.195-.148-.355-.332-.355Zm-.418 2.492-.098 1.688-.007.003a.292.292 0 0 1-.293.274.282.282 0 0 1-.172-.055h-.004l-1.434-.98a3.459 3.459 0 0 1 1.653-.867c.12-.028.238-.047.355-.063Zm.836 0a3.52 3.52 0 0 1 1.992.93l-1.422.976-.004-.004a.302.302 0 0 1-.402-.05.3.3 0 0 1-.066-.164ZM5.055 6.02l1.308 1.128v.008a.27.27 0 0 1 .035.387.28.28 0 0 1-.152.098v.007l-1.676.465a3.214 3.214 0 0 1 .485-2.093Zm5.879 0a3.262 3.262 0 0 1 .5 2.09L9.75 7.64v-.007a.282.282 0 0 1-.21-.336.306.306 0 0 1 .093-.152ZM7.73 7.234h.536l.336.403-.122.5-.48.226-.484-.226-.118-.5ZM9.45 8.61c.023 0 .046.004.066.008l.004-.004 1.734.282a3.347 3.347 0 0 1-1.39 1.683l-.673-1.57h.004c-.062-.14 0-.301.14-.367a.289.289 0 0 1 .114-.032Zm-2.915.008c.133.004.254.09.285.223a.285.285 0 0 1-.02.172l.009.008-.668 1.554a3.372 3.372 0 0 1-1.383-1.672l1.719-.285.003.004c.02-.004.04-.004.055-.004Zm1.453.68a.28.28 0 0 1 .137.031c.059.027.105.07.133.121h.008l.847 1.477a3.586 3.586 0 0 1-2.219 0l.844-1.477h.004a.29.29 0 0 1 .246-.152Zm0 0"}))}},2608:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>O,contentTitle:()=>w,default:()=>z,frontMatter:()=>T,metadata:()=>j,toc:()=>K});var a,r,i,o,l,p,m,s,d,c,k,u,h,N,f,b,g,v,y,C,S=n(7462),P=n(7294),E=n(3905),G=n(9538),V=n(222);function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},I.apply(this,arguments)}const A=e=>{let{title:t,titleId:n,...S}=e;return P.createElement("svg",I({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1287.677 221.693",width:1287.677,height:221.693,"aria-labelledby":n},S),t?P.createElement("title",{id:n},t):null,a||(a=P.createElement("defs",null,P.createElement("style",null,'@font-face{font-family:"Virgil";src:url(https://excalidraw.com/Virgil.woff2)}@font-face{font-family:"Cascadia";src:url(https://excalidraw.com/Cascadia.woff2)}'))),r||(r=P.createElement("g",{strokeLinecap:"round"},P.createElement("path",{d:"M185.034 62.122h940.11v149.57h-940.11",strokeWidth:0,fill:"#f9f7ed"}),P.createElement("path",{d:"M185.034 62.122h940.11m-940.11 0h940.11m0 0v149.57m0-149.57v149.57m0 0h-940.11m940.11 0h-940.11m0 0V62.122m0 149.57V62.122",stroke:"#000",fill:"none"}))),i||(i=P.createElement("g",{fillRule:"evenodd",strokeLinecap:"round"},P.createElement("path",{d:"m184.36 61.485 51.22-51.22 942.97-.18-51.83 52.99-942.36-1.59",strokeWidth:0,fill:"#f9f7ed"}),P.createElement("path",{d:"m184.36 61.485 51.22-51.22m-51.22 51.22 51.22-51.22m0 0c347.03-.06 694.07-.13 942.97-.18m-942.97.18c377.04-.07 754.09-.14 942.97-.18m0 0c-10.82 11.06-21.63 22.12-51.83 52.99m51.83-52.99c-19.51 19.95-39.02 39.9-51.83 52.99m0 0c-298.1-.5-596.2-1.01-942.36-1.59m942.36 1.59c-279.91-.47-559.81-.94-942.36-1.59m0 0s0 0 0 0m0 0s0 0 0 0",stroke:"#000",fill:"none"}))),o||(o=P.createElement("g",{fillRule:"evenodd",strokeLinecap:"round"},P.createElement("path",{d:"m1126.722 63.348-1.36 147.49 51.65-54.67 1.49-146.17-51.78 53.35",strokeWidth:0,fill:"#f9f7ed"}),P.createElement("path",{d:"M1126.722 63.348c-.3 32.82-.6 65.65-1.36 147.49m1.36-147.49c-.53 57.17-1.05 114.34-1.36 147.49m0 0c19.7-20.85 39.41-41.7 51.65-54.67m-51.65 54.67c20.07-21.24 40.14-42.48 51.65-54.67m0 0c.35-33.79.69-67.58 1.49-146.17m-1.49 146.17c.51-50.18 1.03-100.37 1.49-146.17m0 0c-12.49 12.87-24.98 25.74-51.78 53.35m51.78-53.35c-16.32 16.82-32.64 33.63-51.78 53.35m0 0s0 0 0 0m0 0s0 0 0 0",stroke:"#000",fill:"none"}))),l||(l=P.createElement("path",{d:"M190.357 210.575c12.006-13.774 24.006-27.541 48.832-56.017M241.688 155.24h932.81M237.87 10.854v143.65",stroke:"#000",strokeWidth:1.5,fill:"none",strokeDasharray:"8 9",strokeLinecap:"round"})),p||(p=P.createElement("g",{strokeLinecap:"round"},P.createElement("path",{d:"M254.88 113.372h136v60h-136",strokeWidth:0,fill:"#f2ffff"}),P.createElement("path",{d:"M254.88 113.372h136m-136 0h136m0 0v60m0-60v60m0 0h-136m136 0h-136m0 0v-60m0 60v-60",stroke:"#000",fill:"none"}))),P.createElement("text",{x:52.734,fontFamily:"Cascadia, Segoe UI Emoji",fontSize:20,textAnchor:"middle",style:{whiteSpace:"pre"},dominantBaseline:"text-before-edge",transform:"translate(270.146 131.372)"},"interpret"),m||(m=P.createElement("g",{fillRule:"evenodd",strokeLinecap:"round"},P.createElement("path",{d:"m254.673 112.535 18.61-19.94 134.47.16-16.9 21.35-136.18-1.57",strokeWidth:0,fill:"#f2ffff"}),P.createElement("path",{d:"M254.673 112.535c6.76-7.24 13.52-14.49 18.61-19.94m-18.61 19.94c3.9-4.18 7.8-8.36 18.61-19.94m0 0c49.66.06 99.32.12 134.47.16m-134.47-.16c45.52.06 91.04.11 134.47.16m0 0c-5.55 7.02-11.11 14.03-16.9 21.35m16.9-21.35c-3.98 5.04-7.97 10.07-16.9 21.35m0 0c-36.22-.42-72.45-.84-136.18-1.57m136.18 1.57c-27.48-.32-54.97-.64-136.18-1.57m0 0s0 0 0 0m0 0s0 0 0 0",stroke:"#000",fill:"none"}))),s||(s=P.createElement("g",{fillRule:"evenodd",strokeLinecap:"round"},P.createElement("path",{d:"m391.562 113.511-.88 59.39 17.83-25.17.14-54.99-17.09 20.77",strokeWidth:0,fill:"#f2ffff"}),P.createElement("path",{d:"M391.562 113.511c-.34 23.08-.68 46.16-.88 59.39m.88-59.39c-.19 12.63-.37 25.25-.88 59.39m0 0c5.38-7.59 10.75-15.17 17.83-25.17m-17.83 25.17c6.94-9.79 13.87-19.58 17.83-25.17m0 0c.03-14.14.07-28.27.14-54.99m-.14 54.99c.04-18.3.09-36.6.14-54.99m0 0c-3.77 4.58-7.55 9.17-17.09 20.77m17.09-20.77c-6.74 8.19-13.48 16.38-17.09 20.77m0 0s0 0 0 0m0 0s0 0 0 0",stroke:"#000",fill:"none"}))),d||(d=P.createElement("g",{strokeLinecap:"round"},P.createElement("path",{d:"M462.746 112.404h245v60h-245",strokeWidth:0,fill:"#f2ffff"}),P.createElement("path",{d:"M462.746 112.404h245m-245 0h245m0 0v60m0-60v60m0 0h-245m245 0h-245m0 0v-60m0 60v-60",stroke:"#000",fill:"none"}))),P.createElement("text",{fontFamily:"Cascadia, Segoe UI Emoji",fontSize:20,style:{whiteSpace:"pre"},dominantBaseline:"text-before-edge",transform:"translate(467.746 118.404)"},"check"),P.createElement("text",{y:24,fontFamily:"Cascadia, Segoe UI Emoji",fontSize:20,style:{whiteSpace:"pre"},dominantBaseline:"text-before-edge",transform:"translate(467.746 118.404)"},"scheme"),c||(c=P.createElement("g",{fillRule:"evenodd",strokeLinecap:"round"},P.createElement("path",{d:"m462.796 112.512 18.61-19.94 243.54.82-17.29 21.3-244.86-2.18",strokeWidth:0,fill:"#f2ffff"}),P.createElement("path",{d:"M462.796 112.512c6.76-7.24 13.52-14.49 18.61-19.94m-18.61 19.94c3.9-4.18 7.8-8.36 18.61-19.94m0 0c89.94.3 179.88.61 243.54.82m-243.54-.82c82.44.28 164.89.56 243.54.82m0 0c-5.68 7-11.36 14-17.29 21.3m17.29-21.3c-4.08 5.02-8.15 10.05-17.29 21.3m0 0-244.86-2.18m244.86 2.18-244.86-2.18m0 0s0 0 0 0m0 0s0 0 0 0",stroke:"#000",fill:"none"}))),k||(k=P.createElement("g",{fillRule:"evenodd",strokeLinecap:"round"},P.createElement("path",{d:"m708.031 113.982-.88 59.39 17.83-25.17.14-54.99-17.09 20.77",strokeWidth:0,fill:"#f2ffff"}),P.createElement("path",{d:"M708.031 113.982c-.34 23.08-.68 46.16-.88 59.39m.88-59.39c-.19 12.63-.37 25.25-.88 59.39m0 0c5.38-7.59 10.75-15.17 17.83-25.17m-17.83 25.17c6.94-9.79 13.87-19.58 17.83-25.17m0 0c.03-14.14.07-28.27.14-54.99m-.14 54.99c.04-18.3.09-36.6.14-54.99m0 0c-3.77 4.58-7.55 9.17-17.09 20.77m17.09-20.77c-6.74 8.19-13.48 16.38-17.09 20.77m0 0s0 0 0 0m0 0s0 0 0 0",stroke:"#000",fill:"none"}))),u||(u=P.createElement("path",{d:"M580.3 119.927h44.84m-44.84 0h44.84m0 0v17.77m0-17.77v17.77m0 0H580.3m44.84 0H580.3m0 0v-17.77m0 17.77v-17.77M625.036 119.85h53.14m-53.14 0h53.14m0 0v17.79m0-17.79v17.79m0 0h-53.14m53.14 0h-53.14m0 0v-17.79m0 17.79v-17.79M580.3 137.438h44.84m-44.84 0h44.84m0 0v15.83m0-15.83v15.83m0 0H580.3m44.84 0H580.3m0 0v-15.83m0 15.83v-15.83M625.036 137.438h53.14m-53.14 0h53.14m0 0v15.63m0-15.63v15.63m0 0h-53.14m53.14 0h-53.14m0 0v-15.63m0 15.63v-15.63M580.328 153.088h45m-45 0h45m0 0v13.66m0-13.66v13.66m0 0h-45m45 0h-45m0 0v-13.66m0 13.66v-13.66M625.066 153.088h53.14m-53.14 0h53.14m0 0v13.56m0-13.56v13.56m0 0h-53.14m53.14 0h-53.14m0 0v-13.56m0 13.56v-13.56",stroke:"#000",fill:"none",strokeLinecap:"round"})),P.createElement("text",{fontFamily:"Cascadia, Segoe UI Emoji",fontSize:15.359,fill:"#5f3dc4",style:{whiteSpace:"pre"},dominantBaseline:"text-before-edge",transform:"translate(589.2 119.093)"},"gvk"),P.createElement("text",{fontFamily:"Cascadia, Segoe UI Emoji",fontSize:15.359,fill:"#0a11d3",style:{whiteSpace:"pre"},dominantBaseline:"text-before-edge",transform:"translate(633.422 119.708)"},"type"),P.createElement("text",{fontFamily:"Cascadia, Segoe UI Emoji",fontSize:14.903,style:{whiteSpace:"pre"},dominantBaseline:"text-before-edge",transform:"translate(590.808 147.568)"},"..."),P.createElement("text",{fontFamily:"Cascadia, Segoe UI Emoji",fontSize:14.903,style:{whiteSpace:"pre"},dominantBaseline:"text-before-edge",transform:"translate(639.841 147.341)"},"..."),h||(h=P.createElement("g",{strokeLinecap:"round"},P.createElement("path",{d:"M768.362 112.051h271v60h-271",strokeWidth:0,fill:"#f2ffff"}),P.createElement("path",{d:"M768.362 112.051h271m-271 0h271m0 0v60m0-60v60m0 0h-271m271 0h-271m0 0v-60m0 60v-60",stroke:"#000",fill:"none"}))),P.createElement("text",{fontFamily:"Cascadia, Segoe UI Emoji",fontSize:20,style:{whiteSpace:"pre"},dominantBaseline:"text-before-edge",transform:"translate(773.362 130.051)"},"unmarshal(   ,      )"),N||(N=P.createElement("g",{fillRule:"evenodd",strokeLinecap:"round"},P.createElement("path",{d:"m768.647 112.36 18.61-19.94 270.33.04-16.8 20.16-272.14-.26",strokeWidth:0,fill:"#f2ffff"}),P.createElement("path",{d:"M768.647 112.36c6.76-7.24 13.52-14.49 18.61-19.94m-18.61 19.94c3.9-4.18 7.8-8.36 18.61-19.94m0 0c99.83.02 199.66.03 270.33.04m-270.33-.04c91.51.01 183.03.03 270.33.04m0 0c-5.52 6.63-11.04 13.25-16.8 20.16m16.8-20.16c-3.96 4.76-7.92 9.51-16.8 20.16m0 0c-72.39-.07-144.78-.14-272.14-.26m272.14.26c-54.92-.05-109.85-.11-272.14-.26m0 0s0 0 0 0m0 0s0 0 0 0",stroke:"#000",fill:"none"}))),f||(f=P.createElement("g",{fillRule:"evenodd",strokeLinecap:"round"},P.createElement("path",{d:"m1039.882 113.89-.88 59.39 17.83-25.17.32-54.87-17.27 20.65",strokeWidth:0,fill:"#f2ffff"}),P.createElement("path",{d:"M1039.882 113.89c-.34 23.08-.68 46.16-.88 59.39m.88-59.39c-.19 12.63-.37 25.25-.88 59.39m0 0c5.38-7.59 10.75-15.17 17.83-25.17m-17.83 25.17c6.94-9.79 13.87-19.58 17.83-25.17m0 0c.08-14.1.16-28.21.32-54.87m-.32 54.87c.11-18.26.21-36.52.32-54.87m0 0c-3.81 4.56-7.63 9.12-17.27 20.65m17.27-20.65c-6.81 8.14-13.62 16.28-17.27 20.65m0 0s0 0 0 0m0 0s0 0 0 0",stroke:"#000",fill:"none"}))),b||(b=P.createElement("g",{strokeLinecap:"round"},P.createElement("path",{d:"M667.874 147.533c.29 12.29.57 24.59 1.11 47.64m0 0h299.12m0 0v-40.39",stroke:"#0a11d3",strokeWidth:2.5,fill:"none",strokeDasharray:"1.5 8"}),P.createElement("path",{d:"m968.104 154.783 6.34 13.59h-12.68l6.34-13.59",strokeWidth:0,fill:"#0a11d3",fillRule:"evenodd"}),P.createElement("path",{d:"M968.104 154.783c1.64 3.51 3.27 7.01 6.34 13.59m0 0h-12.68m0 0c1.91-4.08 3.81-8.16 6.34-13.59m0 0s0 0 0 0",stroke:"#0a11d3",strokeWidth:2.5,fill:"none"}))),g||(g=P.createElement("g",{strokeLinecap:"round"},P.createElement("path",{d:"M402.125 142.921c49.05.18 98.11.37 174.05.65",stroke:"#5f3dc4",strokeWidth:2.5,fill:"none",strokeDasharray:"1.5 8"}),P.createElement("path",{d:"m576.175 143.571-13.61 6.29.04-12.68 13.57 6.39",strokeWidth:0,fill:"#5f3dc4",fillRule:"evenodd"}),P.createElement("path",{d:"M576.175 143.571c-3.83 1.78-7.67 3.55-13.61 6.29m0 0c.01-2.67.02-5.34.04-12.68m0 0c4.5 2.12 9 4.24 13.57 6.39m0 0s0 0 0 0",stroke:"#5f3dc4",strokeWidth:2.5,fill:"none"}))),P.createElement("text",{fontFamily:"Cascadia, Segoe UI Emoji",fontSize:20,fill:"#5f3dc4",style:{whiteSpace:"pre"},dominantBaseline:"text-before-edge",transform:"translate(417.26 119.296)"},"gvk"),v||(v=P.createElement("g",{strokeLinecap:"round"},P.createElement("path",{d:"M10 143.574h240.88",stroke:"#449b82",strokeWidth:2.5,fill:"none",strokeDasharray:"1.5 8"}),P.createElement("path",{d:"m250.88 143.574-13.59 6.34v-12.68l13.59 6.34",strokeWidth:0,fill:"#449b82",fillRule:"evenodd"}),P.createElement("path",{d:"M250.88 143.574c-3.76 1.75-7.52 3.51-13.59 6.34m0 0v-12.68m0 0 13.59 6.34m0 0s0 0 0 0",stroke:"#449b82",strokeWidth:2.5,fill:"none"}))),P.createElement("text",{fontFamily:"Cascadia, Segoe UI Emoji",fontSize:20,fill:"#449b82",style:{whiteSpace:"pre"},dominantBaseline:"text-before-edge",transform:"translate(30.415 116.447)"},"data([]bytes)"),y||(y=P.createElement("g",{strokeLinecap:"round"},P.createElement("path",{d:"M201.814 140.001v-61.61m0 0h709.42m0 0c-.41 22.07-.83 44.14-1.1 58.77",stroke:"#449b82",strokeWidth:2.5,fill:"none",strokeDasharray:"1.5 8"}),P.createElement("path",{d:"m910.134 137.161-6.08-13.71 12.67.24-6.59 13.47",strokeWidth:0,fill:"#449b82",fillRule:"evenodd"}),P.createElement("path",{d:"M910.134 137.161c-1.27-2.86-2.54-5.72-6.08-13.71m0 0c4.28.08 8.57.16 12.67.24m0 0c-2.47 5.06-4.95 10.12-6.59 13.47m0 0s0 0 0 0",stroke:"#449b82",strokeWidth:2.5,fill:"none"}))),P.createElement("text",{fontFamily:"Cascadia, Segoe UI Emoji",fontSize:16,fill:"#449b82",style:{whiteSpace:"pre"},dominantBaseline:"text-before-edge",transform:"translate(890.409 132.152)"},"data"),P.createElement("text",{fontFamily:"Cascadia, Segoe UI Emoji",fontSize:16,fill:"#0a11d3",style:{whiteSpace:"pre"},dominantBaseline:"text-before-edge",transform:"translate(939.43 133.385)"},"&Kind{}"),C||(C=P.createElement("g",{strokeLinecap:"round"},P.createElement("path",{d:"M1047.976 143.125h229.7",stroke:"#0a11d3",strokeWidth:2.5,fill:"none",strokeDasharray:"1.5 8"}),P.createElement("path",{d:"m1277.676 143.125-13.59 6.34v-12.68l13.59 6.34",strokeWidth:0,fill:"#0a11d3",fillRule:"evenodd"}),P.createElement("path",{d:"M1277.676 143.125c-4.47 2.09-8.94 4.17-13.59 6.34m0 0v-12.68m0 0c5.17 2.41 10.35 4.83 13.59 6.34m0 0s0 0 0 0",stroke:"#0a11d3",strokeWidth:2.5,fill:"none"}))),P.createElement("text",{fontFamily:"Cascadia, Segoe UI Emoji",fontSize:20,fill:"#0a11d3",style:{whiteSpace:"pre"},dominantBaseline:"text-before-edge",transform:"translate(1138.974 116.543)"},"&Kind{}"),P.createElement("text",{fontFamily:"Cascadia, Segoe UI Emoji",fontSize:20,style:{whiteSpace:"pre"},dominantBaseline:"text-before-edge",transform:"rotate(.025 -144470.343 2107413.874)",strokeOpacity:.7,fillOpacity:.7},"\xa9Xudong Wang\ud83e\udd16\ufe0f\ud83c\udf88"),P.createElement("text",{fontFamily:"Cascadia, Segoe UI Emoji",fontSize:20,style:{whiteSpace:"pre"},dominantBaseline:"text-before-edge",transform:"translate(582.078 23.302)"},"Serializer"))};const T={sidebar_position:5},w="\u5e8f\u5217\u5316\u5668\u4e0e\u5e8f\u5217\u5316\u5668\u5de5\u5382",j={unversionedId:"apimachinery/serializer",id:"apimachinery/serializer",title:"\u5e8f\u5217\u5316\u5668\u4e0e\u5e8f\u5217\u5316\u5668\u5de5\u5382",description:"\u6211\u4eec\u5728\u4eceKubernetes API\u8c08\u8d77\u5c0f\u8282\u4e2d\uff0c\u6211\u4eec\u5df2\u7ecf\u77e5\u9053kube-apiserver\u662f\u7cfb\u7edf\u7ba1\u7406\u8d44\u6e90\u7684\u552f\u4e00\u5bf9\u5916\u4ea4\u4e92\u63a5\u53e3\u3002",source:"@site/docs/apimachinery/serializer.mdx",sourceDirName:"apimachinery",slug:"/apimachinery/serializer",permalink:"/crd-controller-from-scratch/docs/apimachinery/serializer",draft:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"kind\u6848\u4f8b\u63a2\u7a76",permalink:"/crd-controller-from-scratch/docs/apimachinery/kind-case-study"},next:{title:"client-go\u4e0eapimachinery",permalink:"/crd-controller-from-scratch/docs/apimachinery/client-go-and-apimachinery"}},O={},K=[{value:"\u8d44\u6e90\u7684\u5185\u90e8\u7248\u672c",id:"\u8d44\u6e90\u7684\u5185\u90e8\u7248\u672c",level:2},{value:"Kubernetes\u7f16/\u89e3\u7801\u4f53\u7cfb\u6f14\u5316\u5386\u53f2",id:"kubernetes\u7f16\u89e3\u7801\u4f53\u7cfb\u6f14\u5316\u5386\u53f2",level:2},{value:"\u53e4\u4ee3\u9636\u6bb5",id:"\u53e4\u4ee3\u9636\u6bb5",level:3},{value:"\u8fd1\u4ee3\u9636\u6bb5",id:"\u8fd1\u4ee3\u9636\u6bb5",level:3},{value:"\u73b0\u4ee3\u9636\u6bb5\uff08Scheme\u5927\u4e00\u7edf\u65f6\u671f\uff09",id:"\u73b0\u4ee3\u9636\u6bb5scheme\u5927\u4e00\u7edf\u65f6\u671f",level:3},{value:"\u5f53\u4ee3\u9636\u6bb5",id:"\u5f53\u4ee3\u9636\u6bb5",level:3},{value:"Codec\u4f53\u7cfb",id:"codec\u4f53\u7cfb",level:2},{value:"\u63a5\u53e3",id:"\u63a5\u53e3",level:3},{value:"\u5b9e\u73b0",id:"\u5b9e\u73b0",level:3},{value:"JSON\u5e8f\u5217\u5316\u5668",id:"json\u5e8f\u5217\u5316\u5668",level:4},{value:"codec",id:"codec",level:4},{value:"\u5e8f\u5217\u5316\u5668\u5de5\u5382CodecFactory",id:"\u5e8f\u5217\u5316\u5668\u5de5\u5382codecfactory",level:3},{value:"\u521b\u5efaCodecFactory\u5bf9\u8c61",id:"\u521b\u5efacodecfactory\u5bf9\u8c61",level:4},{value:"WithoutConversion",id:"withoutconversion",level:4},{value:"URL\u53c2\u6570\u7f16\u89e3\u7801\u5668ParameterCodec",id:"url\u53c2\u6570\u7f16\u89e3\u7801\u5668parametercodec",level:3},{value:"\u5c0f\u7ed3",id:"\u5c0f\u7ed3",level:3}],x={toc:K},M="wrapper";function z(e){let{components:t,...n}=e;return(0,E.kt)(M,(0,S.Z)({},x,n,{components:t,mdxType:"MDXLayout"}),(0,E.kt)("h1",{id:"\u5e8f\u5217\u5316\u5668\u4e0e\u5e8f\u5217\u5316\u5668\u5de5\u5382"},"\u5e8f\u5217\u5316\u5668\u4e0e\u5e8f\u5217\u5316\u5668\u5de5\u5382"),(0,E.kt)("p",null,"\u6211\u4eec\u5728",(0,E.kt)("a",{parentName:"p",href:"./kubernetes-api"},"\u4eceKubernetes API\u8c08\u8d77"),"\u5c0f\u8282\u4e2d\uff0c\u6211\u4eec\u5df2\u7ecf\u77e5\u9053",(0,E.kt)("inlineCode",{parentName:"p"},"kube-apiserver"),"\u662f\u7cfb\u7edf\u7ba1\u7406\u8d44\u6e90\u7684\u552f\u4e00\u5bf9\u5916\u4ea4\u4e92\u63a5\u53e3\u3002\n\u4e0d\u7ba1\u662f\u5ba2\u6237\u7aef\uff0c\u8fd8\u662fKubernetes\u7cfb\u7edf\u5185\u90e8\u5176\u4ed6\u7ec4\u4ef6\uff08",(0,E.kt)("inlineCode",{parentName:"p"},"kubelet"),"\u7b49\uff09\u5b83\u4eec\u90fd\u53ea\u80fd\u901a\u8fc7",(0,E.kt)("inlineCode",{parentName:"p"},"kube-apiserver"),"\u4f7f\u7528HTTP\u5bf9\u8d44\u6e90\u8fdb\u884c\u7ba1\u7406\u3002"),(0,E.kt)("p",null,"\u800cHTTP\u901a\u4fe1\u7684\u8bf7\u6c42\u4f53/\u8fd4\u56de\u4f53\uff08",(0,E.kt)("em",{parentName:"p"},"Kubernetes\u8d44\u6e90"),"\uff09\u4e0eKubernetes\u6e90\u7801\u4e2d\u5bf9\u5e94Go\u7c7b\u578b\uff08",(0,E.kt)("em",{parentName:"p"},"kind"),"\uff09\u95f4\u7684\u8f6c\u6362\u5fc5\u7136\u6d89\u53ca\u5230\u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316\uff08\u7f16/\u89e3\u7801\uff09\u3002\n\u800c\u5728Kubernetes\u6e90\u7801\u4e2d\uff0c",(0,E.kt)("inlineCode",{parentName:"p"},"apimachinery"),"\u5e93\u9664\u4e86\u662fKubernetes API\u7c7b\u578b\u7cfb\u7edf\u7684\u57fa\u77f3\uff0c\u4e5f\u627f\u8f7d\u7740\u5bf9",(0,E.kt)("em",{parentName:"p"},"Kubernetes\u8d44\u6e90"),"\u7f16/\u89e3\u7801\u7684\u4f7f\u547d\u3002\n",(0,E.kt)("inlineCode",{parentName:"p"},"kube-apiserver"),"\uff0c",(0,E.kt)("inlineCode",{parentName:"p"},"kubectl"),"\uff0c",(0,E.kt)("inlineCode",{parentName:"p"},"client-go"),"\uff0c",(0,E.kt)("inlineCode",{parentName:"p"},"kubelet"),"\u7b49\u7ec4\u4ef6\u3001\u5de5\u5177\u4ee5\u53ca\u5e93\u90fd\u4f9d\u8d56",(0,E.kt)("inlineCode",{parentName:"p"},"apimachinery"),"\u5e93\u6765\u5bf9\u8d44\u6e90\u8fdb\u884c\u7f16/\u89e3\u7801\u3002"),(0,E.kt)("p",null,"\u5728\u672c\u8282\u4e2d\u6211\u4eec\u5c06\u6df1\u5165\u4ecb\u7ecd\u4e00\u4e0b",(0,E.kt)("inlineCode",{parentName:"p"},"apimachinery"),"\u5e93\u4e2d\u7684\u5e8f\u5217\u5316\u5668\u548c\u5e8f\u5217\u5316\u5de5\u5382\u3002 \u5176\u5b9e",(0,E.kt)("inlineCode",{parentName:"p"},"apimachinery"),"\u5e93\u4e0e\u7f16/\u89e3\u7801\u76f8\u5173\u7684\u903b\u8f91\u76f8\u5bf9\u590d\u6742\u3002\n\u56e0\u6b64\uff0c\u4e3a\u4e86\u51cf\u8f7b\u8bfb\u8005\u7684\u8d1f\u62c5\u4e5f\u4fbf\u4e8e\u8bfb\u8005\u7406\u89e3\uff0c\u6211\u4eec\u4e0d\u4f1a\u7167\u642c\u5927\u6bb5\u6e90\u7801\u5e76\u505a\u884c\u7ea7\u522b\u7684\u89e3\u91ca\u3002\n\u5728\u672c\u8282\u4e2d\u6211\u4eec\u5c06\u4f7f\u7528\u6211\u4eec\u8ba4\u4e3a\u5408\u9002\u7684\u7f16\u6392\u65b9\u5f0f\u6765\u4e3a\u8bfb\u8005\u63ed\u5f00",(0,E.kt)("inlineCode",{parentName:"p"},"apimachinery"),"\u4e2d\u7f16/\u89e3\u7801\u4f53\u7cfb\u7684\u9762\u7eb1\u3002"),(0,E.kt)("admonition",{title:"\u6ce8",type:"tip"},(0,E.kt)("p",{parentName:"admonition"},"\u4e3a\u4e86\u4fbf\u4e8e\u8bfb\u8005\u7406\u89e3Kubernetes\u7684\u7f16/\u89e3\u7801\u4f53\u7cfb\uff0c\u672c\u5c0f\u8282\u63a5\u4e0b\u6765\u7684\u5185\u5bb9\u57fa\u4e8e",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/tree/v1.2.0-alpha.7"},"Kubernetes v1.2.0-alpha.7"),"\u53ca\u5176\u4e4b\u524d\u7684\u7248\u672c\u3002\u8fd9\u4e9b\u7248\u672c\u6709\u52a9\u4e8e\u6211\u4eec\u4e86\u89e3Kubernetes\u5982\u4eca\u76f8\u5bf9\u590d\u6742\u7684\u7f16/\u89e3\u4f53\u7cfb\u662f\u5982\u4f55\u4e00\u6b65\u6b65\u6f14\u5316\u800c\u6765\u7684\u3002\n\u5f7c\u65f6\uff0c",(0,E.kt)("inlineCode",{parentName:"p"},"apimachinery"),"\u5e93\u8fd8\u6ca1\u6709\u6b63\u5f0f\u72ec\u7acb\uff0c\u5f53\u65f6\u6240\u6709\u7f16/\u89e3\u7801\u903b\u8f91\u8fd8\u8026\u5408\u5728\u4e86",(0,E.kt)("inlineCode",{parentName:"p"},"kubernetes"),"\u5e93\u5185\u3002"),(0,E.kt)("p",{parentName:"admonition"},"\u76f4\u5230",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/tree/v1.6.0-alpha.1"},"Kubernetes v1.6.0-alpha.1"),"(",(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," ",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/pull/39475"},"Pull Request #39475"),")\uff0c\u793e\u533a\u624d\u6b63\u5f0f\u72ec\u7acb\u51fa",(0,E.kt)("inlineCode",{parentName:"p"},"apimachinery"),"\u5e93\u3002\n\u539f\u5148",(0,E.kt)("inlineCode",{parentName:"p"},"kubernetes"),"\u5e93\u4e2d\u4e0eAPI\u7c7b\u578b\u7cfb\u7edf\u76f8\u5173\u7684\u4ee3\u7801\uff08\u5305\u62ec\u7f16/\u89e3\u7801\u903b\u8f91\u7b49\uff09\u88ab\u6574\u4f53\u8fc1\u79fb\u5230\u4e86",(0,E.kt)("inlineCode",{parentName:"p"},"apimachinery"),"\u5e93\u4e2d\u3002"),(0,E.kt)("p",{parentName:"admonition"},"\u53e6\u5916\uff0c\u4e3a\u4e86\u51cf\u8f7b\u8bfb\u8005\u9605\u8bfb\u8d1f\u62c5\uff0c\u6211\u4eec\u5c06\u91cd\u70b9\u805a\u7126\u5728Kubernetes\u7684\u89e3\u7801\u903b\u8f91\uff0c\u4e0d\u518d\u8d58\u8ff0\u7f16\u7801\u903b\u8f91\u3002")),(0,E.kt)("h2",{id:"\u8d44\u6e90\u7684\u5185\u90e8\u7248\u672c"},"\u8d44\u6e90\u7684\u5185\u90e8\u7248\u672c"),(0,E.kt)("p",null,"\u5728\u4e4b\u524d",(0,E.kt)("a",{parentName:"p",href:"./kubernetes-api#%E5%88%9D%E8%AF%86kind"},"\u521d\u8bc6kind"),"\u5c0f\u8282\uff0c\u6211\u4eec\u5c31\u5df2\u7ecf\u5f3a\u8c03\u8fc7\uff0c\u672c\u4e66\u4e2d\u6240\u63d0\u53ca\u7684\u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316\u7279\u6307",(0,E.kt)("strong",{parentName:"p"},"\u5728Kubernetes\u4e0a\u4e0b\u6587\u4e2d"),"\u3002"),(0,E.kt)("p",null,"\u6211\u4eec\u77e5\u9053\uff0c\u5728Go\u8bed\u8a00\u4e2d\uff0cJSON\u7f16\u7801\u7684\u5b57\u8282\u5e8f\u5217\uff08",(0,E.kt)("inlineCode",{parentName:"p"},"[]byte"),"\uff09\u4e0eGo\u7c7b\u578b\uff08",(0,E.kt)("inlineCode",{parentName:"p"},"struct"),"\uff09\u4e4b\u95f4\u7684\u8f6c\u6362\u5176\u5b9e\u5341\u5206\u7b80\u5355\uff0c\u53ea\u8981\u5229\u7528\u6807\u51c6\u5e93",(0,E.kt)("inlineCode",{parentName:"p"},"encoding/json"),"\u7684",(0,E.kt)("inlineCode",{parentName:"p"},"json.Unmarshal"),"\u4ee5\u53ca",(0,E.kt)("inlineCode",{parentName:"p"},"json.Marshal"),"\u5c31\u53ef\u4ee5\u8f7b\u677e\u5b8c\u6210\u3002"),(0,E.kt)("p",null,"\u800c\u5728Kubernetes\u4e2d\uff0c\u5bf9\u8d44\u6e90\u7684\u7f16/\u89e3\u7801\u8fd8\u5305\u62ec\u4e00\u4e9b\u7279\u6b8a\u7684\u673a\u5236\uff0c\u8fd9\u4e9b\u7279\u6709\u7684\u673a\u5236\u4e5f\u5bfc\u81f4\u4e86",(0,E.kt)("inlineCode",{parentName:"p"},"apimachinery"),"\u5e93\u4e2d\u7f16/\u89e3\u7801\u76f8\u5173\u4ee3\u7801\u7684\u590d\u6742\u6027\u3002"),(0,E.kt)("p",null,"\u800c\u8fd9\u4e9b\u7279\u6b8a\u673a\u5236\u7684\u672c\u8d28\u6765\u81ea\u4e8eKubernetes\u7684\u4e2d\u4e00\u4e2a\u7279\u6b8a\u6982\u5ff5\u2014\u2014\u8d44\u6e90\u7684",(0,E.kt)("em",{parentName:"p"},"\u5185\u90e8\u7248\u672c\uff08internal/hub version\uff09"),"\u3002"),(0,E.kt)("p",null,"\u6240\u8c13\u8d44\u6e90\u7684",(0,E.kt)("em",{parentName:"p"},"\u5185\u90e8\u7248\u672c"),"\u662f\u6307\u8d44\u6e90\u5728",(0,E.kt)("inlineCode",{parentName:"p"},"kube-apiserver"),"\u7ec4\u4ef6\u5185\u5b58\u4e2d\u7684\u8868\u73b0\u5f62\u5f0f\u3002\n\u6211\u4eec\u5148\u524d\u5728",(0,E.kt)("a",{parentName:"p",href:"./kubernetes-api#%E4%BB%8Ekubernetes-kind%E5%88%B0kubernetes%E8%B5%84%E6%BA%90%E5%86%8D%E8%AF%86kubernetes%E8%B5%84%E6%BA%90"},"\u518d\u8bc6Kubernetes\u8d44\u6e90"),"\u5c0f\u8282\u5df2\u7ecf\u4ecb\u7ecd\u8fc7\u8d44\u6e90\u5728Kubernetes\u7cfb\u7edf\u4e2d\u7684\u4e0d\u540c\u8868\u73b0\u5f62\u5f0f\uff0c\u5185\u5b58\u5c31\u662f\u5176\u4e2d\u4e4b\u4e00\u3002\n\u8d44\u6e90\u7684\u5185\u5b58\u5f62\u5f0f\u662f\u6307Kubernetes\u7ec4\u4ef6\uff08",(0,E.kt)("inlineCode",{parentName:"p"},"kube-apiserver"),"\uff0c",(0,E.kt)("inlineCode",{parentName:"p"},"kubelet"),"\uff0c",(0,E.kt)("inlineCode",{parentName:"p"},"kubectl"),"\u7b49\uff09\u5728\u53cd\u5e8f\u5217\u5316JSON\u540e/\u5e8f\u5217\u5316\u6210JSON\u524d\u7684",(0,E.kt)("em",{parentName:"p"},"kind"),"\u5b9e\u4f8b\uff08instance\uff09\u3002\u800c\u5bf9\u4e8e\u8d44\u6e90\u7684",(0,E.kt)("em",{parentName:"p"},"\u5185\u90e8\u7248\u672c"),"\u6765\u8bf4\uff0c\u5b83\u7279\u6307\u5728",(0,E.kt)("strong",{parentName:"p"},(0,E.kt)("inlineCode",{parentName:"strong"},"kube-apiserver"),"\u7ec4\u4ef6"),"\u4e2d\u7684\u5185\u5b58\u5f62\u5f0f\u3002"),(0,E.kt)("p",null,"\u6211\u4eec\u5728",(0,E.kt)("a",{parentName:"p",href:"./kubernetes-api"},"\u4eceKubernetes API\u8c08\u8d77"),"\u4ee5\u53ca",(0,E.kt)("a",{parentName:"p",href:"./gvk"},"GVK"),"\u5c0f\u8282\u5df2\u7ecf\u591a\u6b21\u5f3a\u8c03\u4e86\u8d44\u6e90\u7248\u672c\u8fd9\u4e2a\u91cd\u8981\u6982\u5ff5\uff0c\u4e0d\u8fc7\u8d44\u6e90\u7684\u591a\u7248\u672c\u5bf9\u4e8e",(0,E.kt)("inlineCode",{parentName:"p"},"kube-apiserver"),"\u6765\u8bf4\uff0c\u8fd9\u5374\u662f\u4e00\u4e2a\u76f8\u5f53\u68d8\u624b\u7684\u95ee\u9898\u3002\n",(0,E.kt)("inlineCode",{parentName:"p"},"kube-apiserver"),"\u4ece\u5904\u7406HTTP\u8bf7\u6c42\u5f00\u59cb\u5230\u6700\u7ec8\u5c06\u8d44\u6e90\u5b58\u5165",(0,E.kt)("inlineCode",{parentName:"p"},"etcd"),"\u4e2d\u8fd9\u4e2d\u95f4\u6709\u4e00\u7cfb\u5217\u6b65\u9aa4\u6d41\u7a0b\u9700\u8981\u5b8c\u6210\uff0c\u8fd9\u4e0d\u5728\u672c\u4e66\u7684\u8ba8\u8bba\u8303\u56f4\u4e4b\u5185\uff0c\u5bf9\u6b64\u8fc7\u7a0b\u611f\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u53c2\u8003\u6269\u5c55\u9605\u8bfb",(0,E.kt)("a",{parentName:"p",href:"../intro#%E6%89%A9%E5%B1%95%E9%98%85%E8%AF%BB"},"Kubernetes API\u8bf7\u6c42\u7684\u751f\u547d\u5468\u671f"),"\u3002\n\u603b\u4e4b\uff0c\u5bf9\u4e8e",(0,E.kt)("inlineCode",{parentName:"p"},"kube-apiserver"),"\u7ec4\u4ef6\u6765\u8bf4\uff0c\u5982\u679c\u4e0d\u9488\u5bf9\u8d44\u6e90\u7684\u591a\u7248\u672c\u60c5\u51b5\u52a0\u4ee5\u989d\u5916\u5904\u7406\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u9700\u8981\u4e3a\u8d44\u6e90\u7684\u6bcf\u4e2a\u7248\u672c\u91cd\u5199\u76f8\u540c\u7684\u903b\u8f91\uff0c\u8fd9\u663e\u7136\u4e0d\u662f\u4e00\u4e2a\u597d\u7684\u65b9\u5f0f\u3002"),(0,E.kt)("p",null,"\u56e0\u6b64\uff0c\u8d44\u6e90\u7684",(0,E.kt)("em",{parentName:"p"},"\u5185\u90e8\u7248\u672c"),"\u7684\u63d0\u51fa\u662f\u4e3a\u4e86\u89e3\u51b3",(0,E.kt)("inlineCode",{parentName:"p"},"kube-apiserver"),"\u5728\u5904\u7406\u8d44\u6e90\u591a\u7248\u672c\u65f6\u7684\u75db\u70b9\u3002 \u5177\u4f53\u6765\u8bf4\uff0c",(0,E.kt)("inlineCode",{parentName:"p"},"kube-apiserver"),"\u5728\u53cd\u5e8f\u5217\u5316HTTP\u8bf7\u6c42\u4f53\u4e2d\u7684\u8d44\u6e90\u65f6\uff0c\u4f1a\u518d\u5c06\u8d44\u6e90\u8f6c\u5316\u4e3a",(0,E.kt)("em",{parentName:"p"},"\u5185\u90e8\u7248\u672c"),"\u8fdb\u800c\u53ef\u4ee5",(0,E.kt)("strong",{parentName:"p"},"\u7edf\u4e00"),"\u5904\u7406\u3002"),(0,E.kt)("admonition",{title:"\u8d44\u6e90\u5185\u90e8\u7248\u672c\u7684\u5386\u53f2",type:"tip"},(0,E.kt)("p",{parentName:"admonition"},"\u5173\u4e8e\u8d44\u6e90",(0,E.kt)("em",{parentName:"p"},"\u5185\u90e8\u7248\u672c"),"\u5f15\u5165\u6700\u65e9\u53ef\u4ee5\u8ffd\u6eaf\u5230",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/pull/565"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Pull Request #565"),"\u3002\n",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/pull/565"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Pull Request #565"),"\u9996\u6b21\u5c06",(0,E.kt)("inlineCode",{parentName:"p"},"apiVersion"),"\u5b57\u6bb5\u5f15\u5165\u5230",(0,E.kt)("em",{parentName:"p"},"API\u5bf9\u8c61"),(0,E.kt)("sup",{parentName:"p",id:"fnref-1"},(0,E.kt)("a",{parentName:"sup",href:"#fn-1",className:"footnote-ref"},"1")),"\u4e2d\u3002\n\u6211\u4eec\u5728",(0,E.kt)("a",{parentName:"p",href:"./kubernetes-api#api%E5%88%86%E7%BB%84group%E5%92%8C%E7%89%88%E6%9C%AC%E5%8C%96version"},"API\u5206\u7ec4\u548c\u7248\u672c\u5316"),"\u5c0f\u8282\u5c31\u4ecb\u7ecd\u4e86Kubernetes\u6e90\u7801\u81ea\u516c\u5f00\u4ee5\u6765API\u5c31\u5e26\u6709\u7248\u672c\u4fe1\u606f\u3002\u4f46\u662f\u76f4\u5230",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/pull/565"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Pull Request #565"),"\u624d\u5c06API\u7248\u672c\u4fe1\u606f\u540c\u65f6\u5d4c\u5165\u8fdbAPI\u5bf9\u8c61\u4e2d\u3002\n\u5f53\u65f6Kubernetes API\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a\u7248\u672c",(0,E.kt)("inlineCode",{parentName:"p"},"v1beta1"),"\uff0c",(0,E.kt)("inlineCode",{parentName:"p"},"kube-apiserver"),"\u66b4\u9732\u7684\u6240\u6709API\u7684\u6839\u8def\u5f84\u4e3a",(0,E.kt)("inlineCode",{parentName:"p"},"api/v1beta1"),"\u3002\n\u5728",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/pull/565"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Pull Request #565"),"\u4e2d\uff0c\n\u4f5c\u8005\u5e0c\u671bHTTP\u8bf7\u6c42\u4f53\u540c\u6837\u5e26\u6709\u7248\u672c\u4fe1\u606f\uff0c\u4f8b\u5982:"),(0,E.kt)("details",null,(0,E.kt)("summary",null,"\u53e4\u65e9\u7684Kubernetes API\u8bf7\u6c42"),(0,E.kt)("pre",{parentName:"admonition"},(0,E.kt)("code",{parentName:"pre",className:"language-bash"},'POST /api/v1beta1/pods\n{\n  "id": "test-pod",\n  "kind": "Pod",\n  # highlight-next-line\n  "apiVersion": "v1beta1",\n  "desiredState": {\n    "manifest": {\n      "version": "v1beta1",\n      "id": "php",\n      "containers": [{\n        "name": "nginx",\n        "image": "dockerfile/nginx",\n        "ports": [{\n          "containerPort": 80,\n          "hostPort": 8080\n        }],\n        "livenessProbe": {\n          "enabled": true,\n          "type": "http",\n          "initialDelaySeconds": 30,\n          "httpGet": {\n            "path": "/index.html",\n            "port": "8080"\n          }\n        }\n      }]\n    }\n  },\n  "labels": {\n    "name": "foo"\n  }\n}\n'))),(0,E.kt)("p",{parentName:"admonition"},"\u8fd9\u6837\u505a\u7684\u76ee\u7684\u662f\u80fd\u591f\u5c06API\u7248\u672c\u548cAPI\u5bf9\u8c61\u4e00\u4e00\u5bf9\u5e94\uff0c\u7279\u522b\u662f\u5c06\u6765\u540c\u65f6\u51fa\u73b0\u591a\u4e2aAPI\u7248\u672c\u7684\u65f6\u5019\u3002"),(0,E.kt)("p",{parentName:"admonition"},"\u800c\u5728",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/pull/565"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Pull Request #565"),"\u4e4b\u524d\uff0c",(0,E.kt)("em",{parentName:"p"},"API\u5bf9\u8c61"),"\u5374\u6ca1\u6709\u7248\u672c\u7684\u6982\u5ff5\u3002\n\u5f53\u65f6\u7684API\u5bf9\u8c61\u4e5f\u53ea\u6709\u96f6\u661f\u7684\u51e0\u4e2a\uff0c\u5b83\u4eec\u7684Go\u7c7b\u578b\u88ab\u7edf\u4e00\u5b9a\u4e49\u5728",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/blob/69c483f6205a2b35bea970917aadd155b8b492b1/pkg/api/types.go"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," ",(0,E.kt)("inlineCode",{parentName:"a"},"pkg/api/types.go")),"\u4e2d\u3002\n\u5728",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/pull/565"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Pull Request #565"),"\u4e2d\uff0c\u4f5c\u8005\u5f15\u5165",(0,E.kt)("inlineCode",{parentName:"p"},"apiVersion"),"\u5b57\u6bb5\u7684\u540c\u65f6\uff0c\u8fd8\u4e13\u95e8\u65b0\u5efa\u4e86\u4e00\u4e2a\u76ee\u5f55\uff08\u5305\uff09\uff1a",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/tree/bf5ae4bb9ddea63847b229b300f1fc26c538a9d9/pkg/api/v1beta1"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," ",(0,E.kt)("inlineCode",{parentName:"a"},"pkg/api/v1beta1/")),"\uff0c\n\u5e76\u5c06\u539f\u6765",(0,E.kt)("inlineCode",{parentName:"p"},"pkg/api/types.go"),"\u6587\u4ef6\u62f7\u4e5f\u8d1d\u5230\u4e86",(0,E.kt)("inlineCode",{parentName:"p"},"pkg/api/v1beta1/"),"\u76ee\u5f55\u4e0b\u3002\u81f3\u6b64\uff0cKubernetes\u9996\u6b21\u51fa\u73b0\u4e86\u540c\u65f6\u5b58\u5728",(0,E.kt)("strong",{parentName:"p"},"\u4e24\u4e2a"),"\u7248\u672c\u7684API\u5bf9\u8c61\u7684\u60c5\u51b5\uff1a",(0,E.kt)("inlineCode",{parentName:"p"},"v1beta1"),"\u4ee5\u53ca\u521d\u59cb\u7248\u672c\uff08\u5373\u4e0d\u5e26\u7248\u672c\u4fe1\u606f\uff09\u3002\u4f8b\u5982\uff1a",(0,E.kt)("inlineCode",{parentName:"p"},"v1beta1.Pod"),"\u548c",(0,E.kt)("inlineCode",{parentName:"p"},"Pod"),"\u3002\uff08\u5f53\u7136\u5b83\u4eec\u76ee\u524d\u552f\u4e00\u7684\u533a\u522b\u662f",(0,E.kt)("inlineCode",{parentName:"p"},"apiVersion"),"\u5b57\u6bb5\u4e00\u4e2a\u4e3a\u7a7a\uff0c\u53e6\u4e00\u4e2a\u5219\u4e3a",(0,E.kt)("inlineCode",{parentName:"p"},"v1beta1"),"\u3002\uff09\n\u4e3a\u4e86\u590d\u7528\u539f\u5148\u5c31\u5df2\u7ecf\u5b58\u5728\u7684\u4ee3\u7801\uff08\u8fd9\u4e9b\u4ee3\u7801\u57fa\u4e8e",(0,E.kt)("inlineCode",{parentName:"p"},"pkg/api/types.go"),"\u4e2d\u6240\u5b9a\u4e49\u7684\u521d\u59cbAPI\u5bf9\u8c61\uff09\uff0c\u4f5c\u8005\u540c\u65f6\u5f15\u5165\u4e86",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/blob/bf5ae4bb9ddea63847b229b300f1fc26c538a9d9/pkg/api/helper.go#L268"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," ",(0,E.kt)("inlineCode",{parentName:"a"},"internalize()")),"\u51fd\u6570\uff0c\u7528\u4e8e\u5c06\u6240\u6709",(0,E.kt)("inlineCode",{parentName:"p"},"v1beta1"),"\u7684API\u5bf9\u8c61\u8f6c\u5316\u4e3a\u521d\u59cbAPI\u5bf9\u8c61\uff1a\u4f8b\u5982\u5c06",(0,E.kt)("inlineCode",{parentName:"p"},"v1beta1.Pod"),"\u8f6c\u5316\u4e3a",(0,E.kt)("inlineCode",{parentName:"p"},"Pod"),"\u3002\n\u8fd9\u6b63\u5f0f\u8d44\u6e90\u7248\u672c\u8f6c\u5316\u7684\u96cf\u5f62\uff0c\u800c",(0,E.kt)("inlineCode",{parentName:"p"},"pkg/api/types.go"),"\u4e2d\u5b9a\u4e49\u7684\u521d\u59cbAPI\u5bf9\u8c61\u5219\u53ef\u4ee5\u8ba4\u4e3a\u662f\u5145\u5f53\u4e86Kubernetes API\u5bf9\u8c61\u7684",(0,E.kt)("strong",{parentName:"p"},"\u7b2c\u4e00\u4e2a"),"\u5185\u90e8\u7248\u672c\u3002"),(0,E.kt)("p",{parentName:"admonition"},"\u5728\u8fd9\u4e2aPR\u4e2d\uff0c",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/blob/bf5ae4bb9ddea63847b229b300f1fc26c538a9d9/pkg/api/helper.go#L268"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," ",(0,E.kt)("inlineCode",{parentName:"a"},"internalize()")),"\u51fd\u6570\u8fd8\u5341\u5206\u7c97\u7cd9\uff0c\u7531\u4e8e\u5f53\u65f6API\u5bf9\u8c61\u672c\u8eab\u8fd8\u4e0d\u591a\uff0c\u4f5c\u8005\u51e0\u4e4e\u679a\u4e3e\u4e86\u6240\u6709\u7684\u8f6c\u6362\u3002\n\u540e\u7eed\u7684",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/pull/672"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Pull Request #672"),"\u5bf9",(0,E.kt)("a",{parentName:"p",href:"https://github.com/lavalamp/kubernetes/blob/ce586c1448ad37fb31f915d2fbeced96fec2cd61/pkg/api/helper.go#L467"},(0,E.kt)("inlineCode",{parentName:"a"},"internalize()")),'\u51fd\u6570\u8fdb\u884c\u4e86\u4f18\u5316\uff0c\u793e\u533a\u5f00\u53d1\u8005\u9996\u6b21\u5f15\u5165\u4e86"\u7248\u672c\u8f6c\u5316\u51fd\u6570\u7684\u6ce8\u518c\u673a\u5236"\uff1a'),(0,E.kt)("details",null,(0,E.kt)("summary",null,"\u7248\u672c\u8f6c\u6362\u51fd\u6570\u7684\u6ce8\u518c\u673a\u5236"),(0,E.kt)("p",{parentName:"admonition"},"\u65b0\u5f15\u5165\u7684",(0,E.kt)("inlineCode",{parentName:"p"},"Converter"),"\u7c7b\u578b\u662f\u7248\u672c\u8f6c\u6362\u51fd\u6570\u7684\u6ce8\u518c\u673a\u5236\u7684\u8f7d\u4f53\uff1b"),(0,E.kt)("pre",{parentName:"admonition"},(0,E.kt)("code",{parentName:"pre",className:"language-go",metastring:'title="pkg/api/helper.go"',title:'"pkg/api/helper.go"'},"// Converter knows how to convert one type to another.\ntype Converter struct {\n    // Map from the conversion pair to a function which can\n    // do the conversion.\n    // highlight-next-line\n    funcs map[typePair]reflect.Value\n\n    // ...\n}\n\n// Register registers a conversion func with the Converter. conversionFunc must take\n// two parameters, the input and output type.\n//\nfunc (c *Converter) Register(conversionFunc interface{}) error {\n    // ...\n}\n")),(0,E.kt)("p",{parentName:"admonition"},(0,E.kt)("inlineCode",{parentName:"p"},"Converter"),"\u7ed3\u6784\u4e2d\u7684",(0,E.kt)("inlineCode",{parentName:"p"},"funcs"),"\u6210\u5458\u53d8\u91cf\u662f\u8f6c\u6362\u51fd\u6570\u7684\u6ce8\u518c\u8868\u3002",(0,E.kt)("inlineCode",{parentName:"p"},"Converter"),"\u7684",(0,E.kt)("inlineCode",{parentName:"p"},"Register"),"\u51fd\u6570\u7528\u4e8e\u6ce8\u518c\u8f6c\u5316\u51fd\u6570\uff0c\u4f8b\u5982\uff1a"),(0,E.kt)("pre",{parentName:"admonition"},(0,E.kt)("code",{parentName:"pre",className:"language-go"},"c.Register(\n        func(in *Pod, out *v1.Pod) error {\n                // conversion logic...\n                return nil\n        })\n")),(0,E.kt)("p",{parentName:"admonition"},"\u6709\u4e86",(0,E.kt)("inlineCode",{parentName:"p"},"Converter"),"\u4e4b\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06API\u5bf9\u8c61\u4e0d\u540c\u7248\u672c\u95f4\u7684\u8f6c\u5316\u903b\u8f91\u5c01\u88c5\u6210\u72ec\u7acb\u7684\u51fd\u6570\uff0c\u7136\u540e\u7edf\u4e00\u6ce8\u518c\u8fdb",(0,E.kt)("inlineCode",{parentName:"p"},"Converter"),"\u4e2d\uff0c",(0,E.kt)("inlineCode",{parentName:"p"},"internalize()"),"\u51fd\u6570\u901a\u8fc7\u67e5\u8be2\u6b64\u7ed3\u6784\u7684\u6ce8\u518c\u8868\u76f4\u63a5\u8c03\u7528\u76f8\u5e94\u7684\u8f6c\u5316\u51fd\u6570\u6765\u5b8c\u6210API\u5bf9\u8c61\u7248\u672c\u7684\u8f6c\u5316\u3002")),(0,E.kt)("p",{parentName:"admonition"},"\u53ef\u4ee5\u8bf4",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/pull/565"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Pull Request #565"),"\u4e0e",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/pull/196"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Pull Request #196"),"\uff08\u9996\u6b21\u5c06",(0,E.kt)("inlineCode",{parentName:"p"},"kind"),"\u5b57\u6bb5\u5f15\u5165API\u7684JSON Schema\uff09\u4e00\u8d77\u5960\u5b9a\u4e86Kubernetes API\u7c7b\u578b\u7cfb\u7edf\u7684\u96cf\u5f62\u3002")),(0,E.kt)("p",null,"\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u53ea\u662f\u4ecb\u7ecd\u4e86",(0,E.kt)("inlineCode",{parentName:"p"},"kube-apiserver"),"\u5728\u63a5\u53d7\u5230HTTP\u8bf7\u6c42\u540e\uff0c\u4f1a\u5c06\u8d44\u6e90\u5e8f\u5217\u5316\u540e\u8f6c\u5316\u4e3a\u5176\u5185\u90e8\u7248\u672c\u3002\n\u5176\u5b9e\u5728\u6b64\u4e4b\u540e\u5185\u90e8\u7248\u672c\u8fd8\u9700\u8981\u518d\u8f6c\u5316\u6210\u5176",(0,E.kt)("em",{parentName:"p"},"\u5b58\u50a8\u7248\u672c"),"\u5b58\u5165",(0,E.kt)("inlineCode",{parentName:"p"},"etcd"),"\u4e2d\u3002\n\u6587\u6863",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api_changes.md#operational-overview"},"API Changes ",(0,E.kt)(G.Z,{mdxType:"GithubSVG"})),"\u91cc\u7b80\u5355\u6982\u62ec\u4e86\u8d44\u6e90\u5728\u4e00\u6b21HTTP\u8bf7\u6c42\u91cc\u6240\u8981\u7ecf\u5386\u7684\u5404\u6b21\u8f6c\u5316\uff1a"),(0,E.kt)("blockquote",null,(0,E.kt)("ol",{parentName:"blockquote"},(0,E.kt)("li",{parentName:"ol"},"A user POSTs a Pod object to /api/v7beta1/..."),(0,E.kt)("li",{parentName:"ol"},"The JSON is unmarshalled into a v7beta1.Pod structure"),(0,E.kt)("li",{parentName:"ol"},"Default values are applied to the v7beta1.Pod"),(0,E.kt)("li",{parentName:"ol"},"The v7beta1.Pod is converted to an hub.Pod internal version"),(0,E.kt)("li",{parentName:"ol"},"The hub.Pod is validated, and any errors are returned to the user"),(0,E.kt)("li",{parentName:"ol"},"The hub.Pod is converted to a v6.Pod (because v6 is the latest stable version)"),(0,E.kt)("li",{parentName:"ol"},"The v6.Pod is marshalled into JSON and written to etcd"))),(0,E.kt)("p",null,"\u9664\u6b64\u4ee5\u5916\uff0c\u5728HTTP\u8bf7\u6c42\u8fd4\u56de\u65f6\uff0c\u8fd8\u9700\u8981\u518d\u5c06\u5185\u90e8\u7248\u672c\u8f6c\u5316\u4e3a\u53d1\u9001\u65f6\u7684\u7248\u672c\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002\u8fd9\u4e2a\u53cd\u5411\u8f6c\u5316\u7684\u8fc7\u7a0b\u6211\u4eec\u4e0d\u518d\u8d58\u8ff0\u3002"),(0,E.kt)("h2",{id:"kubernetes\u7f16\u89e3\u7801\u4f53\u7cfb\u6f14\u5316\u5386\u53f2"},"Kubernetes\u7f16/\u89e3\u7801\u4f53\u7cfb\u6f14\u5316\u5386\u53f2"),(0,E.kt)("p",null,'\u5728\u6211\u770b\u6765\uff0cKubernetes\u6574\u4f53\u7f16/\u89e3\u7801\u4f53\u7cfb\u7684\u6f14\u5316\u548c\u5f62\u6210\u5171\u5206\u4e3a\u56db\u4e2a\u9636\u6bb5\uff1a"\u53e4\u4ee3"\uff0c"\u8fd1\u4ee3"',(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/pull/196"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Pull Request #196"),'\uff0c"\u73b0\u4ee3" ',(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/pull/723"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Pull Request #723"),'\uff0c"\u5f53\u4ee3"',(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/pull/17922"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Pull Request #17922"),"\nCodec\u65f6\u671f\u4e5f\u6b63\u662f",(0,E.kt)("strong",{parentName:"p"},"\u73b0\u5728"),"Kubernetes\u6240\u4f7f\u7528\u7684\u7f16/\u89e3\u7801\u4f53\u7cfb\u3002"),(0,E.kt)("h3",{id:"\u53e4\u4ee3\u9636\u6bb5"},"\u53e4\u4ee3\u9636\u6bb5"),(0,E.kt)("p",null,'\u6240\u8c13"\u53e4\u4ee3"\u662f\u6307\u81eaKubernetes\u6e90\u7801\u516c\u5e03\u5f00\u59cb\uff0c\u7f16/\u89e3\u7801\u751a\u81f3\u8fd8\u672a\u5f62\u6210\u4f53\u7cfb\u7684\u65f6\u671f\uff0c',(0,E.kt)("inlineCode",{parentName:"p"},"kube-apiserver"),"\u5728HTTP\u8bf7\u6c42\u7684handler\u4e2d\u76f4\u63a5\u4f7f\u7528",(0,E.kt)("inlineCode",{parentName:"p"},"json.Marshal"),"\u5b8c\u6210\u5e8f\u5217\u5316\u3002"),(0,E.kt)("h3",{id:"\u8fd1\u4ee3\u9636\u6bb5"},"\u8fd1\u4ee3\u9636\u6bb5"),(0,E.kt)("p",null,'"\u8fd1\u4ee3"\u662f\u6307Kubernetes\u7f16/\u89e3\u7801\u4f53\u7cfb\u5f00\u59cb\u9010\u6e10\u5f62\u6210\u7684\u65f6\u671f\u3002\u8fd9\u4e2a\u65f6\u671f\u793e\u533a\u5f00\u53d1\u8005\u4e3aKubernetes\u7684\u7f16/\u89e3\u7801\u5f15\u5165\u4e86\u4e00\u4e9b\u5173\u952e\u6027\u7684\u673a\u5236\uff0c\u8fd9\u4e9b\u673a\u5236\u4e5f\u4e00\u76f4\u88ab\u6cbf\u7528\u81f3\u4eca\u3002\u8fd9\u4e9b\u673a\u5236\u5305\u62ec\uff1a'),(0,E.kt)("ol",null,(0,E.kt)("li",{parentName:"ol"},(0,E.kt)("p",{parentName:"li"},(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/pull/196"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Pull Request #196")),(0,E.kt)("p",{parentName:"li"},"\u4f34\u968f\u7740",(0,E.kt)("inlineCode",{parentName:"p"},"kind"),"\u5b57\u6bb5\u5f15\u5165API\u7c7b\u578b\u7684\u540c\u65f6\uff0c",(0,E.kt)("inlineCode",{parentName:"p"},"Encode()/Decode()"),"\u51fd\u6570\u7528\u4e8e\u66ff\u4ee3",(0,E.kt)("inlineCode",{parentName:"p"},"json.Marshal()/json.Unmarshal"),"\u4e5f\u6b63\u5f0f\u8fdb\u5165Kubernetes\u6e90\u7801\u4e2d\uff0c \u7f16/\u89e3\u7801\u4f53\u7cfb\u5f00\u59cb\u5904\u4e8e\u840c\u82bd\u9636\u6bb5\u3002\n\u5177\u4f53\u6765\u8bf4\uff0cPR\u4f5c\u8005\u5f15\u5165\u4e86\u4e24\u4e2a\u4e0e\u7f16/\u89e3\u7801\u6709\u5173\u7684\u673a\u5236\uff1a"),(0,E.kt)("ul",{parentName:"li"},(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("p",{parentName:"li"},'"\u667a\u80fd\u63a8\u65ad"\u673a\u5236\u2014\u2014\u5728\u89e3\u7801\u7684\u521d\u59cb\u9636\u6bb5\u6839\u636eJSON\u5b57\u8282\u5e8f\u5217\u7684',(0,E.kt)("inlineCode",{parentName:"p"},"kind"),"\u5b57\u6bb5\u63d0\u524d\u83b7\u53d6API\u7c7b\u578b\u4fe1\u606f\uff1b"),(0,E.kt)("p",{parentName:"li"},"\u6211\u4eec\u5728\u4e4b\u524d",(0,E.kt)("a",{parentName:"p",href:"./runtime.Object#runtimescheme%E4%B8%8Ekind"},"runtime.Scheme\u4e0ekind"),"\u5c0f\u8282\u5728\u53ea\u662f\u987a\u5e26\u63d0\u53ca\u4e86\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u6211\u4eec\u5728\u8fd9\u91cc\u518d\u590d\u8ff0\u4e00\u4e0b\u5b83\u7684\u539f\u7406\uff1a"),(0,E.kt)("pre",{parentName:"li"},(0,E.kt)("code",{parentName:"pre",className:"language-go"},'findKind := struct {\n    Kind string `json:"kind,omitempty" yaml:"kind,omitempty"`\n}{}\nerr := yaml.Unmarshal(data, &findKind)\n')),(0,E.kt)("p",{parentName:"li"},"\u539f\u7406\u5176\u5b9e\u975e\u5e38\u7b80\u5355\uff0c\u5148\u521b\u5efa\u53ea\u6709\u4e00\u4e2a",(0,E.kt)("inlineCode",{parentName:"p"},"Kind"),"\u5b57\u6bb5\u7684\u7a7a\u7ed3\u6784\u4f53",(0,E.kt)("inlineCode",{parentName:"p"},"findKind"),"\uff0c\u518d\u5c1d\u8bd5\u5c06\u539f\u59cb\u5b57\u8282\u5e8f\u5217",(0,E.kt)("inlineCode",{parentName:"p"},"data"),"\u89e3\u7801\u4e3a",(0,E.kt)("inlineCode",{parentName:"p"},"findKind"),'\u7ed3\u6784\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u7387\u5148"\u6355\u83b7"\u539f\u59cb\u5b57\u8282\u4e2d\u5305\u542b\u7684',(0,E.kt)("inlineCode",{parentName:"p"},"kind"),"\u4fe1\u606f\u3002")),(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("p",{parentName:"li"},'"API\u7c7b\u578b\u6ce8\u518c"\u673a\u5236\u2014\u2014\u5c06\u6240\u6709\u7684API\u7c7b\u578b',(0,E.kt)("sup",{parentName:"p",id:"fnref-1"},(0,E.kt)("a",{parentName:"sup",href:"#fn-1",className:"footnote-ref"},"1")),'\u4e8b\u5148\u6ce8\u518c\uff0c\u5728"\u667a\u80fd\u63a8\u65ad"\u673a\u5236\u83b7\u53d6API\u7c7b\u578b\u4fe1\u606f\u540e\u67e5\u8868\u76f4\u63a5\u83b7\u53d6API\u7c7b\u578b\u3002'),(0,E.kt)("p",{parentName:"li"},"\u6211\u4eec\u5728\u4e4b\u524d",(0,E.kt)("a",{parentName:"p",href:"./runtime.Object#runtimescheme%E4%B8%8Ekind"},"runtime.Scheme\u4e0ekind"),"\u5c0f\u8282\u5df2\u7ecf\u8f83\u4e3a\u5b8c\u6574\u5730\u4ecb\u7ecd\u8fc7\u8fd9\u4e2a\u673a\u5236\uff0c\u5728\u8fd9\u91cc\u6211\u4eec\u4e0d\u518d\u8d58\u8ff0\u3002"))))),(0,E.kt)("ol",{start:2},(0,E.kt)("li",{parentName:"ol"},(0,E.kt)("p",{parentName:"li"},(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/pull/565"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Pull Request #565")),(0,E.kt)("p",{parentName:"li"},"\u4f34\u968f\u7740",(0,E.kt)("inlineCode",{parentName:"p"},"apiVersion"),"\u5b57\u6bb5\u5f15\u5165API\u7c7b\u578b\uff0cAPI\u5bf9\u8c61\u7684",(0,E.kt)("em",{parentName:"p"},"\u5185\u90e8\u7248\u672c"),'\u7684\u6982\u5ff5\u5f00\u59cb\u51fa\u73b0\u3002\u76f8\u5e94\u5730\uff0c"\u7248\u672c\u8f6c\u5316"\u673a\u5236\u4e5f\u5f00\u59cb\u6b63\u5f0f\u8fdb\u5165\u7f16/\u89e3\u7801\u6d41\u7a0b\u3002')),(0,E.kt)("li",{parentName:"ol"},(0,E.kt)("p",{parentName:"li"},(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/pull/672"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Pull Request #672")),(0,E.kt)("p",{parentName:"li"},'\u5728\u8fd9\u4e2aPR\u4e2d\uff0c\u4f5c\u8005\u5f15\u5165"\u7248\u672c\u8f6c\u5316\u51fd\u6570\u6ce8\u518c"\u673a\u5236\uff0c\u7528\u4e8e\u4f18\u5316\u7248\u672c\u8f6c\u5316\u6d41\u7a0b\uff1b'))),(0,E.kt)("p",null,'\u5728"\u8fd1\u4ee3"\u9636\u6bb5\uff0c\u6240\u6709\u7f16/\u89e3\u7801\u4ee3\u7801\u88ab\u653e\u7f6e\u5728',(0,E.kt)("inlineCode",{parentName:"p"},"pkg/api/helper.go"),"\u4e2d\u2014\u2014\u8fd9\u8bf4\u660e\u7f16/\u89e3\u7801\u5728\u5f53\u65f6\u5e76\u672a\u5f15\u8d77\u793e\u533a\u8db3\u591f\u7684\u91cd\u89c6\u3002"),(0,E.kt)("h3",{id:"\u73b0\u4ee3\u9636\u6bb5scheme\u5927\u4e00\u7edf\u65f6\u671f"},"\u73b0\u4ee3\u9636\u6bb5\uff08Scheme\u5927\u4e00\u7edf\u65f6\u671f\uff09"),(0,E.kt)("p",null,'"\u73b0\u4ee3"\u9636\u6bb5\u662f\u6307\u4ece',(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/pull/723"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Pull Request #723"),"\u5f00\u59cb\u7684\u65f6\u671f\u3002\n\u5728\u8be5PR\u4e2d\uff0c\u4f5c\u8005\u5176\u5b9e\u6ca1\u6709\u5f15\u5165\u65b0\u7684\u673a\u5236\u6216\u662f\u6539\u52a8\u539f\u6765\u7684\u7f16/\u89e3\u7801\u903b\u8f91\uff0c\u4f5c\u8005\u53ea\u662f\u628a\u539f\u6765",(0,E.kt)("inlineCode",{parentName:"p"},"pkg/api/helper.go"),"\u4e2d\u5206\u6563\u7684\u7f16/\u89e3\u7801\u903b\u8f91\u548c\u673a\u5236\u6574\u4f53\u8fc1\u79fb\u5e76\u5c01\u88c5\u5230\u4e86\u4e00\u4e2a\u53eb\u505a",(0,E.kt)("inlineCode",{parentName:"p"},"Scheme"),"\u7684\u7c7b\u578b\u4e2d\u3002\u540c\u65f6\u5220\u9664\u4e86\u539f\u5148\u7684",(0,E.kt)("inlineCode",{parentName:"p"},"pkg/api/helper.go"),"\u6587\u4ef6\u3002\n\u6211\u4eec\u628a",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/pull/723"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Pull Request #723"),"\u5355\u72ec\u63d0\u5347\u5230\u4e00\u4e2a\u9636\u6bb5\u7684\u539f\u56e0\u662f\uff1a\u7ecf\u8fc7\u6574\u7406\u540e\u7684\u7f16/\u89e3\u7801\u4ee3\u7801\u903b\u8f91\u5f02\u5e38\u6e05\u6670\uff0c\u4e00\u4e2a",(0,E.kt)("inlineCode",{parentName:"p"},"Scheme"),'\u7c7b\u578b\u56ca\u62ec\u4e86"\u8fd1\u4ee3"\u9636\u6bb5\u6240\u65ad\u65ad\u7eed\u7eed\u5f15\u5165\u7684\u5404\u4e2a\u673a\u5236\u3002'),(0,E.kt)("pre",null,(0,E.kt)("code",{parentName:"pre",className:"language-go"},'// Scheme defines an entire encoding and decoding scheme.\ntype Scheme struct {\n    // versionMap allows one to figure out the go type of an object with\n    // the given version and name.\n    versionMap map[string]map[string]reflect.Type\n\n    // converter stores all registered conversion functions. It also has\n    // default coverting behavior.\n    converter *Converter\n\n    // MetaInsertionFactory is used to create an object to store and retrieve\n    // the version and kind information for all objects. The default uses the\n    // keys "version" and "kind" respectively.\n    MetaInsertionFactory MetaInsertionFactory\n}\n')),(0,E.kt)("p",null,"\u5176\u4e2d\uff1a"),(0,E.kt)("ul",null,(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("inlineCode",{parentName:"li"},"MetaInsertionFactory"),'\u6210\u5458\u7528\u4e8e"\u667a\u80fd\u63a8\u65ad"\u673a\u5236\uff1b'),(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("inlineCode",{parentName:"li"},"versionMap"),'\u6210\u5458\u7528\u4e8e"API\u7c7b\u578b\u6ce8\u518c"\u673a\u5236\uff1b'),(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("inlineCode",{parentName:"li"},"converter"),'\u6210\u5458\u7528\u4e8e"\u7248\u672c\u8f6c\u5316"\u3002')),(0,E.kt)("p",null,"\u4ee5\u7ecf\u8fc7\u6574\u7406\u540e\u7684\u89e3\u7801\u51fd\u6570\u4e3a\u4f8b\uff1a"),(0,E.kt)("pre",null,(0,E.kt)("code",{parentName:"pre",className:"language-go",metastring:'title="pkg/api/conversion/decode.go"',title:'"pkg/api/conversion/decode.go"'},'// Decode converts a YAML or JSON string back into a pointer to an api object.\n// Deduces the type based upon the fields added by the MetaInsertionFactory\n// technique. The object will be converted, if necessary, into the\n// s.InternalVersion type before being returned. Decode will refuse to decode\n// objects without a version, because that\'s probably an error.\nfunc (s *Scheme) Decode(data []byte) (interface{}, error) {\n    version, kind, err := s.DataVersionAndKind(data)\n    if err != nil {\n        return nil, err\n    }\n    if version == "" {\n        return nil, fmt.Errorf("version not set in \'%s\'", string(data))\n    }\n    obj, err := s.NewObject(version, kind)\n    if err != nil {\n        return nil, err\n    }\n    // yaml is a superset of json, so we use it to decode here. That way,\n    // we understand both.\n    err = yaml.Unmarshal(data, obj)\n    if err != nil {\n        return nil, err\n    }\n\n    // Version and Kind should be blank in memory.\n    err = s.SetVersionAndKind("", "", obj)\n    if err != nil {\n        return nil, err\n    }\n\n    // Convert if needed.\n    if s.InternalVersion != version {\n        objOut, err := s.NewObject(s.InternalVersion, kind)\n        if err != nil {\n            return nil, err\n        }\n        err = s.converter.Convert(obj, objOut, 0)\n        if err != nil {\n            return nil, err\n        }\n        obj = objOut\n    }\n    return obj, nil\n}\n')),(0,E.kt)("p",null,"\u89e3\u7801\u8fc7\u7a0b\u53ef\u4ee5\u6e05\u6670\u5730\u5212\u5206\u4e3a5\u4e2a\u6b65\u9aa4\uff1a"),(0,E.kt)("ol",null,(0,E.kt)("li",{parentName:"ol"},(0,E.kt)("p",{parentName:"li"},"\u667a\u80fd\u63a8\u65ad"),(0,E.kt)("p",{parentName:"li"},"\u8c03\u7528",(0,E.kt)("inlineCode",{parentName:"p"},"DataVersionAndKind()"),"\u51fd\u6570\u63a8\u65ad\u5b57\u8282\u5e8f\u5217\u7684",(0,E.kt)("inlineCode",{parentName:"p"},"kind"),"\u548c",(0,E.kt)("inlineCode",{parentName:"p"},"apiVersion"),"\uff08\u5f7c\u65f6\uff0cAPI\u5206\u7ec4\u7684\u6982\u5ff5\u8fd8\u6ca1\u6709\u51fa\u73b0\uff09\u3002")),(0,E.kt)("li",{parentName:"ol"},(0,E.kt)("p",{parentName:"li"},"\u521b\u5efaAPI\u5bf9\u8c61\u8f7d\u4f53"),(0,E.kt)("p",{parentName:"li"},"\u83b7\u53d6API\u5bf9\u8c61\u7684\u7c7b\u578b\u548c\u7248\u672c\u4fe1\u606f\u540e\uff0c\u8c03\u7528",(0,E.kt)("inlineCode",{parentName:"p"},"NewObject()"),'\u521b\u5efa\u4e00\u4e2a\u5bf9\u5e94\u7c7b\u578b\u548c\u7248\u672c\u7684API\u5bf9\u8c61\u7684"\u7a7a\u8f7d\u4f53"\u3002')),(0,E.kt)("li",{parentName:"ol"},(0,E.kt)("p",{parentName:"li"},"\u53cd\u5e8f\u5217\u5316"),(0,E.kt)("p",{parentName:"li"},"\u8c03\u7528",(0,E.kt)("inlineCode",{parentName:"p"},"Unmarshal()"),"\u5c06\u5b57\u8282\u5e8f\u5217\u5e8f\u5217\u5316\u5230\u4e0a\u4e00\u6b65\u521b\u5efa\u7684API\u5bf9\u8c61\u8f7d\u4f53\u4e2d\uff1b")),(0,E.kt)("li",{parentName:"ol"},(0,E.kt)("p",{parentName:"li"},"\u7248\u672c\u8f6c\u5316"),(0,E.kt)("ul",{parentName:"li"},(0,E.kt)("li",{parentName:"ul"},"\u8c03\u7528",(0,E.kt)("inlineCode",{parentName:"li"},"SetVersionAndKind()"),"\u51fd\u6570\u5c06API\u5bf9\u8c61\u7684",(0,E.kt)("inlineCode",{parentName:"li"},"apiVersion"),"\u548c",(0,E.kt)("inlineCode",{parentName:"li"},"kind"),"\u5b57\u6bb5\u81f3\u7a7a;"),(0,E.kt)("li",{parentName:"ul"},"\u8c03\u7528",(0,E.kt)("inlineCode",{parentName:"li"},"NewObject()"),'\u521b\u5efaAPI\u5bf9\u8c61\u7684\u5185\u90e8\u7248\u672c\u7684"\u7a7a\u8f7d\u4f53";'),(0,E.kt)("li",{parentName:"ul"},"\u8c03\u7528",(0,E.kt)("inlineCode",{parentName:"li"},"Convert()"),"\u5c06API\u5bf9\u8c61\u8f6c\u5316\u4e3a\u5176\u5185\u90e8\u7248\u672c\u3002"))),(0,E.kt)("li",{parentName:"ol"},(0,E.kt)("p",{parentName:"li"},"\u8fd4\u56de\u5185\u90e8\u7248\u672c"))),(0,E.kt)("p",null,"\u5176\u4e2d\u6709\u4e00\u4e9b\u7ec6\u8282\u9700\u8981\u5355\u72ec\u8bf4\u660e\uff1a"),(0,E.kt)("ul",null,(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("p",{parentName:"li"},(0,E.kt)("inlineCode",{parentName:"p"},"Scheme"),"\u7684",(0,E.kt)("inlineCode",{parentName:"p"},"NewObject()"),'\u65b9\u6cd5\u7528\u4e8e\u521b\u5efa\u7ed9\u5b9a\u7c7b\u578b\u548c\u7248\u672c\u7684API\u5bf9\u8c61\u7684\u7a7a"\u8f7d\u4f53"\u3002'),(0,E.kt)("pre",{parentName:"li"},(0,E.kt)("code",{parentName:"pre",className:"language-go"},"// NewObject returns a new object of the given version and name,\n// or an error if it hasn't been registered.\nfunc (s *Scheme) NewObject(versionName, typeName string) (interface{}, error) {\n    if types, ok := s.versionMap[versionName]; ok {\n        if t, ok := types[typeName]; ok {\n            return reflect.New(t).Interface(), nil\n        }\n        return nil, fmt.Errorf(\"No type '%v' for version '%v'\", typeName, versionName)\n    }\n    return nil, fmt.Errorf(\"No version '%v'\", versionName)\n}\n")),(0,E.kt)("p",{parentName:"li"}," \u5177\u4f53\u5b9e\u73b0\u4e0a\u5b83\u9700\u8981\u67e5\u8be2",(0,E.kt)("inlineCode",{parentName:"p"},"versionMap"),"\u8fd9\u5f20\u8868\uff0c\u53ea\u6709\u5728\u8fd9\u5f20\u8868\u4e2d\u6ce8\u518c\u8fc7\u7684API\u7c7b\u578b\u624d\u80fd\u88ab\u521b\u5efa\u3002")),(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("p",{parentName:"li"},(0,E.kt)("inlineCode",{parentName:"p"},"Scheme"),"\u7684",(0,E.kt)("inlineCode",{parentName:"p"},"DataVersionAndKind()"),'\u65b9\u6cd5\u7528\u4e8e"\u667a\u80fd\u63a8\u65ad"\u3002'),(0,E.kt)("pre",{parentName:"li"},(0,E.kt)("code",{parentName:"pre",className:"language-go"},'// DataAPIVersionAndKind will return the APIVersion and Kind of the given wire-format\n// enconding of an API Object, or an error.\nfunc (s *Scheme) DataVersionAndKind(data []byte) (version, kind string, err error) {\n    findKind := s.MetaInsertionFactory.Create("", "")\n    // yaml is a superset of json, so we use it to decode here. That way,\n    // we understand both.\n    err = yaml.Unmarshal(data, findKind)\n    if err != nil {\n        return "", "", fmt.Errorf("couldn\'t get version/kind: %v", err)\n    }\n    version, kind = s.MetaInsertionFactory.Interpret(findKind)\n    return version, kind, nil\n}\n\n')),(0,E.kt)("p",{parentName:"li"},"\u5728\u5b9e\u73b0\u4e0a\u5b83\u4f9d\u8d56\u4e8e",(0,E.kt)("inlineCode",{parentName:"p"},"MetaInsertionFactory"),'\u6210\u5458\u3002\u5177\u4f53\u7684\u667a\u80fd\u63a8\u7406\u8fc7\u7a0b\u539f\u7406\u57fa\u672c\u4e0e"\u8fd1\u4ee3"\u9636\u6bb5\u4e00\u81f4\uff0c\u6211\u4eec\u4e0d\u518d\u8d58\u8ff0\u3002'))),(0,E.kt)("p",null,"\u4e0b\u56fe\u603b\u7ed3\u4e86\u6b64\u65f6\u671f\u7684\u89e3\u7801\u8fc7\u7a0b\uff08\u4e0d\u5305\u62ec\u7248\u672c\u8f6c\u5316\uff09\uff1a"),(0,E.kt)(A,{style:{width:"95%"},mdxType:"SerializerBasicSVG"}),(0,E.kt)("h3",{id:"\u5f53\u4ee3\u9636\u6bb5"},"\u5f53\u4ee3\u9636\u6bb5"),(0,E.kt)("p",null,"Kubernetes\u5982\u4eca\u4f7f\u7528\u7684\u7f16/\u89e3\u7801\u4f53\u7cfb\u6765\u81ea\u4e8e\u4e00\u6b21\u91cd\u5927\u91cd\u6784:\u76f8\u5173\u63d0\u6848",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/issues/7111"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Issues #7111"),"\u53ca\u5b9e\u73b0",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/pull/17922"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Pull Request #17922"),"\u3002"),(0,E.kt)("admonition",{type:"tip"},(0,E.kt)("p",{parentName:"admonition"},"\u5f53\u65f6Kubernetes\u7248\u672c\u5df2\u7ecf\u6765\u8fbe\u4e86",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/tree/v1.2.0-alpha.7"},"v1.2.0-alpha.7"),"\uff0cKubernetes API\u7c7b\u578b\u7cfb\u7edf\uff08",(0,E.kt)("em",{parentName:"p"},"\u8d44\u6e90"),"\uff0c",(0,E.kt)("em",{parentName:"p"},"API\u5206\u7ec4"),"\uff0c",(0,E.kt)("em",{parentName:"p"},"kind"),"\uff0c",(0,E.kt)("inlineCode",{parentName:"p"},"runtime.Object"),"\u63a5\u53e3\uff0c",(0,E.kt)("em",{parentName:"p"},"GVK"),"\u7b49\uff09\u5df2\u7ecf\u57fa\u672c\u8d8b\u5411\u6210\u719f\u3002\n\u800c\u6b64\u524d\u6211\u4eec\u6240\u4ecb\u7ecd\u7684\u4e09\u4e2a\u9636\u6bb5\u751a\u81f3\u90fd\u5728Kubernetes\u4ed3\u5e93\u6253\u7684\u7b2c\u4e00\u4e2atag",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/tree/v0.2"},"v0.2"),"\u4e4b\u524d\u3002")),(0,E.kt)("p",null,"\u7531\u4e8e",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/pull/17922"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Pull Request #17922"),"\u5960\u5b9a\u4e86\u5982\u4eca\u7684Kubernetes\u7f16/\u89e3\u7801\u4f53\u7cfb\uff0c\u5e76\u4e14\u5728\u5185\u5bb9\u4e0a\u8fdb\u884c\u4e86\u5927\u91cf\u7684\u91cd\u6784\u3002\u6211\u4eec\u5c06\u628a\u5b83\u653e\u5728\u5355\u72ec\u7684\u5c0f\u8282\u4ecb\u7ecd\u3002"),(0,E.kt)("h2",{id:"codec\u4f53\u7cfb"},"Codec\u4f53\u7cfb"),(0,E.kt)("p",null,"\u5728\u63d0\u6848",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/issues/7111"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Issue #7111"),"\u4e2d\uff0c\u4f5c\u8005\u51b3\u5b9a\u5c06",(0,E.kt)("inlineCode",{parentName:"p"},"Scheme"),"\u89e3\u8026:"),(0,E.kt)("details",null,(0,E.kt)("summary",null,"\u63d0\u6848\u4e2d\u4f5c\u8005\u51b3\u5b9a\u89e3\u8026Scheme\u7684\u52a8\u673a"),(0,E.kt)("blockquote",null,(0,E.kt)("p",{parentName:"blockquote"},"A runtime.Scheme combines a few concepts:"),(0,E.kt)("ul",{parentName:"blockquote"},(0,E.kt)("li",{parentName:"ul"},"A registry of APIVersion -> Kind string -> Go object"),(0,E.kt)("li",{parentName:"ul"},"A library of conversion routines which includes APIVersion -> Go object as well as Go object -> Go object"),(0,E.kt)("li",{parentName:"ul"},"An encoding mechanism based around JSON")),(0,E.kt)("p",{parentName:"blockquote"},"In order to better support multiple API patterns grouped together (Kubernetes user API, Kubelet API, OpenShift API, future extension API) these assumptions will start to break down."))),(0,E.kt)("p",null,"\u540c\u65f6\u4f5c\u8005\u4e5f\u7ed9\u51fa\u4e86\u91cd\u6784\u7684\u5927\u81f4\u65b9\u5411\u4e0e\u8981\u89e3\u51b3\u7684\u95ee\u9898\uff1a"),(0,E.kt)("details",null,(0,E.kt)("summary",null,"\u63d0\u6848\u4e2d\u4f5c\u8005\u5217\u4e3e\u91cd\u6784\u9700\u8981\u89e3\u51b3\u7684\u95ee\u9898"),(0,E.kt)("blockquote",null,(0,E.kt)("p",{parentName:"blockquote"},"Types of problems we want to solve:"),(0,E.kt)("ol",{parentName:"blockquote"},(0,E.kt)("li",{parentName:"ol"},'It should be possible to take arbitrary serialized data and convert it to a versioned Go struct - call this "marshalling/unmarshalling". The interface for this is a ',(0,E.kt)("inlineCode",{parentName:"li"},"Codec"),". There may be many codecs.",(0,E.kt)("ol",{parentName:"li"},(0,E.kt)("li",{parentName:"ol"},'Where possible, we want to reuse the underlying infrastructure for marshaling and unmarshalling that exists in go - "encoding/json" / "encoding/gob" / "protobufs" efficiently.'),(0,E.kt)("li",{parentName:"ol"},'It\'s likely that there exists one canonical "marshaller" for most objects, but there may be alternate mechanisms. For example, JSON is canonical for Kube, but we may occasionally want to marshal an annotated YAML object that has description comments for each field interleaved.'),(0,E.kt)("li",{parentName:"ol"},"There are places where we want to convert ",(0,E.kt)("inlineCode",{parentName:"li"},"map[string]interface{}")," (generic JSON object representation) or a ",(0,E.kt)("inlineCode",{parentName:"li"},"map[string][]string")," (url.Values) into a versioned Go struct, which is dependent on a type of marshaling (i.e. following JSON rules, or Query parameter rules)."))),(0,E.kt)("li",{parentName:"ol"},'It should be possible to convert a versioned Go struct into a different versioned Go struct (typically by going to an intermediate format) on the server. This is "object versioning".',(0,E.kt)("ol",{parentName:"li"},(0,E.kt)("li",{parentName:"ol"},'"Object versioning" requires the registration of an object Kind into an APIVersion for a specific API group. This was the original intent of runtime.Scheme.'))),(0,E.kt)("li",{parentName:"ol"},'It should be possible to convert arbitrary Go structs to different Go structs. This is "conversion".',(0,E.kt)("ol",{parentName:"li"},(0,E.kt)("li",{parentName:"ol"},"Object versioning is a specific subset of conversion"),(0,E.kt)("li",{parentName:"ol"},"We should try to make conversion less dependent on scheme?")))))),(0,E.kt)("p",null,"\u603b\u7ed3\u6765\u8bf4\uff0c\u4f5c\u8005\u51b3\u5b9a\u5c06\u7f16/\u89e3\u7801\u903b\u8f91\u6574\u4f53\u4ece",(0,E.kt)("inlineCode",{parentName:"p"},"Scheme"),"\u4e2d\u5265\u79bb\uff0c\u5e76\u4fdd\u7559",(0,E.kt)("inlineCode",{parentName:"p"},"Scheme"),'\u7c7b\u578b\u7684"API\u7c7b\u578b\u6ce8\u518c"\u673a\u5236\uff0c\u540c\u65f6\u542f\u7528',(0,E.kt)("inlineCode",{parentName:"p"},"Codec"),'\u6982\u5ff5\u4e13\u95e8\u7528\u4e8e\u8d1f\u8d23\u7f16/\u89e3\u7801\u3002\n\u56e0\u6b64\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u628aKubernetes"\u5f53\u4ee3"\u7f16/\u89e3\u7801\u4f53\u7cfb\u79f0\u4e3a"Codec\u4f53\u7cfb"\u3002'),(0,E.kt)("h3",{id:"\u63a5\u53e3"},"\u63a5\u53e3"),(0,E.kt)("p",null,"\u5728\u4e0a\u8ff0\u63d0\u6848\u7684\u5b9e\u73b0",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/pull/17922"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Pull Request #17922"),"\u4e2d\uff0c\u4f5c\u8005\u9996\u5148\u62bd\u8c61\u4e86\u4e00\u7cfb\u5217\u63a5\u53e3\uff1a",(0,E.kt)("inlineCode",{parentName:"p"},"Encoder"),"\uff0c",(0,E.kt)("inlineCode",{parentName:"p"},"Decoder"),"\uff0c",(0,E.kt)("inlineCode",{parentName:"p"},"Codec"),"\uff0c ",(0,E.kt)("inlineCode",{parentName:"p"},"NegotiatedSerializer"),"\uff1a"),(0,E.kt)("ul",null,(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("p",{parentName:"li"},(0,E.kt)("inlineCode",{parentName:"p"},"Encoder"),"\u2014\u2014",(0,E.kt)("em",{parentName:"p"},"\u7f16\u7801\u5668"),"\u63a5\u53e3\uff1a"),(0,E.kt)("p",{parentName:"li"}," \u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u4e0d\u5173\u6ce8\u7f16\u7801\u8fc7\u7a0b\u3002")),(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("p",{parentName:"li"},(0,E.kt)("inlineCode",{parentName:"p"},"Decoder"),"\u2014\u2014",(0,E.kt)("em",{parentName:"p"},"\u89e3\u7801\u5668"),"\u63a5\u53e3\uff1a"),(0,E.kt)("pre",{parentName:"li"},(0,E.kt)("code",{parentName:"pre",className:"language-go"},"type Decoder interface {\n    // Decode attempts to deserialize the provided data using either the innate typing of the scheme or the\n    // default kind, group, and version provided. It returns a decoded object as well as the kind, group, and\n    // version from the serialized data, or an error. If into is non-nil, it will be used as the target type\n    // and implementations may choose to use it rather than reallocating an object. However, the object is not\n    // guaranteed to be populated. The returned object is not guaranteed to match into. If defaults are\n    // provided, they are applied to the data by default. If no defaults or partial defaults are provided, the\n    // type of the into may be used to guide conversion decisions.\n    Decode(data []byte, defaults *unversioned.GroupVersionKind, into Object) (Object, *unversioned.GroupVersionKind, error)\n}\n")),(0,E.kt)("p",{parentName:"li"},(0,E.kt)("inlineCode",{parentName:"p"},"Decoder"),'\u63a5\u53e3\u6240\u63cf\u8ff0\u7684\u89e3\u7801\u51fd\u6570\u7b7e\u540d\u4e0e"\u8fd1\u4ee3"\u548c"\u73b0\u4ee3"\u9636\u6bb5\u7684\u89e3\u7801\u51fd\u6570\u7b7e\u540d\u4ea7\u751f\u4e86\u8f83\u5927\u7684\u533a\u522b\u3002\n"\u8fd1\u4ee3"\u548c"\u73b0\u4ee3"\u9636\u6bb5\u6240\u7528\u7684\u89e3\u7801\u51fd\u6570\u7b7e\u540d\u5176\u5b9e\u901a\u4fd7\u5e38\u89c1\uff1a',(0,E.kt)("inlineCode",{parentName:"p"},"func Decode(data []byte) (interface{}, error)"),"\u3002\n\u9664\u4e86\u539f\u59cb\u5b57\u8282\u5e8f\u5217\u6570\u636e",(0,E.kt)("inlineCode",{parentName:"p"},"data"),"\u8fd9\u4e2a\u53c2\u6570\u4ee5\u5916\uff0c\u8fd8\u9700\u8981\u63d0\u4f9b",(0,E.kt)("inlineCode",{parentName:"p"},"defaults"),"\u4ee5\u53ca",(0,E.kt)("inlineCode",{parentName:"p"},"into"),"\u4e24\u4e2a\u53c2\u6570\u3002\u8fd9\u6837\u8bbe\u8ba1\u89e3\u7801\u65b9\u6cd5\u7684\u52a8\u673a\u662f\u5e26\u6765\u4e86\u66f4\u591a\u7684\u7075\u6d3b\u6027\u3002\nPR\u4f5c\u8005\u5e0c\u671b\u89e3\u7801\u5668\uff1a"),(0,E.kt)("ol",{parentName:"li"},(0,E.kt)("li",{parentName:"ol"},"\u5982\u679c\u8c03\u7528\u8005\u5df2\u7ecf\u9884\u5148\u63d0\u4f9b\u4e86\u89e3\u7801\u540e\u7684",(0,E.kt)("em",{parentName:"li"},"kind"),'"\u7a7a\u8f7d\u4f53"\uff08',(0,E.kt)("inlineCode",{parentName:"li"},"into"),"\uff09\uff0c\u89e3\u7801\u5668\u5e94\u8be5\u5c3d\u91cf\u4f7f\u7528\u8c03\u7528\u8005\u63d0\u4f9b\u7684\u8f7d\u4f53\u800c\u907f\u514d\u5728\u5185\u5b58\u4e2d\u518d\u5206\u914d\u4e00\u4e2a\u65b0\u5bf9\u8c61\uff1b"),(0,E.kt)("li",{parentName:"ol"},"\u901a\u8fc7\u539f\u59cb\u5b57\u8282\u5e8f\u5217\uff08",(0,E.kt)("inlineCode",{parentName:"li"},"data"),"\uff09\u5305\u542b\u7684GVK\u4fe1\u606f\u3001\u8c03\u7528\u8005\u9ed8\u8ba4\u63d0\u4f9b\u7684GVK\u4fe1\u606f\uff08",(0,E.kt)("inlineCode",{parentName:"li"},"defaults"),'\uff09\u3001\u8c03\u7528\u8005\u63d0\u4f9b\u7684"\u7a7a\u8f7d\u4f53"\uff08',(0,E.kt)("inlineCode",{parentName:"li"},"into"),"\uff09\u4e2d\u5305\u542b\u7684GVK\u4fe1\u606f\u5171\u540c\u63a8\u65ad\u51fa\u4e00\u4e2a\u53ef\u80fd\u7684GVK\u3002")),(0,E.kt)("admonition",{parentName:"li",title:"\u6ce8",type:"tip"},(0,E.kt)("p",{parentName:"admonition"},"\u8fd9\u6837\u8bbe\u8ba1\u7684\u4e00\u4e2a\u597d\u5904\u662f\u5bf9\u4e8e\u539f\u59cb\u5b57\u8282\u6570\u636e\u4e22\u5931\u6216GVK\u4fe1\u606f\u6b8b\u7f3a\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528\u8005\u63d0\u4f9b\u7684GVK\u4fe1\u606f\uff08",(0,E.kt)("inlineCode",{parentName:"p"},"defaults"),"\uff09\u751a\u81f3\u662f",(0,E.kt)("inlineCode",{parentName:"p"},"into"),"\u7684GVK\u4fe1\u606f\u515c\u5e95\u3002\n\u5f53\u7136\uff0c\u8fd9\u79cd\u7075\u6d3b\u6027\u4e5f\u5e26\u6765\u4e86\u5b9e\u73b0\u4e0a\u7684\u4e0d\u65b9\u4fbf\u3002\u5c24\u5176\u662f\u539f\u59cb\u6570\u636e\u5305\u542b\u7684\u5b9e\u9645GVK\u4fe1\u606f\u548c\u8c03\u7528\u8005\u63d0\u4f9b\u7684GVK\u4fe1\u606f\u4ee5\u53ca",(0,E.kt)("inlineCode",{parentName:"p"},"into"),"\u7684GVK\u4e0d\u4e00\u81f4\u7684\u60c5\u51b5\u3002\n\u56e0\u6b64\u5728\u89e3\u7801\u5668\u63a5\u53e3\u7684\u5b9e\u73b0\u4e2d\uff08\u4f8b\u5982\u6211\u4eec\u540e\u7eed\u4ecb\u7ecd\u7684","[JSON\u5e8f\u5217\u5316\u5668]","(# TODO: reference)\uff09\uff0c\u6709\u76f8\u5f53\u4e00\u90e8\u5206\u903b\u8f91\u5728\u5904\u7406\u8fd9\u79cd\u60c5\u5f62\u3002")))),(0,E.kt)("ul",null,(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("p",{parentName:"li"},(0,E.kt)("inlineCode",{parentName:"p"},"Codec"),"\u2014\u2014",(0,E.kt)("em",{parentName:"p"},"\u7f16\u89e3\u7f16\u7801\u5668"),"\u63a5\u53e3\uff1a"),(0,E.kt)("pre",{parentName:"li"},(0,E.kt)("code",{parentName:"pre",className:"language-go"},"// Codec defines methods for serializing and deserializing API objects.\ntype Codec interface {\n    Decoder\n    Encoder\n}\n")),(0,E.kt)("p",{parentName:"li"},(0,E.kt)("inlineCode",{parentName:"p"},"Codec"),"\u63a5\u53e3\u62bd\u8c61\u4e86\u5b9e\u73b0\u7c7b\u9700\u8981\u540c\u65f6\u5177\u5907\u7f16\u7801\u4ee5\u53ca\u89e3\u7801\u80fd\u529b\u3002")),(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("p",{parentName:"li"},(0,E.kt)("inlineCode",{parentName:"p"},"NegotiatedSerializer"),"\u2014\u2014",(0,E.kt)("em",{parentName:"p"},"\u534f\u5546\u5e8f\u5217\u5316\u5668"),"\u63a5\u53e3\uff1a"),(0,E.kt)("pre",{parentName:"li"},(0,E.kt)("code",{parentName:"pre",className:"language-go"},"// NegotiatedSerializer is an interface used for obtaining encoders, decoders, and serializers\n// for multiple supported media types.\ntype NegotiatedSerializer interface {\n    SupportedMediaTypes() []string\n    SerializerForMediaType(mediaType string, options map[string]string) (Serializer, bool)\n    EncoderForVersion(serializer Serializer, gv unversioned.GroupVersion) Encoder\n    DecoderToVersion(serializer Serializer, gv unversioned.GroupVersion) Decoder\n}\n")),(0,E.kt)("p",{parentName:"li"},"PR\u4f5c\u8005\u7528",(0,E.kt)("em",{parentName:"p"},"Negotiated(\u534f\u5546)"),"\u547d\u540d\u6b64\u63a5\u53e3\u7684\u52a8\u673a\u6b63\u5f0f\u6765\u81ea\u4e8e",(0,E.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Content_negotiation"},(0,E.kt)("em",{parentName:"a"},"HTTP\u5185\u5bb9\u534f\u5546\uff08HTTP Content negotiation\uff09")),"\u3002\n\u7b80\u5355\u6765\u8bf4\uff0c",(0,E.kt)("em",{parentName:"p"},"HTTP\u5185\u5bb9\u534f\u5546"),'\u662f\u6307\u670d\u52a1\u7aef\u4e0e\u5ba2\u6237\u7aef"\u534f\u5546"\u8fd4\u56de\u8d44\u6e90\u7684\u5177\u4f53\u8868\u793a\u5f62\u5f0f\u7684\u4e00\u79cd\u673a\u5236\u3002\n\u4f8b\u5982\uff0c\u6839\u636e\u6587\u6863',(0,E.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/reference/using-api/api-concepts"},"Kubernetes API Concepts ",(0,E.kt)(V.Z,{mdxType:"KubernetesSVG"})),"\uff0c",(0,E.kt)("inlineCode",{parentName:"p"},"kube-apiserver"),"\u9664\u4e86\u652f\u6301\u8fd4\u56de\u8d44\u6e90\u7684JSON\u7f16\u7801\u683c\u5f0f\u5916\uff0c\u4e5f\u652f\u6301\u8fd4\u56de\u8d44\u6e90\u7684protobuf\u7f16\u7801\u683c\u5f0f\uff1a"),(0,E.kt)("blockquote",{parentName:"li"},(0,E.kt)("p",{parentName:"blockquote"},(0,E.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/reference/using-api/api-concepts/#alternate-representations-of-resources"},"Alternate representations of resources")),(0,E.kt)("p",{parentName:"blockquote"},"List all of the pods on a cluster in Protobuf format."),(0,E.kt)("pre",{parentName:"blockquote"},(0,E.kt)("code",{parentName:"pre",className:"language-bash"},"GET /api/v1/pods\n# highlight-next-line\nAccept: application/vnd.kubernetes.protobuf\n---\n200 OK\n# highlight-next-line\nContent-Type: application/vnd.kubernetes.protobuf\n\n... binary encoded PodList object\n"))),(0,E.kt)("p",{parentName:"li"},"\u56e0\u6b64\uff0c",(0,E.kt)("em",{parentName:"p"},"\u534f\u5546\u5e8f\u5217\u5316\u5668"),"\u63a5\u53e3\u6240\u8981\u62bd\u8c61\u7684\u80fd\u529b\u662f\u652f\u6301\u540c\u65f6\u5bf9\u591a\u79cd\u6570\u636e\u683c\u5f0f\u7684\u7f16/\u89e3\u7801\u3002\u6b63\u5982\u4f5c\u8005\u5728\u63d0\u6848",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/issues/7111"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Issue #7111"),"\u4e2d\u63cf\u8ff0\u7684\u90a3\u6837\uff1a"),(0,E.kt)("blockquote",{parentName:"li"},(0,E.kt)("p",{parentName:"blockquote"},'It\'s likely that there exists one canonical "marshaller" for most objects, but there may be alternate mechanisms. For example, JSON is canonical for Kube, but we may occasionally want to marshal an annotated YAML object that has description comments for each field interleaved.')),(0,E.kt)("p",{parentName:"li"},"\u5177\u4f53\u6765\u8bf4\uff1a"),(0,E.kt)("ul",{parentName:"li"},(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("inlineCode",{parentName:"li"},"SupportedMediaTypes()"),"\u63cf\u8ff0\u4e86\u5b9e\u73b0\u7c7b\u9700\u8981\u8fd4\u56de\u6b64\u5e8f\u5217\u5316\u5668\u652f\u6301\u7684\u6240\u6709\u7f16\u7801\u683c\u5f0f\uff1b"),(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("inlineCode",{parentName:"li"},"SerializerForMediaType()"),"\u63cf\u8ff0\u4e86\u5b9e\u73b0\u7c7b\u53ef\u4ee5\u6839\u636e\u6307\u5b9a\u7684\u7f16\u7801\u683c\u5f0f\u8fd4\u56de\u5bf9\u5e94\u7684\u5e8f\u5217\u5316\u5668\uff1b")),(0,E.kt)("p",{parentName:"li"},(0,E.kt)("em",{parentName:"p"},"\u534f\u5546\u5e8f\u5217\u5316\u5668"),'\u9664\u4e86\u53ef\u4ee5"\u534f\u5546"\u7f16\u7801\u683c\u5f0f\u4ee5\u5916\uff0c',(0,E.kt)("strong",{parentName:"p"},'\u5b83\u7684\u53e6\u4e00\u4e2a\u7279\u70b9\u662f\u652f\u6301"\u534f\u5546"\u7248\u672c\u8f6c\u5316\u65f6\u7684\u76ee\u6807\u7248\u672c'),'\u3002\n\u6211\u4eec\u73b0\u5728\u5df2\u7ecf\u77e5\u9053\u7f16/\u89e3\u7801\u4f53\u7cfb\u7684"\u73b0\u4ee3"\u9636\u6bb5\uff0c\u7f16/\u89e3\u7801\u65f6\u9ed8\u8ba4\u8f6c\u5316\u4e3a\u5176\u5185\u90e8\u7248\u672c\u3002\u800c\u5728\u8fd9\u6b21\u91cd\u6784\u4e2d\uff0c\u4f5c\u8005\u51b3\u5b9a\u652f\u6301\u4efb\u610f\u4e0d\u540c\u7248\u672c\u4e4b\u95f4\u7684\u8f6c\u5316\uff0c\u6b63\u5982\u4f5c\u8005\u5728\u63d0\u6848',(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/issues/7111"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Issue #7111"),"\u4e2d\u63cf\u8ff0\u7684\u90a3\u6837\uff1a"),(0,E.kt)("blockquote",{parentName:"li"},(0,E.kt)("p",{parentName:"blockquote"},'It should be possible to convert a versioned Go struct into a different versioned Go struct (typically by going to an intermediate format) on the server.\nThis is "object versioning".')),(0,E.kt)("p",{parentName:"li"},"\u5177\u4f53\u6765\u8bf4:"),(0,E.kt)("ul",{parentName:"li"},(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("inlineCode",{parentName:"li"},"EncoderForVersion()/DecoderToVersion()"),"\u8868\u793a\u5b9e\u73b0\u7c7b\u53ef\u4ee5\u6839\u636e\u6307\u5b9a\u7684\u76ee\u6807\u7248\u672c\u8fd4\u56de\u4e00\u4e2a\u4e13\u95e8\u8f6c\u5316\u4e3a\u8be5\u76ee\u6807\u7248\u672c\u7684\u7f16\u89e3\u7801\u5668\uff1b")))),(0,E.kt)("p",null,"  \u53e6\u5916\uff0c\u76f8\u6bd4\u4e8e\u4e4b\u524d\u7684\u51e0\u4e2a\u63a5\u53e3\u504f\u5411\u5e95\u5c42\uff0c",(0,E.kt)("em",{parentName:"p"},"\u534f\u5546\u5e8f\u5217\u5316\u5668"),"\u63a5\u53e3\u5df2\u7ecf\u662f",(0,E.kt)("strong",{parentName:"p"},"\u5e94\u7528\u5c42"),"\u7ea7\u522b\u7684\u5c01\u88c5\u3002\n",(0,E.kt)("inlineCode",{parentName:"p"},"client-go"),"\u4f5c\u4e3a\u5ba2\u6237\u7aef\u5e93\uff0c\u5b83\u6240\u4f7f\u7528\u7684\u7f16\u89e3\u7801\u5668\u6b63\u662f\u534f\u5546\u5e8f\u5217\u5316\u5668\u3002",(0,E.kt)("a",{parentName:"p",href:"../intro#%E7%BA%A6%E5%AE%9A"},"\ud83c\udf88")),(0,E.kt)("h3",{id:"\u5b9e\u73b0"},"\u5b9e\u73b0"),(0,E.kt)("p",null,"\u4ecb\u7ecd\u5b8c\u63a5\u53e3\u4e4b\u540e\uff0c\u6211\u4eec\u63a5\u4e0b\u6765\u770b\u4f5c\u8005\u662f\u5982\u4f55\u5b9e\u73b0\u8fd9\u4e9b\u63a5\u53e3\u7684\u3002"),(0,E.kt)("h4",{id:"json\u5e8f\u5217\u5316\u5668"},"JSON\u5e8f\u5217\u5316\u5668"),(0,E.kt)("p",null,"\u4f5c\u8005\u5728",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/pull/17922"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Pull Request #17922"),"\u4e2d\u540c\u65f6\u63d0\u4f9b\u4e86JSON\u548cYAML\u4e24\u79cd\u5e8f\u5217\u5316\u5668\u7684\u5b9e\u73b0\u3002"),(0,E.kt)("p",null,"\u6211\u4eec\u4ee5JSON\u7f16\u89e3\u7801\u5668\u4e3a\u4f8b\uff0c\u5b83\u5b9e\u73b0\u7684\u63a5\u53e3\u662f",(0,E.kt)("inlineCode",{parentName:"p"},"Codec"),"\u3002"),(0,E.kt)("pre",null,(0,E.kt)("code",{parentName:"pre",className:"language-go"},"\ntype Serializer struct {\n    meta    MetaFactory\n    creater runtime.ObjectCreater\n    typer   runtime.Typer\n    yaml    bool\n    pretty  bool\n}\n")),(0,E.kt)("p",null,"\u5176\u4e2d\uff0c"),(0,E.kt)("ul",null,(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("inlineCode",{parentName:"li"},"meta"),'\u6210\u5458\u7528\u4e8e"\u667a\u80fd\u63a8\u65ad"\uff0c\u5b83\u6f14\u5316\u4e8e"\u73b0\u4ee3"\u65f6\u671f\u7684',(0,E.kt)("inlineCode",{parentName:"li"},"MetaInsertionFactory"),"\u3002"),(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("inlineCode",{parentName:"li"},"creater"),"\u6210\u5458\u7528\u4e8e\u6839\u636e\u7ed9\u5b9a\u7684GVK\u4e09\u5143\u7ec4\u521b\u5efa\u5bf9\u5e94",(0,E.kt)("em",{parentName:"li"},"kind"),"\uff08\u7a7a\uff09\u5b9e\u4f8b\u3002"),(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("inlineCode",{parentName:"li"},"typer"),"\u6210\u5458\u7528\u4e8e\u5224\u5b9a\u4e00\u4e2a\u7ed9\u5b9a\u7684API\u5bf9\u8c61\u662f\u5426\u6ce8\u518c\u8fc7\u3002")),(0,E.kt)("admonition",{title:"\u6ce8",type:"tip"},(0,E.kt)("p",{parentName:"admonition"},"\u5c3d\u7ba1\u5728\u63d0\u6848",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/issues/7111"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Issue #7111"),"\u4e2d\uff0c\u4f5c\u8005\u867d\u7136\u51b3\u5b9a\u628a\u7f16/\u89e3\u7801\u903b\u8f91\u4ece",(0,E.kt)("inlineCode",{parentName:"p"},"Scheme"),"\u7c7b\u578b\u4e2d\u5265\u79bb\uff0c\u4f46\u662f\u4f5c\u8005\u4ecd\u7136\u6709\u610f\u4fdd\u7559\u4e86",(0,E.kt)("inlineCode",{parentName:"p"},"Scheme"),'"API\u5bf9\u8c61\u6ce8\u518c"\u673a\u5236\u3002\u6b63\u5982\u4f5c\u8005\u63d0\u5230\u7684\u90a3\u6837\uff1a'),(0,E.kt)("blockquote",{parentName:"admonition"},(0,E.kt)("p",{parentName:"blockquote"},'"Object versioning" requires the registration of an object Kind into an APIVersion for a specific API group.\nThis was the original intent of runtime.Scheme.')),(0,E.kt)("p",{parentName:"admonition"},"\u4ece",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/pull/17922"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Pull Request #17922"),"\u4e4b\u540e\uff0c",(0,E.kt)("inlineCode",{parentName:"p"},"Scheme"),"\u7c7b\u578b\u4ec5\u4ec5\u88ab\u7528\u4e8e\uff1a"),(0,E.kt)("ul",{parentName:"admonition"},(0,E.kt)("li",{parentName:"ul"},"\u6ce8\u518c\u6240\u6709\u7684",(0,E.kt)("em",{parentName:"li"},"kind"),"\uff08API\u5bf9\u8c61\uff09\uff1b"),(0,E.kt)("li",{parentName:"ul"},"\u5224\u5b9a\u7ed9\u5b9a\u7684",(0,E.kt)("em",{parentName:"li"},"kind"),"\uff08API\u5bf9\u8c61\uff09\u662f\u5426\u6ce8\u518c\uff1b"),(0,E.kt)("li",{parentName:"ul"},"\u6839\u636e\u7ed9\u5b9a\u7684GVK\u4e09\u5143\u7ec4\u521b\u5efa\u5bf9\u5e94",(0,E.kt)("em",{parentName:"li"},"kind"),'\uff08API\u5bf9\u8c61\uff09\u7684\u7a7a\u5b9e\u4f8b\uff08"\u8f7d\u4f53"\uff09\u3002')),(0,E.kt)("p",{parentName:"admonition"},"\u6240\u4ee5\u5728Kubernetes\u6e90\u7801\u4e2d\uff0cJSON\u5e8f\u5217\u5316\u5668\u5728\u521d\u59cb\u5316",(0,E.kt)("inlineCode",{parentName:"p"},"creater"),"\uff0c",(0,E.kt)("inlineCode",{parentName:"p"},"typer"),"\u6210\u5458\u65f6\u4f7f\u7528\u7684\u662f",(0,E.kt)("inlineCode",{parentName:"p"},"Scheme"),"\u5bf9\u8c61\u3002",(0,E.kt)("strong",{parentName:"p"},"\u6240\u4ee5JSON\u5e8f\u5217\u5316\u5668\u4ecd\u7136\u4f9d\u8d56",(0,E.kt)("inlineCode",{parentName:"strong"},"Scheme"),"\u7684\u6ce8\u518c\u673a\u5236\u5de5\u4f5c"),"\u3002")),(0,E.kt)("p",null,"\u6211\u4eec\u4ec5\u5173\u6ce8\u5b83\u7684\u89e3\u7801\u8fc7\u7a0b\uff1a"),(0,E.kt)("admonition",{title:"\u6ce8",type:"tip"},(0,E.kt)("p",{parentName:"admonition"},"\u4e3a\u4e86\u51cf\u8f7b\u8bfb\u8005\u7684\u8d1f\u62c5\u4e5f\u4fbf\u4e8e\u8bfb\u8005\u7406\u89e3\uff0c\u540c\u65f6\u4e5f\u4e3a\u4e86\u805a\u7126\u53cd\u5e8f\u5217\u5316\u903b\u8f91\u7684\u4e3b\u5e72\u6b65\u9aa4\uff0c\u4e0b\u9762\u7684\u4ee3\u7801\u7701\u7565\u4e86\u4e00\u4e9b\u7ec6\u679d\u672b\u8282\u3002")),(0,E.kt)("pre",null,(0,E.kt)("code",{parentName:"pre",className:"language-go"},"// Decode attempts to convert the provided data into YAML or JSON, extract the stored schema kind, apply the provided default gvk, and then\n// load that data into an object matching the desired schema kind or the provided into. If into is *runtime.Unknown, the raw data will be\n// extracted and no decoding will be performed. If into is not registered with the typer, then the object will be straight decoded using\n// normal JSON/YAML unmarshalling. If into is provided and the original data is not fully qualified with kind/version/group, the type of\n// the into will be used to alter the returned gvk. On success or most errors, the method will return the calculated schema kind.\nfunc (s *Serializer) Decode(originalData []byte, gvk *unversioned.GroupVersionKind, into runtime.Object) (runtime.Object, *unversioned.GroupVersionKind, error) {\n    // ...\n\n    data := originalData\n\n    // ...\n\n    actual, err := s.meta.Interpret(data)\n    if err != nil {\n        return nil, nil, err\n    }\n\n    if gvk != nil {\n        // apply kind and version defaulting from provided default\n        if len(actual.Kind) == 0 {\n            actual.Kind = gvk.Kind\n        }\n        if len(actual.Version) == 0 && len(actual.Group) == 0 {\n            actual.Group = gvk.Group\n            actual.Version = gvk.Version\n        }\n        if len(actual.Version) == 0 && actual.Group == gvk.Group {\n            actual.Version = gvk.Version\n        }\n    }\n\n    // ...\n\n    if into != nil {\n        typed, _, err := s.typer.ObjectKind(into)\n        switch {\n        case runtime.IsNotRegisteredError(err):\n            if err := codec.NewDecoderBytes(data, new(codec.JsonHandle)).Decode(into); err != nil {\n                return nil, actual, err\n            }\n            return into, actual, nil\n        case err != nil:\n            return nil, actual, err\n        default:\n            if len(actual.Kind) == 0 {\n                actual.Kind = typed.Kind\n            }\n            if len(actual.Version) == 0 && len(actual.Group) == 0 {\n                actual.Group = typed.Group\n                actual.Version = typed.Version\n            }\n            if len(actual.Version) == 0 && actual.Group == typed.Group {\n                actual.Version = typed.Version\n            }\n        }\n    }\n\n    if len(actual.Kind) == 0 {\n        return nil, actual, runtime.NewMissingKindErr(string(originalData))\n    }\n    if len(actual.Version) == 0 {\n        return nil, actual, runtime.NewMissingVersionErr(string(originalData))\n    }\n\n    // use the target if necessary\n    obj, err := runtime.UseOrCreateObject(s.typer, s.creater, *actual, into)\n    if err != nil {\n        return nil, actual, err\n    }\n\n    if err := codec.NewDecoderBytes(data, new(codec.JsonHandle)).Decode(obj); err != nil {\n        return nil, actual, err\n    }\n\n    return obj, actual, nil\n}\n")),(0,E.kt)("p",null,"JSON\u5e8f\u5217\u5316\u5668\u7684\u89e3\u7801\u8fc7\u7a0b\u53ef\u4ee5\u5927\u81f4\u5212\u5206\u4e3a5\u4e2a\u6b65\u9aa4\uff1a"),(0,E.kt)("ol",null,(0,E.kt)("li",{parentName:"ol"},(0,E.kt)("p",{parentName:"li"},"\u667a\u80fd\u63a8\u65ad"),(0,E.kt)("p",{parentName:"li"},"\u83b7\u53d6\u539f\u59cb\u5b57\u8282\u5e8f\u5217\uff08",(0,E.kt)("inlineCode",{parentName:"p"},"originalData"),"\uff09\u4e2d\u7684GVK\u4fe1\u606f\u3002")),(0,E.kt)("li",{parentName:"ol"},(0,E.kt)("p",{parentName:"li"},(0,E.kt)("strong",{parentName:"p"},"\u5171\u540c"),"\u63a8\u65ad"),(0,E.kt)("p",{parentName:"li"},"\u5229\u7528",(0,E.kt)("inlineCode",{parentName:"p"},"originalData"),"\u3001",(0,E.kt)("inlineCode",{parentName:"p"},"gvk"),"\u3001",(0,E.kt)("inlineCode",{parentName:"p"},"into"),"\u4e2d\u7684GVK\u4fe1\u606f\u5171\u540c\u63a8\u65ad\u51fa\u4e00\u4e2aGKV\u4e09\u5143\u7ec4\u3002\n\u8865\u5168\u987a\u5e8f\u4e3a\u539f\u59cb\u5b57\u8282\u6570\u636e\u5305\u542b\u7684GVK\u4fe1\u606f\u4f18\u5148\u4e8e\u8c03\u7528\u8005\u7ed9\u5b9a\u7684GVK\u4fe1\u606f\uff08\u53c2\u6570",(0,E.kt)("inlineCode",{parentName:"p"},"gvk"),"\uff09\u4f18\u5148\u4e8e\u8c03\u7528\u8005\u63d0\u4f9b\u7684\u76ee\u6807\u5bf9\u8c61\u8f7d\u4f53\uff08\u53c2\u6570",(0,E.kt)("inlineCode",{parentName:"p"},"into"),"\uff09\u3002")),(0,E.kt)("li",{parentName:"ol"},(0,E.kt)("p",{parentName:"li"},'\u521b\u5efa/\u590d\u7528"\u8f7d\u4f53"'),(0,E.kt)("p",{parentName:"li"},"\u8c03\u7528",(0,E.kt)("inlineCode",{parentName:"p"},"UseOrCreateObject"),'\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61"\u8f7d\u4f53"\u6216\u8005\u4f7f\u7528\u8c03\u7528\u8005\u63d0\u4f9b\u7684',(0,E.kt)("inlineCode",{parentName:"p"},"into"),'\u4f5c\u4e3a"\u8f7d\u4f53"\u3002\n\u5177\u4f53\u89c4\u5219\u4e3a\uff1a\u5982\u679c\u5171\u540c\u63a8\u65ad\u51fa\u7684GVK\u4e09\u5143\u7ec4\u4e0e',(0,E.kt)("inlineCode",{parentName:"p"},"into"),'\u6240\u643a\u5e26\u7684GVK\u4fe1\u606f\u4e0d\u5339\u914d\uff0c\u90a3\u4e48\u5c06\u4f1a\u521b\u5efa\u51fa\u4e00\u4e2a\u4e0e\u63a8\u65adGVK\u5339\u914d\u7684\u5bf9\u8c61\u505a\u4e3a\u76ee\u6807"\u8f7d\u4f53"\uff1b')),(0,E.kt)("li",{parentName:"ol"},(0,E.kt)("p",{parentName:"li"},"\u53cd\u5e8f\u5217\u5316")),(0,E.kt)("li",{parentName:"ol"},(0,E.kt)("p",{parentName:"li"},"\u8fd4\u56de\u5e8f\u5217\u5316\u540e\u7684\u5bf9\u8c61\u4ee5\u53ca",(0,E.kt)("strong",{parentName:"p"},"\u5171\u540c\u63a8\u65ad\u7684GVK\u4e09\u5143\u7ec4")))),(0,E.kt)("h4",{id:"codec"},"codec"),(0,E.kt)("p",null,'\u6211\u4eec\u53ef\u4ee5\u770b\u51faJSON\u5e8f\u5217\u5316\u5668\u7684\u89e3\u7801\u8fc7\u7a0b\u4e0e"\u73b0\u4ee3"\u65f6\u671f\u7684\u89e3\u7801\u8fc7\u7a0b\u4ea7\u751f\u4e86\u4e00\u4e9b\u533a\u522b\uff1a'),(0,E.kt)("ol",null,(0,E.kt)("li",{parentName:"ol"},'\u591a\u4e86"\u5171\u540c\u63a8\u65ad"\u7684\u6b65\u9aa4'),(0,E.kt)("li",{parentName:"ol"},'\u5c11\u4e86"\u7248\u672c\u8f6c\u5316"\u7684\u6b65\u9aa4')),(0,E.kt)("p",null,'\u5bf9\u4e8e\u591a\u51fa\u7684"\u5171\u540c\u63a8\u65ad"\u6b65\u9aa4\u5176\u5b9e\u662f\u5bb9\u6613\u7406\u89e3\u7684\uff0c\u6bd5\u7adf\u6b64\u65f6',(0,E.kt)("inlineCode",{parentName:"p"},"Decode()"),'\u65b9\u6cd5\u7b7e\u540d\u5df2"\u4eca\u65f6\u4e0d\u540c\u5f80\u65e5"\u2014\u2014\u4e09\u4e2a\u53c2\u6570\u5168\u90e8\u5305\u542b\u6709GVK\u4fe1\u606f\u3002\n\u53ef\u662f\u4e3a\u4ec0\u4e48\u5728\u89e3\u7801\u8fc7\u7a0b\u4e2d\u4e0d\u518d\u6709"\u7248\u672c\u8f6c\u5316"\u6b65\u9aa4\u4e86\u5462\uff1f\u96be\u9053\u8fd9\u6b21\u91cd\u6784\u820d\u5f03\u4e86Kubernetes\u7684"\u7248\u672c\u8f6c\u5316"\u5417\uff1f'),(0,E.kt)("p",null,"\u5176\u5b9e\u4e0d\u7136\uff0cPR\u4f5c\u8005\u5176\u5b9e\u6709\u610f\u800c\u4e3a\u4e4b\u2014\u2014JSON/YAML\u5e8f\u5217\u5316\u5668\u4ec5\u7528\u4e8e",(0,E.kt)("strong",{parentName:"p"},"\u7eaf\u7cb9"),"\u7684\u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316\u4efb\u52a1\u3002\n\u771f\u6b63\u5e26\u6709\u7248\u672c\u8f6c\u5316\u7684\u5e8f\u5217\u5316\u5668\u5b9e\u73b0\u662f",(0,E.kt)("inlineCode",{parentName:"p"},"codec"),"\uff0c\u5b83\u6240\u5b9e\u73b0\u7684\u4e5f\u662f",(0,E.kt)("inlineCode",{parentName:"p"},"Codec"),"\u63a5\u53e3\u3002"),(0,E.kt)("pre",null,(0,E.kt)("code",{parentName:"pre",className:"language-go",metastring:'title="pkg/runtime/serializer/versioning/versioning.go"',title:'"pkg/runtime/serializer/versioning/versioning.go"'},"\ntype codec struct {\n    serializer runtime.Serializer\n    convertor  runtime.ObjectConvertor\n    creater    runtime.ObjectCreater\n    typer      runtime.Typer\n\n    encodeVersion map[string]unversioned.GroupVersion\n    decodeVersion map[string]unversioned.GroupVersion\n}\n")),(0,E.kt)("p",null,"\u5176\u4e2d\uff1a"),(0,E.kt)("ul",null,(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("inlineCode",{parentName:"li"},"serializer"),"\u6210\u5458\u4f1a\u662fJSON/YAML\u5e8f\u5217\u5316\u5668\u7684\u4e00\u79cd\uff0c\u5b83\u8d1f\u8d23\u7eaf\u7cb9\u7684\u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316\u6b65\u9aa4\uff1b"),(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("inlineCode",{parentName:"li"},"convertor"),'\u6210\u5458\u7528\u4e8e"\u7248\u672c\u8f6c\u5316"\u6b65\u9aa4\uff0c\u8fd9\u4e2a\u6210\u5458\u53ef\u4ee5\u8ba4\u4e3a\u662f\u5265\u79bb\u81ea"\u8fd1\u4ee3"\u65f6\u671f\u7684',(0,E.kt)("inlineCode",{parentName:"li"},"Scheme"),"\u4e2d\u7684",(0,E.kt)("inlineCode",{parentName:"li"},"convertor"),"\uff1b"),(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("inlineCode",{parentName:"li"},"creater"),"\u6210\u5458\u7528\u4e8e\u6839\u636e\u7ed9\u5b9a\u7684GVK\u4e09\u5143\u7ec4\u521b\u5efa\u5bf9\u5e94",(0,E.kt)("em",{parentName:"li"},"kind"),'\uff08API\u5bf9\u8c61\uff09\u7684\u7a7a\u5b9e\u4f8b\uff08"\u8f7d\u4f53"\uff09\uff1b'),(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("inlineCode",{parentName:"li"},"typer"),"\u6210\u5458\u7528\u4e8e\u5224\u5b9a\u4e00\u4e2a\u7ed9\u5b9a\u7684",(0,E.kt)("em",{parentName:"li"},"kind"),"\uff08API\u5bf9\u8c61\uff09\u662f\u5426\u6ce8\u518c\u8fc7\uff1b"),(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("inlineCode",{parentName:"li"},"encodeVersion"),"\u548c",(0,E.kt)("inlineCode",{parentName:"li"},"decodeVersion"),"\u6210\u5458\u662f",(0,E.kt)("inlineCode",{parentName:"li"},"codec"),'\u5e8f\u5217\u5316\u5668\u533a\u522b\u4e8e"\u73b0\u4ee3"\uff08',(0,E.kt)("inlineCode",{parentName:"li"},"Scheme"),"\u5927\u4e00\u7edf\uff09\u65f6\u671f\u7684\u7f16/\u89e3\u7801\u903b\u8f91\u7684\u53e6\u4e00\u4e2a\u7279\u6027\u2014\u2014",(0,E.kt)("inlineCode",{parentName:"li"},"codec"),"\u652f\u6301\u5c06\u7248\u672c\u8f6c\u5316\u4e3a\u8c03\u7528\u8005\u6307\u5b9a\u7684",(0,E.kt)("strong",{parentName:"li"},"\u76ee\u6807\u7248\u672c"),"\uff0c\u800c\u4e0d\u662f\u4ec5\u9ed8\u8ba4\u8f6c\u5316\u4e3a\u5185\u90e8\u7248\u672c\u3002")),(0,E.kt)("admonition",{type:"tip"},(0,E.kt)("p",{parentName:"admonition"},"\u4e0eJSON\u5e8f\u5217\u5316\u5668\u4e00\u6837\uff0c",(0,E.kt)("inlineCode",{parentName:"p"},"codec"),"\u7c7b\u578b\u521d\u59cb\u5316",(0,E.kt)("inlineCode",{parentName:"p"},"typer"),"\u548c",(0,E.kt)("inlineCode",{parentName:"p"},"creater"),"\u6210\u5458\u65f6\u7528\u7684\u662f",(0,E.kt)("inlineCode",{parentName:"p"},"Scheme"),"\u7c7b\u578b\u7684\u5b9e\u4f8b\u3002")),(0,E.kt)("p",null,"\u6240\u4ee5\uff0c",(0,E.kt)("inlineCode",{parentName:"p"},"codec"),"\u5e8f\u5217\u5316\u5668\u662f\u5bf9JSON/YAML\u5e8f\u5217\u5316\u5668\u7684\u8fdb\u4e00\u6b65\u5c01\u88c5\u3002\u63a5\u4e0b\u6765\u6211\u4eec\u6765\u770b\u770b",(0,E.kt)("inlineCode",{parentName:"p"},"codec"),"\u7684\u89e3\u7801\u65b9\u6cd5\u7684\u5177\u4f53\u6b65\u9aa4\uff1a"),(0,E.kt)("admonition",{title:"\u6ce8",type:"tip"},(0,E.kt)("p",{parentName:"admonition"},"\u4e3a\u4e86\u51cf\u8f7b\u8bfb\u8005\u7684\u8d1f\u62c5\u4e5f\u4fbf\u4e8e\u8bfb\u8005\u7406\u89e3\uff0c\u540c\u65f6\u4e5f\u4e3a\u4e86\u805a\u7126",(0,E.kt)("inlineCode",{parentName:"p"},"codec"),"\u89e3\u7801\u903b\u8f91\u7684\u4e3b\u5e72\u6b65\u9aa4\uff0c\u4e0b\u9762\u7684\u4ee3\u7801\u7701\u7565\u4e86\u4e00\u4e9b\u7ec6\u8282\u3002")),(0,E.kt)("pre",null,(0,E.kt)("code",{parentName:"pre",className:"language-go"},"// Decode attempts a decode of the object, then tries to convert it to the internal version. If into is provided and the decoding is\n// successful, the returned runtime.Object will be the value passed as into. Note that this may bypass conversion if you pass an\n// into that matches the serialized version.\nfunc (c *codec) Decode(data []byte, defaultGVK *unversioned.GroupVersionKind, into runtime.Object) (runtime.Object, *unversioned.GroupVersionKind, error) {\n    // ...\n\n    obj, gvk, err := c.serializer.Decode(data, defaultGVK, into)\n    if err != nil {\n        return nil, gvk, err\n    }\n\n    // if we specify a target, use generic conversion.\n    if into != nil {\n        if into == obj {\n            // ...\n            return into, gvk, nil\n        }\n        if err := c.convertor.Convert(obj, into); err != nil {\n            return nil, gvk, err\n        }\n        // ...\n        return into, gvk, nil\n    }\n\n    // invoke a version conversion\n    group := gvk.Group\n    if defaultGVK != nil {\n        group = defaultGVK.Group\n    }\n    var targetGV unversioned.GroupVersion\n    if c.decodeVersion == nil {\n        // convert to internal by default\n        targetGV.Group = group\n        targetGV.Version = runtime.APIVersionInternal\n    } else {\n        gv, ok := c.decodeVersion[group]\n        if !ok {\n            // ...\n            return obj, gvk, nil\n        }\n        targetGV = gv\n    }\n\n    if gvk.GroupVersion() == targetGV {\n        // ...\n        return obj, gvk, nil\n    }\n    // ...\n\n    // Convert if needed.\n    out, err := c.convertor.ConvertToVersion(obj, targetGV.String())\n    if err != nil {\n        return nil, gvk, err\n    }\n    // ...\n    return out, gvk, nil\n}\n\n")),(0,E.kt)("ol",null,(0,E.kt)("li",{parentName:"ol"},(0,E.kt)("p",{parentName:"li"},"\u5229\u7528\u57fa\u7840\u7684JSON/YAML\u5e8f\u5217\u5316\u7ec4\u4ef6\u8fdb\u884c\u7eaf\u7cb9\u7684\u53cd\u5e8f\u5217\u5316\u6b65\u9aa4\u3002")),(0,E.kt)("li",{parentName:"ol"},(0,E.kt)("p",{parentName:"li"},"\u7248\u672c\u8f6c\u5316"),(0,E.kt)("ul",{parentName:"li"},(0,E.kt)("li",{parentName:"ul"},"\u5982\u679c\u8c03\u7528\u8fd9\u63d0\u4f9b\u4e86\u76ee\u6807API\u5bf9\u8c61\u8f7d\u4f53",(0,E.kt)("inlineCode",{parentName:"li"},"into"),"\uff0c\u5219\u5c06\u4e0a\u4e00\u6b65\u53cd\u5e8f\u5217\u5316\u7ed3\u679c\u8f6c\u5316\u4e3a\u8c03\u7528\u8005\u63d0\u4f9b\u7684",(0,E.kt)("inlineCode",{parentName:"li"},"into"),"\u5bf9\u8c61\uff1b"),(0,E.kt)("li",{parentName:"ul"},"\u5982\u679c\u8c03\u7528\u8005\u6ca1\u6709\u63d0\u4f9b\u76ee\u6807API\u5bf9\u8c61\u8f7d\u4f53\uff08",(0,E.kt)("inlineCode",{parentName:"li"},"into"),"\u4e3a",(0,E.kt)("inlineCode",{parentName:"li"},"nil"),"\uff09\uff0c\u5e76\u4e14\u4e8b\u5148\u63d0\u4f9b\u4e86\u76ee\u6807\u7248\u672c\u7684GV\u4fe1\u606f\uff08",(0,E.kt)("inlineCode",{parentName:"li"},"decodeVersion"),"\uff09\u5219\u8f6c\u5316\u4e3a\u6307\u5b9a\u7684\u76ee\u6807\u7248\u672c\uff1b"),(0,E.kt)("li",{parentName:"ul"},"\u5982\u679c\u8c03\u7528\u8005\u5373\u6ca1\u6709\u63d0\u4f9b\u76ee\u6807API\u5bf9\u8c61\u8f7d\u4f53\uff08",(0,E.kt)("inlineCode",{parentName:"li"},"into"),"\u4e3a",(0,E.kt)("inlineCode",{parentName:"li"},"nil"),"\uff09\uff0c\u4e5f\u6ca1\u6709\u63d0\u4f9b\u76ee\u6807\u7248\u672c\u7684GV\u4fe1\u606f\uff08",(0,E.kt)("inlineCode",{parentName:"li"},"decodeVersion"),"\u6210\u5458\u4e3a",(0,E.kt)("inlineCode",{parentName:"li"},"nil"),"\uff09\u5219\u5c06\u4e0a\u4e00\u6b65\u53cd\u5e8f\u5217\u5316\u7684\u7ed3\u679c\u9ed8\u8ba4\u8f6c\u5316\u4e3a\u5185\u90e8\u7248\u672c\u3002")))),(0,E.kt)("h3",{id:"\u5e8f\u5217\u5316\u5668\u5de5\u5382codecfactory"},"\u5e8f\u5217\u5316\u5668\u5de5\u5382CodecFactory"),(0,E.kt)("p",null,"\u6211\u4eec\u73b0\u5728\u5df2\u7ecf\u77e5\u9053",(0,E.kt)("inlineCode",{parentName:"p"},"codec"),"\u5e8f\u5217\u5316\u5668\u63d0\u4f9b\u4e86\u8bb8\u591a\u53ef\u5b9a\u5236\u5316\u9879\u3002\u4f8b\u5982\u53ef\u4ee5\u914d\u7f6eJSON\u6216\u8005YAML\u4f5c\u4e3a\u5e95\u5c42\u7684\u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316\u7ec4\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u4e8b\u5148\u914d\u7f6e\u597d\u6240\u8981\u8f6c\u5316\u7684\u76ee\u6807\u7248\u672c\u4fe1\u606f\u3002\n\u56e0\u6b64\uff0c\u5728\u8be5PR\u4e2d\uff0c\u4f5c\u8005\u4e5f\u540c\u65f6\u63d0\u4f9b\u4e86",(0,E.kt)("inlineCode",{parentName:"p"},"CodecFactory"),"\uff08",(0,E.kt)("em",{parentName:"p"},"\u5e8f\u5217\u5316\u5668\u5de5\u5382"),'\uff09\u2014\u2014\u7528\u4e8e"\u751f\u4ea7"\u4e0d\u540c\u5b9a\u5236\u5316\u7684',(0,E.kt)("inlineCode",{parentName:"p"},"codec"),"\u3002"),(0,E.kt)("pre",null,(0,E.kt)("code",{parentName:"pre",className:"language-go"},"// CodecFactory provides methods for retrieving codecs and serializers for specific\n// versions and content types.\ntype CodecFactory struct {\n    scheme      *runtime.Scheme\n    universal   runtime.Decoder\n    serializers []serializerType\n    accepts     []string\n\n\n    // ...\n}\n")),(0,E.kt)("p",null,"\u5176\u4e2d\uff1a"),(0,E.kt)("ul",null,(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("inlineCode",{parentName:"li"},"scheme"),'\u6210\u5458\u7528\u4e8e"API\u5bf9\u8c61\u6ce8\u518c"\uff1b'),(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("inlineCode",{parentName:"li"},"serializers"),"\u6210\u5458\u7528\u4e8e\u5b58\u653e\u5305\u62ecJSON\u548cYAML\u4e24\u79cd\u683c\u5f0f\u7684\u57fa\u7840\u5e8f\u5217\u5316\u5668\uff1b"),(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("inlineCode",{parentName:"li"},"accepts"),"\u6210\u5458\u7528\u4e8e\u5b58\u653e",(0,E.kt)("strong",{parentName:"li"},"\u652f\u6301"),"\u7684\u7f16/\u89e3\u7801\u683c\u5f0f\u4fe1\u606f\uff0c\u5305\u62ec\uff1a",(0,E.kt)("inlineCode",{parentName:"li"},'"application/json"'),"\u4ee5\u53ca",(0,E.kt)("inlineCode",{parentName:"li"},'"application/yaml"'),";"),(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("inlineCode",{parentName:"li"},"universal"),"\u6210\u5458\u610f\u5728\u63d0\u4f9b\u4e00\u4e2a",(0,E.kt)("strong",{parentName:"li"},"\u901a\u7528"),"\u5feb\u6377\u7684\u89e3\u7801\u5668\uff0c\u5b83\u80fd\u591f\u8bc6\u522b\u5b57\u8282\u5e8f\u5217\u7684\u6570\u636e\u683c\u5f0f\uff08JSON/YAML\uff09\u518d\u627e\u5230\u5bf9\u5e94\u7684\u57fa\u7840\u7684\u5e8f\u5217\u5316\u5668\u8fdb\u884c\u53cd\u5e8f\u5217\u5316\u3002")),(0,E.kt)("p",null,"\u53e6\u5916\uff0c",(0,E.kt)("inlineCode",{parentName:"p"},"CodecFactory"),"\u5176\u5b9e\u5b9e\u73b0\u4e86",(0,E.kt)("inlineCode",{parentName:"p"},"NegotiatedSerializer"),"\uff08",(0,E.kt)("em",{parentName:"p"},"\u534f\u5546\u5e8f\u5217\u5316\u5668"),"\u63a5\u53e3\uff09:"),(0,E.kt)("pre",null,(0,E.kt)("code",{parentName:"pre",className:"language-go"},'var _ runtime.NegotiatedSerializer = &CodecFactory{}\n\n// SupportedMediaTypes returns the RFC2046 media types that this factory has serializers for.\nfunc (f CodecFactory) SupportedMediaTypes() []string {\n    return f.accepts\n}\n\n// SerializerForMediaType returns a serializer that matches the provided RFC2046 mediaType, or false if no such\n// serializer exists\nfunc (f CodecFactory) SerializerForMediaType(mediaType string, options map[string]string) (runtime.Serializer, bool) {\n    for _, s := range f.serializers {\n        for _, accepted := range s.AcceptContentTypes {\n            if accepted == mediaType {\n                if v, ok := options["pretty"]; ok && v == "1" && s.PrettySerializer != nil {\n                    return s.PrettySerializer, true\n                }\n                return s.Serializer, true\n            }\n        }\n    }\n    return nil, false\n}\n\n// DecoderToVersion returns a decoder that targets the provided group version.\nfunc (f CodecFactory) DecoderToVersion(serializer runtime.Serializer, gv unversioned.GroupVersion) runtime.Decoder {\n    return f.CodecForVersions(serializer, nil, []unversioned.GroupVersion{gv})\n}\n\n// EncoderForVersion returns an encoder that targets the provided group version.\nfunc (f CodecFactory) EncoderForVersion(serializer runtime.Serializer, gv unversioned.GroupVersion) runtime.Encoder {\n    return f.CodecForVersions(serializer, []unversioned.GroupVersion{gv}, nil)\n}\n')),(0,E.kt)("p",null,"\u5b83\u5b9e\u73b0\u7684",(0,E.kt)("inlineCode",{parentName:"p"},"NegotiatedSerializer"),"\u63a5\u53e3\u7684\u65b9\u6cd5\uff1a"),(0,E.kt)("ul",null,(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("inlineCode",{parentName:"li"},"SupportedMediaTypes()"),"\u65b9\u6cd5\u7528\u4e8e\u8fd4\u56de\u6240\u652f\u6301\u7684\u7f16\u7801\u683c\u5f0f\uff1b"),(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("inlineCode",{parentName:"li"},"SerializerForMediaType()"),'\u65b9\u6cd5\u7528\u4e8e"\u751f\u4ea7"\u4e00\u4e2a\u6307\u5b9a\u7f16\u7801\u7c7b\u578b\u7684"\u5b9a\u5236\u5316"',(0,E.kt)("inlineCode",{parentName:"li"},"codec"),";"),(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("inlineCode",{parentName:"li"},"EncoderForVersion()/DecoderToVersion()"),'\u65b9\u6cd5\u7528\u4e8e"\u751f\u4ea7"\u4e00\u4e2a\u53ef\u4ee5\u8f6c\u5316\u4e3a\u6307\u5b9a\u76ee\u6807\u7248\u672c\u7684"\u5b9a\u5236\u5316"',(0,E.kt)("inlineCode",{parentName:"li"},"codec"),"\uff1b")),(0,E.kt)("h4",{id:"\u521b\u5efacodecfactory\u5bf9\u8c61"},"\u521b\u5efaCodecFactory\u5bf9\u8c61"),(0,E.kt)("p",null,"\u4ecb\u7ecd\u5b8c",(0,E.kt)("inlineCode",{parentName:"p"},"CodecFactory"),"\u7c7b\u578b\u540e\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u518d\u6765\u770b\u770b\u5982\u4f55\u521b\u5efa\u4e00\u4e2a",(0,E.kt)("inlineCode",{parentName:"p"},"CodecFactory"),"\u7c7b\uff1a"),(0,E.kt)("pre",null,(0,E.kt)("code",{parentName:"pre",className:"language-go"},"func NewCodecFactory(scheme *runtime.Scheme) CodecFactory {\n    // ...\n}\n")),(0,E.kt)("p",null,"\u5f00\u53d1\u8005\u4e3a\u6211\u4eec\u5c01\u88c5\u7684\u521d\u59cb\u5316\u51fd\u6570\u5341\u5206\u7b80\u5355\u2014\u2014\u8c03\u7528\u8005\u4ec5\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a",(0,E.kt)("inlineCode",{parentName:"p"},"Scheme"),"\u5bf9\u8c61\u5373\u53ef\uff0c\u5269\u4e0b\u7684\u7531\u521d\u59cb\u5316\u51fd\u6570\u5b8c\u6210\u3002",(0,E.kt)("a",{parentName:"p",href:"../intro#%E7%BA%A6%E5%AE%9A"},"\ud83c\udf88")),(0,E.kt)("p",null,"\u4e3a\u4e86\u51cf\u8f7b\u8bfb\u8005\u8d1f\u62c5\uff0c\u5728\u8fd9\u91cc\u6211\u4eec\u4e0d\u518d\u5173\u6ce8\u521d\u59cb\u5316\u7684\u7ec6\u8282\u3002"),(0,E.kt)("h4",{id:"withoutconversion"},"WithoutConversion"),(0,E.kt)("p",null,'\u6211\u4eec\u77e5\u9053"\u7248\u672c\u8f6c\u5316"\u5728',(0,E.kt)("inlineCode",{parentName:"p"},"kube-apiserver"),"\u662f\u4e2a\u5341\u5206\u91cd\u8981\u7684\u884c\u4e3a\u3002\u4f46\u662f\u5bf9\u4e8e\u5ba2\u6237\u7aef\uff08",(0,E.kt)("inlineCode",{parentName:"p"},"client-go"),'\uff09\u6765\u8bf4\uff0c\u5b83\u4eec\u5728\u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316\u8d44\u6e90\u65f6\u5176\u5b9e\u5e76\u4e0d\u9700\u8981"\u7248\u672c\u8f6c\u5316"\u3002\n\u9488\u5bf9\u8fd9\u79cd\u9700\u6c42\uff0c\u5728',(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/tree/v1.15.0-alpha1"},"Kubernetes v1.15.0-alpha1"),"\n",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/pull/76098"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Pull Request #76098"),"\n\u5f00\u53d1\u8005\u7ed9",(0,E.kt)("inlineCode",{parentName:"p"},"CodecFactory"),'\u5c01\u88c5\u4e86\u4e00\u4e2a"\u5feb\u6377"\u65b9\u6cd5',(0,E.kt)("inlineCode",{parentName:"p"},"WithoutConversion()"),"\uff1a"),(0,E.kt)("pre",null,(0,E.kt)("code",{parentName:"pre",className:"language-go"},"// WithoutConversion returns a NegotiatedSerializer that performs no conversion\nfunc (f CodecFactory) WithoutConversion() runtime.NegotiatedSerializer {\n    // ...\n}\n")),(0,E.kt)("p",null,"\u7528\u4e8e\u8fd4\u56de\u4e00\u4e2a\u5728\u7f16/\u89e3\u7801\u65f6",(0,E.kt)("strong",{parentName:"p"},"\u4e0d\u8fdb\u884c\u7248\u672c\u8f6c\u5316"),"\u7684",(0,E.kt)("inlineCode",{parentName:"p"},"CodecFactory"),"\u3002",(0,E.kt)("a",{parentName:"p",href:"../intro#%E7%BA%A6%E5%AE%9A"},"\ud83c\udf88")),(0,E.kt)("h3",{id:"url\u53c2\u6570\u7f16\u89e3\u7801\u5668parametercodec"},"URL\u53c2\u6570\u7f16\u89e3\u7801\u5668ParameterCodec"),(0,E.kt)("p",null,"\u4e0a\u8ff0\u7684",(0,E.kt)("inlineCode",{parentName:"p"},"CodecFactory"),"\u4e3b\u8981\u7528\u4e8eHTTP",(0,E.kt)("strong",{parentName:"p"},"\u8bf7\u6c42/\u8fd4\u56de\u4f53"),"\uff08\u5373",(0,E.kt)("em",{parentName:"p"},"\u8d44\u6e90"),"\uff09\u7684\u7f16\u89e3/\u7801\u3002"),(0,E.kt)("p",null,"\u5728\u63d0\u6848",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/issues/7111"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Issue #7111"),'\u4e2d\uff0c\u4f5c\u8005\u751a\u81f3"\u8d34\u5fc3\u5730"\u63d0\u8bae\u4e3aHTTP URL\u53c2\u6570\uff08Query Parameters\uff09\u4e0eGo\u5bf9\u8c61\u4e4b\u95f4\u7684\u8f6c\u6362\u4e5f\u4e13\u95e8\u5c01\u88c5\u6210\u4e00\u79cd"\u7f16\u89e3\u7801\u5668"',(0,E.kt)("sup",{parentName:"p",id:"fnref-2"},(0,E.kt)("a",{parentName:"sup",href:"#fn-2",className:"footnote-ref"},"2")),"\uff1a"),(0,E.kt)("blockquote",null,(0,E.kt)("p",{parentName:"blockquote"},"There are places where we want to convert map","[string]","interface{} (generic JSON object representation) or a map","[string][]","string (url.Values) into a versioned Go struct, which is dependent on a type of marshaling (i.e. following JSON rules, or Query parameter rules).")),(0,E.kt)("p",null,"\u5728",(0,E.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/pull/17922"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Pull Request #17922"),"\u4e2d\uff0c\u4f5c\u8005\u5b9e\u73b0\u4e86",(0,E.kt)("inlineCode",{parentName:"p"},"ParameterCodec"),"\u7f16\u89e3\u7801\u5668\u4e13\u95e8\u7528\u4e8e\u6b64\u76ee\u7684\uff1a"),(0,E.kt)("pre",null,(0,E.kt)("code",{parentName:"pre",className:"language-go"},"// parameterCodec implements conversion to and from query parameters and objects.\ntype parameterCodec struct {\n    typer     Typer\n    convertor ObjectConvertor\n    creator   ObjectCreater\n}\n")),(0,E.kt)("p",null,"\u4f8b\u5982\uff0c\u901a\u5e38\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528",(0,E.kt)("inlineCode",{parentName:"p"},"apimachinery"),"\u5e93\u63d0\u4f9b\u7684",(0,E.kt)("inlineCode",{parentName:"p"},"metav1.ListOptions"),"\u7ed3\u6784",(0,E.kt)("sup",{parentName:"p",id:"fnref-3"},(0,E.kt)("a",{parentName:"sup",href:"#fn-3",className:"footnote-ref"},"3")),"\u6765\u57fa\u4e8e\u6761\u4ef6\u5730\u67e5\u8be2\u8d44\u6e90\u96c6\u5408\uff1a"),(0,E.kt)("pre",null,(0,E.kt)("code",{parentName:"pre",className:"language-go"},'listOptions := metav1.ListOptions{\n        Limit: 1,\n        LabelSelector: "app=foo",\n    }\npods, _ := clientset.CoreV1().Pods("default").List(listOptions)\n')),(0,E.kt)("p",null,(0,E.kt)("inlineCode",{parentName:"p"},"client-go"),"\u5176\u5b9e\u5728\u80cc\u540e\u6b63\u662f\u5229\u7528\u4e86",(0,E.kt)("inlineCode",{parentName:"p"},"ParameterCodec"),'"\u7f16\u89e3\u7801\u5668"\u5c06',(0,E.kt)("inlineCode",{parentName:"p"},"metav1.ListOptions"),'\u7c7b\u578b\u6700\u7ec8"\u89e3\u7801"\u6210HTTP URL\u53c2\u6570',(0,E.kt)("inlineCode",{parentName:"p"},"limit=1&app=foo"),"\u3002\n\u53e6\u5916\uff0c\u9700\u8981\u63d0\u53ca\u7684\u662f\uff0c",(0,E.kt)("inlineCode",{parentName:"p"},"ParameterCodec"),'"\u7f16\u89e3\u7801\u5668"\u4ecd\u7136\u57fa\u4e8e',(0,E.kt)("inlineCode",{parentName:"p"},"Scheme"),"\u6ce8\u518c\u673a\u5236\u5de5\u4f5c\uff08",(0,E.kt)("inlineCode",{parentName:"p"},"typer"),"\u548c",(0,E.kt)("inlineCode",{parentName:"p"},"creator"),"\u6210\u5458\uff09\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c",(0,E.kt)("inlineCode",{parentName:"p"},"metav1.ListOptions"),"\u7c7b\u578b\u4e5f\u540c\u6837\u9700\u8981\u6ce8\u518c\u8fdb",(0,E.kt)("inlineCode",{parentName:"p"},"scheme"),"\u4e2d\u3002"),(0,E.kt)("h3",{id:"\u5c0f\u7ed3"},"\u5c0f\u7ed3"),(0,E.kt)("admonition",{title:"\u5c0f\u7ed3",type:"tip"},(0,E.kt)("p",{parentName:"admonition"},"\u5728\u672c\u5c0f\u8282\u4e2d\uff0c\u6211\u4eec\u9996\u5148\u5f3a\u8c03\u4e86\u5728Kubernetes\u4e0a\u4e0b\u6587\u4e2d\u7f16/\u89e3\u7801\u7684\u7279\u6b8a\u6027\uff0c\u800c\u8fd9\u79cd\u7279\u6b8a\u6027\u672c\u8d28\u4e0a\u6765\u81ea\u4e8e\u8d44\u6e90\u7684\u591a\u7248\u672c\u4ee5\u53ca\u7248\u672c\u95f4\u7684\u76f8\u4e92\u8f6c\u5316\u3002\n\u4e4b\u540e\u6211\u4eec\u603b\u7ed3\u4e86Kubernetes\u7f16/\u89e3\u7801\u4f53\u7cfb\u6f14\u5316\u7684\u56db\u4e2a\u91cd\u8981\u9636\u6bb5\u3002\n\u5982\u4eca\u7684Kubernetes\u4f53\u7cfb\u4e3b\u8981\u57fa\u4e8e\u4e24\u4e2a\u7ec4\u4ef6\uff1a"),(0,E.kt)("ul",{parentName:"admonition"},(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("inlineCode",{parentName:"li"},"Scheme"),"\u2014\u2014",(0,E.kt)("em",{parentName:"li"},"kind"),"\u6ce8\u518c"),(0,E.kt)("li",{parentName:"ul"},(0,E.kt)("inlineCode",{parentName:"li"},"codec"),"\u2014\u2014\u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316\u53ca\u8d44\u6e90\u7248\u672c\u8f6c\u5316")),(0,E.kt)("p",{parentName:"admonition"},"\u53e6\u5916\uff0c\u6211\u4eec\u8fd8\u4ecb\u7ecd\u4e86",(0,E.kt)("inlineCode",{parentName:"p"},"CodecFactory"),"\uff0c\u5b83\u5b9e\u73b0\u4e86",(0,E.kt)("inlineCode",{parentName:"p"},"NegotiatedSerializer"),"\uff08",(0,E.kt)("em",{parentName:"p"},"\u534f\u5546\u5e8f\u5217\u5316\u5668"),'\uff09\uff0c\u652f\u6301\u591a\u79cd\u7f16\u7801\u683c\u5f0f\uff0c\u4e5f\u53ef\u4ee5\u7528\u4e8e\u751f\u4ea7"\u5b9a\u5236\u5316"\u7684',(0,E.kt)("inlineCode",{parentName:"p"},"codec"),"\u3002"),(0,E.kt)("p",{parentName:"admonition"},"\u540c\u65f6\u6211\u4eec\u4e5f\u6307\u51fa\u4e86\u5bf9\u4e8e\u5ba2\u6237\u7aef\u6765\u8bf4\uff0c\u5b83\u5728\u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316\u8d44\u6e90\u65f6\u5e76\u4e0d\u9700\u8981\u50cfKubernetes API Server\u4e00\u6837\u8fdb\u884c\u7248\u672c\u8f6c\u3002\u9488\u5bf9\u8fd9\u79cd\u9700\u6c42\uff0c",(0,E.kt)("inlineCode",{parentName:"p"},"CodecFactory"),"\u7684",(0,E.kt)("inlineCode",{parentName:"p"},"WithoutConversion()"),"\u65b9\u6cd5\u4e5f\u5bf9\u6b64\u63d0\u4f9b\u4e86\u65b9\u4fbf\u5feb\u6377\u7684\u652f\u6301\u3002")),(0,E.kt)("div",{className:"footnotes"},(0,E.kt)("hr",{parentName:"div"}),(0,E.kt)("ol",{parentName:"div"},(0,E.kt)("li",{parentName:"ol",id:"fn-1"},"\u5f7c\u65f6",(0,E.kt)("em",{parentName:"li"},"\u8d44\u6e90"),"\u7684\u6982\u5ff5\u751a\u81f3\u8fd8\u6ca1\u6709\u6b63\u5f0f\u5f62\u6210\u3002\u5728Kubernetes\u65e9\u671f\u9636\u6bb5\uff0c\u5b98\u65b9\u5f00\u53d1\u8005\u66f4\u503e\u5411\u4e8e\u4f7f\u7528\u672f\u8bed",(0,E.kt)("em",{parentName:"li"},"API\u5bf9\u8c61\uff08API Object\uff09"),"\u6216\u662f",(0,E.kt)("em",{parentName:"li"},"API\u7c7b\u578b\uff08API Type\uff09"),"\u6765\u6307\u4ee3API\u7684JSON Schema\u3002",(0,E.kt)("em",{parentName:"li"},"API\u5bf9\u8c61\uff08API Object\uff09"),"\u9996\u6b21\u51fa\u73b0\u5728",(0,E.kt)("a",{parentName:"li",href:"https://github.com/kubernetes/kubernetes/pull/529"},(0,E.kt)(G.Z,{mdxType:"GithubSVG"})," Pull Request #529"),"\u3002",(0,E.kt)("a",{parentName:"li",href:"#fnref-1",className:"footnote-backref"},"\u21a9")),(0,E.kt)("li",{parentName:"ol",id:"fn-2"},"\u901a\u5e38\u6211\u4eec\u6240\u8bf4\u7684",(0,E.kt)("em",{parentName:"li"},"\u5e8f\u5217\u5316\u5668"),"\u6216\u8005",(0,E.kt)("em",{parentName:"li"},"\u7f16\u89e3\u7801\u5668"),"\u662f\u6307\u5b57\u8282\u5e8f\u5217\uff08",(0,E.kt)("inlineCode",{parentName:"li"},"[]bytes"),'\uff09\u4e0eGo\u5bf9\u8c61\u4e4b\u95f4\u7684\u8f6c\u5316\uff0c\u6b64\u5904\u7684"\u7f16\u89e3\u7801\u5668"\u5e76\u4e0d\u80fd\u5f52\u4e3a\u6b64\u7c7b\uff0c\u5b83\u7684\u4f5c\u7528\u662fHTTP URL\u53c2\u6570\uff08Query Parameters\uff09\u4e0eGo\u5bf9\u8c61\u4e4b\u95f4\u7684\u8f6c\u6362\u3002',(0,E.kt)("a",{parentName:"li",href:"#fnref-2",className:"footnote-backref"},"\u21a9")),(0,E.kt)("li",{parentName:"ol",id:"fn-3"},"\u6ce8\u610f\u6b64\u5904\u7684",(0,E.kt)("inlineCode",{parentName:"li"},"ListOptions"),"\u4e0e\u6211\u4eec\u5728\u4e4b\u524d",(0,E.kt)("a",{parentName:"li",href:"./gvk#%E5%86%8D%E8%AF%86kind"},"\u518d\u8bc6kind"),"\u5c0f\u8282\u4e2d\u63d0\u53ca\u7684",(0,E.kt)("inlineCode",{parentName:"li"},"DeleteOptions"),"\u7684\u533a\u522b\uff1a",(0,E.kt)("inlineCode",{parentName:"li"},"DeleteOptions"),"\u4e0e",(0,E.kt)("inlineCode",{parentName:"li"},"ListOptions"),"\u867d\u7136\u540c\u5c5e\u4e8e",(0,E.kt)("em",{parentName:"li"},"kind"),"\u7b2c\u4e09\u79cd\u7c7b\uff0c\u4f46\u662f",(0,E.kt)("inlineCode",{parentName:"li"},"DeleteOptions"),"\u5bf9\u5e94\u7684\u662fHTTP",(0,E.kt)("strong",{parentName:"li"},"\u8bf7\u6c42\u4f53"),"\u800c\u4e0d\u662fHTTP URL\u53c2\u6570\u3002",(0,E.kt)("a",{parentName:"li",href:"#fnref-3",className:"footnote-backref"},"\u21a9")))))}z.isMDXComponent=!0}}]);