"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[920],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>k});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},s=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},g=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),u=c(n),g=a,k=u["".concat(l,".").concat(g)]||u[g]||m[g]||i;return n?r.createElement(k,o(o({ref:t},s),{},{components:n})):r.createElement(k,o({ref:t},s))}));function k(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=g;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p[u]="string"==typeof e?e:a,o[1]=p;for(var c=2;c<i;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}g.displayName="MDXCreateElement"},2919:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>p,toc:()=>c});var r=n(7462),a=(n(7294),n(3905));const i={sidebar_position:1},o="package api",p={unversionedId:"putting-it-all-together/package-api",id:"putting-it-all-together/package-api",title:"package api",description:"types.go",source:"@site/docs/putting-it-all-together/package-api.md",sourceDirName:"putting-it-all-together",slug:"/putting-it-all-together/package-api",permalink:"/crd-controller-from-scratch/docs/putting-it-all-together/package-api",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"putting-it-all-together",permalink:"/crd-controller-from-scratch/docs/putting-it-all-together/putting-it-all-together"},next:{title:"package client",permalink:"/crd-controller-from-scratch/docs/putting-it-all-together/package-client"}},l={},c=[{value:"types.go",id:"typesgo",level:2},{value:"deepcopy.go",id:"deepcopygo",level:2},{value:"register.go",id:"registergo",level:2}],s={toc:c},u="wrapper";function m(e){let{components:t,...n}=e;return(0,a.kt)(u,(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"package-api"},"package api"),(0,a.kt)("h2",{id:"typesgo"},"types.go"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},'package api\n\nimport metav1 "k8s.io/apimachinery/pkg/apis/meta/v1"\n\ntype BalloonSpec struct {\n    ReleaseTime string `json:"release_time"`\n}\n\ntype Balloon struct {\n    metav1.TypeMeta   `json:",inline"`  // \ud83e\udd16\ufe0f (1)\n    metav1.ObjectMeta `json:"metadata,omitempty"`  // \ud83e\udd16\ufe0f (2)\n    \n    // \ud83e\udd16\ufe0f (3)\n    Spec BalloonSpec `json:"spec"`\n    Status BalloonStatus `json:"status"`\n}\n\ntype BalloonStatus struct {\n    Status string `json:"status"`\n}\n\ntype BalloonList struct {\n    metav1.TypeMeta `json:",inline"`  // \ud83e\udd16\ufe0f (1)\n    metav1.ListMeta `json:"metadata,omitempty"` // \ud83e\udd16\ufe0f (4)\n\n    Items []Balloon `json:"items"` // \ud83e\udd16\ufe0f (4)\n}\n')),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"../apimachinery/runtime.Object#kind%E4%B8%8Eruntimeobject"},"kind\u4e0eruntime.Object")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"../apimachinery/runtime.Object#%E5%8D%95%E4%BD%93%E7%B1%BB%E5%9E%8B"},"kind\u7684\u5355\u4f53\u79cd\u7c7b")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"../client-go/controller#Kubernetes%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%9C%9F%E6%9C%9B%E7%8A%B6%E6%80%81%E4%B8%8E%E5%AE%9E%E9%99%85%E7%8A%B6%E6%80%81"},"Kubernetes\u5bf9\u8c61\u7684\u671f\u671b\u72b6\u6001\u4e0e\u5b9e\u9645\u72b6\u6001")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"../apimachinery/runtime.Object#%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B"},"kind\u7684\u96c6\u5408\u79cd\u7c7b"))),(0,a.kt)("h2",{id:"deepcopygo"},"deepcopy.go"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},'package api\n\nimport (\n    "k8s.io/apimachinery/pkg/runtime"\n)\n\n// \ud83e\udd16\ufe0f (1)\nfunc (in *Balloon) DeepCopyObject() runtime.Object {\n    if in == nil {\n        return nil\n    }\n    out := new(Balloon)\n    *out = *in\n    in.ObjectMeta.DeepCopyInto(&out.ObjectMeta)\n\n    return out\n}\n\n// \ud83e\udd16\ufe0f (1)\nfunc (in *BalloonList) DeepCopyObject() runtime.Object {\n    if in == nil {\n        return nil\n    }\n\n    out := new(BalloonList)\n\n    *out = *in\n    in.ListMeta.DeepCopyInto(&out.ListMeta)\n\n    if in.Items != nil {\n        in, out := &in.Items, &out.Items\n        for i := range *in {\n            c := (*in)[i].DeepCopyObject().(*Balloon)\n            *out = append(*out, *c)\n        }\n    }\n\n    return out\n}\n\n')),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"../apimachinery/runtime.Object#kind%E4%B8%8Eruntimeobject"},"kind\u4e0eruntime.Object"))),(0,a.kt)("h2",{id:"registergo"},"register.go"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},'package api\n\nimport (\n    metav1 "k8s.io/apimachinery/pkg/apis/meta/v1"\n    "k8s.io/apimachinery/pkg/runtime/schema"\n    "k8s.io/client-go/kubernetes/scheme"\n)\n\nvar GroupVersion = schema.GroupVersion{Group: "book.dong.io", Version: "v1"}\n\nfunc init() {\n    // \ud83e\udd16\ufe0f (1) (2)\n    scheme.Scheme.AddKnownTypes(GroupVersion,\n        &Balloon{},\n        &BalloonList{},\n    )\n    // \ud83e\udd16\ufe0f (2) (3)\n    metav1.AddToGroupVersion(scheme.Scheme, GroupVersion)\n}\n')),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"../apimachinery/runtime.Object#%E5%88%9D%E8%AF%86%E5%BA%8F%E5%88%97%E5%8C%96%E5%99%A8"},"\u521d\u8bc6\u5e8f\u5217\u5316\u5668")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"../apimachinery/client-go-and-apimachinery#client-go%E4%B8%AD%E7%9A%84%E5%85%A8%E5%B1%80scheme%E5%AF%B9%E8%B1%A1"},"kind\u7684\u6ce8\u518c\u539f\u7406")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"../apimachinery/gvk#%E5%86%8D%E8%AF%86kind"},"kind\u4e2d\u7684\u7279\u6b8a\u79cd\u7c7b"))))}m.isMDXComponent=!0}}]);