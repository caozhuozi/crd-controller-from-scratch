<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-apimachinery/serializer">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">åºåˆ—åŒ–å™¨ä¸åºåˆ—åŒ–å™¨å·¥å‚ | ã€Šä»é›¶å®ç°Kubernetesè‡ªå®šä¹‰æ§åˆ¶å™¨ã€‹</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://caozhuozi.github.io/crd-controller-from-scratch/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://caozhuozi.github.io/crd-controller-from-scratch/img/logo.png"><meta data-rh="true" property="og:url" content="https://caozhuozi.github.io/crd-controller-from-scratch/docs/apimachinery/serializer"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="åºåˆ—åŒ–å™¨ä¸åºåˆ—åŒ–å™¨å·¥å‚ | ã€Šä»é›¶å®ç°Kubernetesè‡ªå®šä¹‰æ§åˆ¶å™¨ã€‹"><meta data-rh="true" name="description" content="æˆ‘ä»¬åœ¨ä»Kubernetes APIè°ˆèµ·å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“kube-apiserveræ˜¯ç³»ç»Ÿç®¡ç†èµ„æºçš„å”¯ä¸€å¯¹å¤–äº¤äº’æ¥å£ã€‚"><meta data-rh="true" property="og:description" content="æˆ‘ä»¬åœ¨ä»Kubernetes APIè°ˆèµ·å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“kube-apiserveræ˜¯ç³»ç»Ÿç®¡ç†èµ„æºçš„å”¯ä¸€å¯¹å¤–äº¤äº’æ¥å£ã€‚"><link data-rh="true" rel="icon" href="/crd-controller-from-scratch/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://caozhuozi.github.io/crd-controller-from-scratch/docs/apimachinery/serializer"><link data-rh="true" rel="alternate" href="https://caozhuozi.github.io/crd-controller-from-scratch/docs/apimachinery/serializer" hreflang="en"><link data-rh="true" rel="alternate" href="https://caozhuozi.github.io/crd-controller-from-scratch/docs/apimachinery/serializer" hreflang="x-default"><link rel="stylesheet" href="/crd-controller-from-scratch/assets/css/styles.37df9119.css">
<link rel="preload" href="/crd-controller-from-scratch/assets/js/runtime~main.56e28771.js" as="script">
<link rel="preload" href="/crd-controller-from-scratch/assets/js/main.66bc2718.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#e6f6e6;color:#5f805b" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">ğŸ¥³v0.6.0-rc2 is released.ğŸ‰</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/crd-controller-from-scratch/"><div class="navbar__logo"><img src="/crd-controller-from-scratch/img/logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/crd-controller-from-scratch/img/logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/crd-controller-from-scratch/docs/intro">å¼€å§‹</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/caozhuozi/crd-controller-from-scratch" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/crd-controller-from-scratch/docs/intro">å‰è¨€</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/crd-controller-from-scratch/docs/apimachinery/apimachinery">apimachinery</a><button aria-label="Toggle the collapsible sidebar category &#x27;apimachinery&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/crd-controller-from-scratch/docs/apimachinery/kubernetes-api">ä»Kubernetes APIè°ˆèµ·</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/crd-controller-from-scratch/docs/apimachinery/gvk">GVK</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/crd-controller-from-scratch/docs/apimachinery/runtime.Object">runtime.Object</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/crd-controller-from-scratch/docs/apimachinery/kind-case-study">kindæ¡ˆä¾‹æ¢ç©¶</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/crd-controller-from-scratch/docs/apimachinery/serializer">åºåˆ—åŒ–å™¨ä¸åºåˆ—åŒ–å™¨å·¥å‚</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/crd-controller-from-scratch/docs/apimachinery/client-go-and-apimachinery">client-goä¸apimachinery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/crd-controller-from-scratch/docs/apimachinery/summary">æœ¬ç« å°ç»“</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/crd-controller-from-scratch/docs/client-go/client-go">client-go</a><button aria-label="Toggle the collapsible sidebar category &#x27;client-go&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/crd-controller-from-scratch/docs/putting-it-all-together/putting-it-all-together">putting it all together</a><button aria-label="Toggle the collapsible sidebar category &#x27;putting it all together&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/crd-controller-from-scratch/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/crd-controller-from-scratch/docs/apimachinery/apimachinery"><span itemprop="name">apimachinery</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">åºåˆ—åŒ–å™¨ä¸åºåˆ—åŒ–å™¨å·¥å‚</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>åºåˆ—åŒ–å™¨ä¸åºåˆ—åŒ–å™¨å·¥å‚</h1><p>æˆ‘ä»¬åœ¨<a href="/crd-controller-from-scratch/docs/apimachinery/kubernetes-api">ä»Kubernetes APIè°ˆèµ·</a>å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“<code>kube-apiserver</code>æ˜¯ç³»ç»Ÿç®¡ç†èµ„æºçš„å”¯ä¸€å¯¹å¤–äº¤äº’æ¥å£ã€‚
ä¸ç®¡æ˜¯å®¢æˆ·ç«¯ï¼Œè¿˜æ˜¯Kubernetesç³»ç»Ÿå†…éƒ¨å…¶ä»–ç»„ä»¶ï¼ˆ<code>kubelet</code>ç­‰ï¼‰å®ƒä»¬éƒ½åªèƒ½é€šè¿‡<code>kube-apiserver</code>ä½¿ç”¨HTTPå¯¹èµ„æºè¿›è¡Œç®¡ç†ã€‚</p><p>è€ŒHTTPé€šä¿¡çš„è¯·æ±‚ä½“/è¿”å›ä½“ï¼ˆ<em>Kubernetesèµ„æº</em>ï¼‰ä¸Kubernetesæºç ä¸­å¯¹åº”Goç±»å‹ï¼ˆ<em>kind</em>ï¼‰é—´çš„è½¬æ¢å¿…ç„¶æ¶‰åŠåˆ°åºåˆ—åŒ–/ååºåˆ—åŒ–ï¼ˆç¼–/è§£ç ï¼‰ã€‚
è€Œåœ¨Kubernetesæºç ä¸­ï¼Œ<code>apimachinery</code>åº“é™¤äº†æ˜¯Kubernetes APIç±»å‹ç³»ç»Ÿçš„åŸºçŸ³ï¼Œä¹Ÿæ‰¿è½½ç€å¯¹<em>Kubernetesèµ„æº</em>ç¼–/è§£ç çš„ä½¿å‘½ã€‚
<code>kube-apiserver</code>ï¼Œ<code>kubectl</code>ï¼Œ<code>client-go</code>ï¼Œ<code>kubelet</code>ç­‰ç»„ä»¶ã€å·¥å…·ä»¥åŠåº“éƒ½ä¾èµ–<code>apimachinery</code>åº“æ¥å¯¹èµ„æºè¿›è¡Œç¼–/è§£ç ã€‚</p><p>åœ¨æœ¬èŠ‚ä¸­æˆ‘ä»¬å°†æ·±å…¥ä»‹ç»ä¸€ä¸‹<code>apimachinery</code>åº“ä¸­çš„åºåˆ—åŒ–å™¨å’Œåºåˆ—åŒ–å·¥å‚ã€‚ å…¶å®<code>apimachinery</code>åº“ä¸ç¼–/è§£ç ç›¸å…³çš„é€»è¾‘ç›¸å¯¹å¤æ‚ã€‚
å› æ­¤ï¼Œä¸ºäº†å‡è½»è¯»è€…çš„è´Ÿæ‹…ä¹Ÿä¾¿äºè¯»è€…ç†è§£ï¼Œæˆ‘ä»¬ä¸ä¼šç…§æ¬å¤§æ®µæºç å¹¶åšè¡Œçº§åˆ«çš„è§£é‡Šã€‚
åœ¨æœ¬èŠ‚ä¸­æˆ‘ä»¬å°†ä½¿ç”¨æˆ‘ä»¬è®¤ä¸ºåˆé€‚çš„ç¼–æ’æ–¹å¼æ¥ä¸ºè¯»è€…æ­å¼€<code>apimachinery</code>ä¸­ç¼–/è§£ç ä½“ç³»çš„é¢çº±ã€‚</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>æ³¨</div><div class="admonitionContent_S0QG"><p>ä¸ºäº†ä¾¿äºè¯»è€…ç†è§£Kubernetesçš„ç¼–/è§£ç ä½“ç³»ï¼Œæœ¬å°èŠ‚æ¥ä¸‹æ¥çš„å†…å®¹åŸºäº<a href="https://github.com/kubernetes/kubernetes/tree/v1.2.0-alpha.7" target="_blank" rel="noopener noreferrer">Kubernetes v1.2.0-alpha.7</a>åŠå…¶ä¹‹å‰çš„ç‰ˆæœ¬ã€‚è¿™äº›ç‰ˆæœ¬æœ‰åŠ©äºæˆ‘ä»¬äº†è§£Kuberneteså¦‚ä»Šç›¸å¯¹å¤æ‚çš„ç¼–/è§£ä½“ç³»æ˜¯å¦‚ä½•ä¸€æ­¥æ­¥æ¼”åŒ–è€Œæ¥çš„ã€‚
å½¼æ—¶ï¼Œ<code>apimachinery</code>åº“è¿˜æ²¡æœ‰æ­£å¼ç‹¬ç«‹ï¼Œå½“æ—¶æ‰€æœ‰ç¼–/è§£ç é€»è¾‘è¿˜è€¦åˆåœ¨äº†<code>kubernetes</code>åº“å†…ã€‚</p><p>ç›´åˆ°<a href="https://github.com/kubernetes/kubernetes/tree/v1.6.0-alpha.1" target="_blank" rel="noopener noreferrer">Kubernetes v1.6.0-alpha.1</a>(<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> <a href="https://github.com/kubernetes/kubernetes/pull/39475" target="_blank" rel="noopener noreferrer">Pull Request #39475</a>)ï¼Œç¤¾åŒºæ‰æ­£å¼ç‹¬ç«‹å‡º<code>apimachinery</code>åº“ã€‚
åŸå…ˆ<code>kubernetes</code>åº“ä¸­ä¸APIç±»å‹ç³»ç»Ÿç›¸å…³çš„ä»£ç ï¼ˆåŒ…æ‹¬ç¼–/è§£ç é€»è¾‘ç­‰ï¼‰è¢«æ•´ä½“è¿ç§»åˆ°äº†<code>apimachinery</code>åº“ä¸­ã€‚</p><p>å¦å¤–ï¼Œä¸ºäº†å‡è½»è¯»è€…é˜…è¯»è´Ÿæ‹…ï¼Œæˆ‘ä»¬å°†é‡ç‚¹èšç„¦åœ¨Kubernetesçš„è§£ç é€»è¾‘ï¼Œä¸å†èµ˜è¿°ç¼–ç é€»è¾‘ã€‚</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="èµ„æºçš„å†…éƒ¨ç‰ˆæœ¬">èµ„æºçš„å†…éƒ¨ç‰ˆæœ¬<a href="#èµ„æºçš„å†…éƒ¨ç‰ˆæœ¬" class="hash-link" aria-label="Direct link to èµ„æºçš„å†…éƒ¨ç‰ˆæœ¬" title="Direct link to èµ„æºçš„å†…éƒ¨ç‰ˆæœ¬">â€‹</a></h2><p>åœ¨ä¹‹å‰<a href="/crd-controller-from-scratch/docs/apimachinery/kubernetes-api#%E5%88%9D%E8%AF%86kind">åˆè¯†kind</a>å°èŠ‚ï¼Œæˆ‘ä»¬å°±å·²ç»å¼ºè°ƒè¿‡ï¼Œæœ¬ä¹¦ä¸­æ‰€æåŠçš„åºåˆ—åŒ–/ååºåˆ—åŒ–ç‰¹æŒ‡<strong>åœ¨Kubernetesä¸Šä¸‹æ–‡ä¸­</strong>ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨Goè¯­è¨€ä¸­ï¼ŒJSONç¼–ç çš„å­—èŠ‚åºåˆ—ï¼ˆ<code>[]byte</code>ï¼‰ä¸Goç±»å‹ï¼ˆ<code>struct</code>ï¼‰ä¹‹é—´çš„è½¬æ¢å…¶å®ååˆ†ç®€å•ï¼Œåªè¦åˆ©ç”¨æ ‡å‡†åº“<code>encoding/json</code>çš„<code>json.Unmarshal</code>ä»¥åŠ<code>json.Marshal</code>å°±å¯ä»¥è½»æ¾å®Œæˆã€‚</p><p>è€Œåœ¨Kubernetesä¸­ï¼Œå¯¹èµ„æºçš„ç¼–/è§£ç è¿˜åŒ…æ‹¬ä¸€äº›ç‰¹æ®Šçš„æœºåˆ¶ï¼Œè¿™äº›ç‰¹æœ‰çš„æœºåˆ¶ä¹Ÿå¯¼è‡´äº†<code>apimachinery</code>åº“ä¸­ç¼–/è§£ç ç›¸å…³ä»£ç çš„å¤æ‚æ€§ã€‚</p><p>è€Œè¿™äº›ç‰¹æ®Šæœºåˆ¶çš„æœ¬è´¨æ¥è‡ªäºKubernetesçš„ä¸­ä¸€ä¸ªç‰¹æ®Šæ¦‚å¿µâ€”â€”èµ„æºçš„<em>å†…éƒ¨ç‰ˆæœ¬ï¼ˆinternal/hub versionï¼‰</em>ã€‚</p><p>æ‰€è°“èµ„æºçš„<em>å†…éƒ¨ç‰ˆæœ¬</em>æ˜¯æŒ‡èµ„æºåœ¨<code>kube-apiserver</code>ç»„ä»¶å†…å­˜ä¸­çš„è¡¨ç°å½¢å¼ã€‚
æˆ‘ä»¬å…ˆå‰åœ¨<a href="/crd-controller-from-scratch/docs/apimachinery/kubernetes-api#%E4%BB%8Ekubernetes-kind%E5%88%B0kubernetes%E8%B5%84%E6%BA%90%E5%86%8D%E8%AF%86kubernetes%E8%B5%84%E6%BA%90">å†è¯†Kubernetesèµ„æº</a>å°èŠ‚å·²ç»ä»‹ç»è¿‡èµ„æºåœ¨Kubernetesç³»ç»Ÿä¸­çš„ä¸åŒè¡¨ç°å½¢å¼ï¼Œå†…å­˜å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚
èµ„æºçš„å†…å­˜å½¢å¼æ˜¯æŒ‡Kubernetesç»„ä»¶ï¼ˆ<code>kube-apiserver</code>ï¼Œ<code>kubelet</code>ï¼Œ<code>kubectl</code>ç­‰ï¼‰åœ¨ååºåˆ—åŒ–JSONå/åºåˆ—åŒ–æˆJSONå‰çš„<em>kind</em>å®ä¾‹ï¼ˆinstanceï¼‰ã€‚è€Œå¯¹äºèµ„æºçš„<em>å†…éƒ¨ç‰ˆæœ¬</em>æ¥è¯´ï¼Œå®ƒç‰¹æŒ‡åœ¨<strong><code>kube-apiserver</code>ç»„ä»¶</strong>ä¸­çš„å†…å­˜å½¢å¼ã€‚</p><p>æˆ‘ä»¬åœ¨<a href="/crd-controller-from-scratch/docs/apimachinery/kubernetes-api">ä»Kubernetes APIè°ˆèµ·</a>ä»¥åŠ<a href="/crd-controller-from-scratch/docs/apimachinery/gvk">GVK</a>å°èŠ‚å·²ç»å¤šæ¬¡å¼ºè°ƒäº†èµ„æºç‰ˆæœ¬è¿™ä¸ªé‡è¦æ¦‚å¿µï¼Œä¸è¿‡èµ„æºçš„å¤šç‰ˆæœ¬å¯¹äº<code>kube-apiserver</code>æ¥è¯´ï¼Œè¿™å´æ˜¯ä¸€ä¸ªç›¸å½“æ£˜æ‰‹çš„é—®é¢˜ã€‚
<code>kube-apiserver</code>ä»å¤„ç†HTTPè¯·æ±‚å¼€å§‹åˆ°æœ€ç»ˆå°†èµ„æºå­˜å…¥<code>etcd</code>ä¸­è¿™ä¸­é—´æœ‰ä¸€ç³»åˆ—æ­¥éª¤æµç¨‹éœ€è¦å®Œæˆï¼Œè¿™ä¸åœ¨æœ¬ä¹¦çš„è®¨è®ºèŒƒå›´ä¹‹å†…ï¼Œå¯¹æ­¤è¿‡ç¨‹æ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥å‚è€ƒæ‰©å±•é˜…è¯»<a href="/crd-controller-from-scratch/docs/intro#%E6%89%A9%E5%B1%95%E9%98%85%E8%AF%BB">Kubernetes APIè¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸ</a>ã€‚
æ€»ä¹‹ï¼Œå¯¹äº<code>kube-apiserver</code>ç»„ä»¶æ¥è¯´ï¼Œå¦‚æœä¸é’ˆå¯¹èµ„æºçš„å¤šç‰ˆæœ¬æƒ…å†µåŠ ä»¥é¢å¤–å¤„ç†ï¼Œè¿™æ„å‘³ç€å®ƒéœ€è¦ä¸ºèµ„æºçš„æ¯ä¸ªç‰ˆæœ¬é‡å†™ç›¸åŒçš„é€»è¾‘ï¼Œè¿™æ˜¾ç„¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„æ–¹å¼ã€‚</p><p>å› æ­¤ï¼Œèµ„æºçš„<em>å†…éƒ¨ç‰ˆæœ¬</em>çš„æå‡ºæ˜¯ä¸ºäº†è§£å†³<code>kube-apiserver</code>åœ¨å¤„ç†èµ„æºå¤šç‰ˆæœ¬æ—¶çš„ç—›ç‚¹ã€‚ å…·ä½“æ¥è¯´ï¼Œ<code>kube-apiserver</code>åœ¨ååºåˆ—åŒ–HTTPè¯·æ±‚ä½“ä¸­çš„èµ„æºæ—¶ï¼Œä¼šå†å°†èµ„æºè½¬åŒ–ä¸º<em>å†…éƒ¨ç‰ˆæœ¬</em>è¿›è€Œå¯ä»¥<strong>ç»Ÿä¸€</strong>å¤„ç†ã€‚</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>èµ„æºå†…éƒ¨ç‰ˆæœ¬çš„å†å²</div><div class="admonitionContent_S0QG"><p>å…³äºèµ„æº<em>å†…éƒ¨ç‰ˆæœ¬</em>å¼•å…¥æœ€æ—©å¯ä»¥è¿½æº¯åˆ°<a href="https://github.com/kubernetes/kubernetes/pull/565" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Pull Request #565</a>ã€‚
<a href="https://github.com/kubernetes/kubernetes/pull/565" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Pull Request #565</a>é¦–æ¬¡å°†<code>apiVersion</code>å­—æ®µå¼•å…¥åˆ°<em>APIå¯¹è±¡</em><sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup>ä¸­ã€‚
æˆ‘ä»¬åœ¨<a href="/crd-controller-from-scratch/docs/apimachinery/kubernetes-api#api%E5%88%86%E7%BB%84group%E5%92%8C%E7%89%88%E6%9C%AC%E5%8C%96version">APIåˆ†ç»„å’Œç‰ˆæœ¬åŒ–</a>å°èŠ‚å°±ä»‹ç»äº†Kubernetesæºç è‡ªå…¬å¼€ä»¥æ¥APIå°±å¸¦æœ‰ç‰ˆæœ¬ä¿¡æ¯ã€‚ä½†æ˜¯ç›´åˆ°<a href="https://github.com/kubernetes/kubernetes/pull/565" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Pull Request #565</a>æ‰å°†APIç‰ˆæœ¬ä¿¡æ¯åŒæ—¶åµŒå…¥è¿›APIå¯¹è±¡ä¸­ã€‚
å½“æ—¶Kubernetes APIæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªç‰ˆæœ¬<code>v1beta1</code>ï¼Œ<code>kube-apiserver</code>æš´éœ²çš„æ‰€æœ‰APIçš„æ ¹è·¯å¾„ä¸º<code>api/v1beta1</code>ã€‚
åœ¨<a href="https://github.com/kubernetes/kubernetes/pull/565" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Pull Request #565</a>ä¸­ï¼Œ
ä½œè€…å¸Œæœ›HTTPè¯·æ±‚ä½“åŒæ ·å¸¦æœ‰ç‰ˆæœ¬ä¿¡æ¯ï¼Œä¾‹å¦‚:</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>å¤æ—©çš„Kubernetes APIè¯·æ±‚</summary><div><div class="collapsibleContent_i85q"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">POST /api/v1beta1/pods</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;test-pod&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;kind&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Pod&quot;</span><span class="token plain">,</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;apiVersion&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;v1beta1&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;desiredState&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;manifest&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;version&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;v1beta1&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;php&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;containers&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;nginx&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;image&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;dockerfile/nginx&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;ports&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;containerPort&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;hostPort&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;livenessProbe&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;enabled&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;initialDelaySeconds&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;httpGet&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;path&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/index.html&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;port&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;8080&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;labels&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;foo&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><p>è¿™æ ·åšçš„ç›®çš„æ˜¯èƒ½å¤Ÿå°†APIç‰ˆæœ¬å’ŒAPIå¯¹è±¡ä¸€ä¸€å¯¹åº”ï¼Œç‰¹åˆ«æ˜¯å°†æ¥åŒæ—¶å‡ºç°å¤šä¸ªAPIç‰ˆæœ¬çš„æ—¶å€™ã€‚</p><p>è€Œåœ¨<a href="https://github.com/kubernetes/kubernetes/pull/565" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Pull Request #565</a>ä¹‹å‰ï¼Œ<em>APIå¯¹è±¡</em>å´æ²¡æœ‰ç‰ˆæœ¬çš„æ¦‚å¿µã€‚
å½“æ—¶çš„APIå¯¹è±¡ä¹Ÿåªæœ‰é›¶æ˜Ÿçš„å‡ ä¸ªï¼Œå®ƒä»¬çš„Goç±»å‹è¢«ç»Ÿä¸€å®šä¹‰åœ¨<a href="https://github.com/kubernetes/kubernetes/blob/69c483f6205a2b35bea970917aadd155b8b492b1/pkg/api/types.go" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> <code>pkg/api/types.go</code></a>ä¸­ã€‚
åœ¨<a href="https://github.com/kubernetes/kubernetes/pull/565" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Pull Request #565</a>ä¸­ï¼Œä½œè€…å¼•å…¥<code>apiVersion</code>å­—æ®µçš„åŒæ—¶ï¼Œè¿˜ä¸“é—¨æ–°å»ºäº†ä¸€ä¸ªç›®å½•ï¼ˆåŒ…ï¼‰ï¼š<a href="https://github.com/kubernetes/kubernetes/tree/bf5ae4bb9ddea63847b229b300f1fc26c538a9d9/pkg/api/v1beta1" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> <code>pkg/api/v1beta1/</code></a>ï¼Œ
å¹¶å°†åŸæ¥<code>pkg/api/types.go</code>æ–‡ä»¶æ‹·ä¹Ÿè´åˆ°äº†<code>pkg/api/v1beta1/</code>ç›®å½•ä¸‹ã€‚è‡³æ­¤ï¼ŒKubernetesé¦–æ¬¡å‡ºç°äº†åŒæ—¶å­˜åœ¨<strong>ä¸¤ä¸ª</strong>ç‰ˆæœ¬çš„APIå¯¹è±¡çš„æƒ…å†µï¼š<code>v1beta1</code>ä»¥åŠåˆå§‹ç‰ˆæœ¬ï¼ˆå³ä¸å¸¦ç‰ˆæœ¬ä¿¡æ¯ï¼‰ã€‚ä¾‹å¦‚ï¼š<code>v1beta1.Pod</code>å’Œ<code>Pod</code>ã€‚ï¼ˆå½“ç„¶å®ƒä»¬ç›®å‰å”¯ä¸€çš„åŒºåˆ«æ˜¯<code>apiVersion</code>å­—æ®µä¸€ä¸ªä¸ºç©ºï¼Œå¦ä¸€ä¸ªåˆ™ä¸º<code>v1beta1</code>ã€‚ï¼‰
ä¸ºäº†å¤ç”¨åŸå…ˆå°±å·²ç»å­˜åœ¨çš„ä»£ç ï¼ˆè¿™äº›ä»£ç åŸºäº<code>pkg/api/types.go</code>ä¸­æ‰€å®šä¹‰çš„åˆå§‹APIå¯¹è±¡ï¼‰ï¼Œä½œè€…åŒæ—¶å¼•å…¥äº†<a href="https://github.com/kubernetes/kubernetes/blob/bf5ae4bb9ddea63847b229b300f1fc26c538a9d9/pkg/api/helper.go#L268" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> <code>internalize()</code></a>å‡½æ•°ï¼Œç”¨äºå°†æ‰€æœ‰<code>v1beta1</code>çš„APIå¯¹è±¡è½¬åŒ–ä¸ºåˆå§‹APIå¯¹è±¡ï¼šä¾‹å¦‚å°†<code>v1beta1.Pod</code>è½¬åŒ–ä¸º<code>Pod</code>ã€‚
è¿™æ­£å¼èµ„æºç‰ˆæœ¬è½¬åŒ–çš„é›å½¢ï¼Œè€Œ<code>pkg/api/types.go</code>ä¸­å®šä¹‰çš„åˆå§‹APIå¯¹è±¡åˆ™å¯ä»¥è®¤ä¸ºæ˜¯å……å½“äº†Kubernetes APIå¯¹è±¡çš„<strong>ç¬¬ä¸€ä¸ª</strong>å†…éƒ¨ç‰ˆæœ¬ã€‚</p><p>åœ¨è¿™ä¸ªPRä¸­ï¼Œ<a href="https://github.com/kubernetes/kubernetes/blob/bf5ae4bb9ddea63847b229b300f1fc26c538a9d9/pkg/api/helper.go#L268" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> <code>internalize()</code></a>å‡½æ•°è¿˜ååˆ†ç²—ç³™ï¼Œç”±äºå½“æ—¶APIå¯¹è±¡æœ¬èº«è¿˜ä¸å¤šï¼Œä½œè€…å‡ ä¹æšä¸¾äº†æ‰€æœ‰çš„è½¬æ¢ã€‚
åç»­çš„<a href="https://github.com/kubernetes/kubernetes/pull/672" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Pull Request #672</a>å¯¹<a href="https://github.com/lavalamp/kubernetes/blob/ce586c1448ad37fb31f915d2fbeced96fec2cd61/pkg/api/helper.go#L467" target="_blank" rel="noopener noreferrer"><code>internalize()</code></a>å‡½æ•°è¿›è¡Œäº†ä¼˜åŒ–ï¼Œç¤¾åŒºå¼€å‘è€…é¦–æ¬¡å¼•å…¥äº†&quot;ç‰ˆæœ¬è½¬åŒ–å‡½æ•°çš„æ³¨å†Œæœºåˆ¶&quot;ï¼š</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>ç‰ˆæœ¬è½¬æ¢å‡½æ•°çš„æ³¨å†Œæœºåˆ¶</summary><div><div class="collapsibleContent_i85q"><p>æ–°å¼•å…¥çš„<code>Converter</code>ç±»å‹æ˜¯ç‰ˆæœ¬è½¬æ¢å‡½æ•°çš„æ³¨å†Œæœºåˆ¶çš„è½½ä½“ï¼›</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">pkg/api/helper.go</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Converter knows how to convert one type to another.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Converter </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Map from the conversion pair to a function which can</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// do the conversion.</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    funcs </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">typePair</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">reflect</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Register registers a conversion func with the Converter. conversionFunc must take</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// two parameters, the input and output type.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">Converter</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Register</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">conversionFunc </span><span class="token keyword" style="color:#00009f">interface</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>Converter</code>ç»“æ„ä¸­çš„<code>funcs</code>æˆå‘˜å˜é‡æ˜¯è½¬æ¢å‡½æ•°çš„æ³¨å†Œè¡¨ã€‚<code>Converter</code>çš„<code>Register</code>å‡½æ•°ç”¨äºæ³¨å†Œè½¬åŒ–å‡½æ•°ï¼Œä¾‹å¦‚ï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Register</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">in </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">Pod</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> out </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">v1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Pod</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// conversion logic...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æœ‰äº†<code>Converter</code>ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å°†APIå¯¹è±¡ä¸åŒç‰ˆæœ¬é—´çš„è½¬åŒ–é€»è¾‘å°è£…æˆç‹¬ç«‹çš„å‡½æ•°ï¼Œç„¶åç»Ÿä¸€æ³¨å†Œè¿›<code>Converter</code>ä¸­ï¼Œ<code>internalize()</code>å‡½æ•°é€šè¿‡æŸ¥è¯¢æ­¤ç»“æ„çš„æ³¨å†Œè¡¨ç›´æ¥è°ƒç”¨ç›¸åº”çš„è½¬åŒ–å‡½æ•°æ¥å®ŒæˆAPIå¯¹è±¡ç‰ˆæœ¬çš„è½¬åŒ–ã€‚</p></div></div></details><p>å¯ä»¥è¯´<a href="https://github.com/kubernetes/kubernetes/pull/565" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Pull Request #565</a>ä¸<a href="https://github.com/kubernetes/kubernetes/pull/196" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Pull Request #196</a>ï¼ˆé¦–æ¬¡å°†<code>kind</code>å­—æ®µå¼•å…¥APIçš„JSON Schemaï¼‰ä¸€èµ·å¥ å®šäº†Kubernetes APIç±»å‹ç³»ç»Ÿçš„é›å½¢ã€‚</p></div></div><p>ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åªæ˜¯ä»‹ç»äº†<code>kube-apiserver</code>åœ¨æ¥å—åˆ°HTTPè¯·æ±‚åï¼Œä¼šå°†èµ„æºåºåˆ—åŒ–åè½¬åŒ–ä¸ºå…¶å†…éƒ¨ç‰ˆæœ¬ã€‚
å…¶å®åœ¨æ­¤ä¹‹åå†…éƒ¨ç‰ˆæœ¬è¿˜éœ€è¦å†è½¬åŒ–æˆå…¶<em>å­˜å‚¨ç‰ˆæœ¬</em>å­˜å…¥<code>etcd</code>ä¸­ã€‚
æ–‡æ¡£<a href="https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api_changes.md#operational-overview" target="_blank" rel="noopener noreferrer">API Changes <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg></a>é‡Œç®€å•æ¦‚æ‹¬äº†èµ„æºåœ¨ä¸€æ¬¡HTTPè¯·æ±‚é‡Œæ‰€è¦ç»å†çš„å„æ¬¡è½¬åŒ–ï¼š</p><blockquote><ol><li>A user POSTs a Pod object to /api/v7beta1/...</li><li>The JSON is unmarshalled into a v7beta1.Pod structure</li><li>Default values are applied to the v7beta1.Pod</li><li>The v7beta1.Pod is converted to an hub.Pod internal version</li><li>The hub.Pod is validated, and any errors are returned to the user</li><li>The hub.Pod is converted to a v6.Pod (because v6 is the latest stable version)</li><li>The v6.Pod is marshalled into JSON and written to etcd</li></ol></blockquote><p>é™¤æ­¤ä»¥å¤–ï¼Œåœ¨HTTPè¯·æ±‚è¿”å›æ—¶ï¼Œè¿˜éœ€è¦å†å°†å†…éƒ¨ç‰ˆæœ¬è½¬åŒ–ä¸ºå‘é€æ—¶çš„ç‰ˆæœ¬è¿”å›ç»™å®¢æˆ·ç«¯ã€‚è¿™ä¸ªåå‘è½¬åŒ–çš„è¿‡ç¨‹æˆ‘ä»¬ä¸å†èµ˜è¿°ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetesç¼–è§£ç ä½“ç³»æ¼”åŒ–å†å²">Kubernetesç¼–/è§£ç ä½“ç³»æ¼”åŒ–å†å²<a href="#kubernetesç¼–è§£ç ä½“ç³»æ¼”åŒ–å†å²" class="hash-link" aria-label="Direct link to Kubernetesç¼–/è§£ç ä½“ç³»æ¼”åŒ–å†å²" title="Direct link to Kubernetesç¼–/è§£ç ä½“ç³»æ¼”åŒ–å†å²">â€‹</a></h2><p>åœ¨æˆ‘çœ‹æ¥ï¼ŒKubernetesæ•´ä½“ç¼–/è§£ç ä½“ç³»çš„æ¼”åŒ–å’Œå½¢æˆå…±åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼š&quot;å¤ä»£&quot;ï¼Œ&quot;è¿‘ä»£&quot;<a href="https://github.com/kubernetes/kubernetes/pull/196" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Pull Request #196</a>ï¼Œ&quot;ç°ä»£&quot; <a href="https://github.com/kubernetes/kubernetes/pull/723" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Pull Request #723</a>ï¼Œ&quot;å½“ä»£&quot;<a href="https://github.com/kubernetes/kubernetes/pull/17922" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Pull Request #17922</a>
Codecæ—¶æœŸä¹Ÿæ­£æ˜¯<strong>ç°åœ¨</strong>Kubernetesæ‰€ä½¿ç”¨çš„ç¼–/è§£ç ä½“ç³»ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¤ä»£é˜¶æ®µ">å¤ä»£é˜¶æ®µ<a href="#å¤ä»£é˜¶æ®µ" class="hash-link" aria-label="Direct link to å¤ä»£é˜¶æ®µ" title="Direct link to å¤ä»£é˜¶æ®µ">â€‹</a></h3><p>æ‰€è°“&quot;å¤ä»£&quot;æ˜¯æŒ‡è‡ªKubernetesæºç å…¬å¸ƒå¼€å§‹ï¼Œç¼–/è§£ç ç”šè‡³è¿˜æœªå½¢æˆä½“ç³»çš„æ—¶æœŸï¼Œ<code>kube-apiserver</code>åœ¨HTTPè¯·æ±‚çš„handlerä¸­ç›´æ¥ä½¿ç”¨<code>json.Marshal</code>å®Œæˆåºåˆ—åŒ–ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è¿‘ä»£é˜¶æ®µ">è¿‘ä»£é˜¶æ®µ<a href="#è¿‘ä»£é˜¶æ®µ" class="hash-link" aria-label="Direct link to è¿‘ä»£é˜¶æ®µ" title="Direct link to è¿‘ä»£é˜¶æ®µ">â€‹</a></h3><p>&quot;è¿‘ä»£&quot;æ˜¯æŒ‡Kubernetesç¼–/è§£ç ä½“ç³»å¼€å§‹é€æ¸å½¢æˆçš„æ—¶æœŸã€‚è¿™ä¸ªæ—¶æœŸç¤¾åŒºå¼€å‘è€…ä¸ºKubernetesçš„ç¼–/è§£ç å¼•å…¥äº†ä¸€äº›å…³é”®æ€§çš„æœºåˆ¶ï¼Œè¿™äº›æœºåˆ¶ä¹Ÿä¸€ç›´è¢«æ²¿ç”¨è‡³ä»Šã€‚è¿™äº›æœºåˆ¶åŒ…æ‹¬ï¼š</p><ol><li><p><a href="https://github.com/kubernetes/kubernetes/pull/196" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Pull Request #196</a></p><p>ä¼´éšç€<code>kind</code>å­—æ®µå¼•å…¥APIç±»å‹çš„åŒæ—¶ï¼Œ<code>Encode()/Decode()</code>å‡½æ•°ç”¨äºæ›¿ä»£<code>json.Marshal()/json.Unmarshal</code>ä¹Ÿæ­£å¼è¿›å…¥Kubernetesæºç ä¸­ï¼Œ ç¼–/è§£ç ä½“ç³»å¼€å§‹å¤„äºèŒèŠ½é˜¶æ®µã€‚
å…·ä½“æ¥è¯´ï¼ŒPRä½œè€…å¼•å…¥äº†ä¸¤ä¸ªä¸ç¼–/è§£ç æœ‰å…³çš„æœºåˆ¶ï¼š</p><ul><li><p>&quot;æ™ºèƒ½æ¨æ–­&quot;æœºåˆ¶â€”â€”åœ¨è§£ç çš„åˆå§‹é˜¶æ®µæ ¹æ®JSONå­—èŠ‚åºåˆ—çš„<code>kind</code>å­—æ®µæå‰è·å–APIç±»å‹ä¿¡æ¯ï¼›</p><p>æˆ‘ä»¬åœ¨ä¹‹å‰<a href="/crd-controller-from-scratch/docs/apimachinery/runtime.Object#runtimescheme%E4%B8%8Ekind">runtime.Schemeä¸kind</a>å°èŠ‚åœ¨åªæ˜¯é¡ºå¸¦æåŠäº†è¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œå†å¤è¿°ä¸€ä¸‹å®ƒçš„åŸç†ï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">findKind </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Kind </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">`json:&quot;kind,omitempty&quot; yaml:&quot;kind,omitempty&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> yaml</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Unmarshal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">findKind</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åŸç†å…¶å®éå¸¸ç®€å•ï¼Œå…ˆåˆ›å»ºåªæœ‰ä¸€ä¸ª<code>Kind</code>å­—æ®µçš„ç©ºç»“æ„ä½“<code>findKind</code>ï¼Œå†å°è¯•å°†åŸå§‹å­—èŠ‚åºåˆ—<code>data</code>è§£ç ä¸º<code>findKind</code>ç»“æ„ï¼Œè¿™æ ·å°±å¯ä»¥ç‡å…ˆ&quot;æ•è·&quot;åŸå§‹å­—èŠ‚ä¸­åŒ…å«çš„<code>kind</code>ä¿¡æ¯ã€‚</p></li><li><p>&quot;APIç±»å‹æ³¨å†Œ&quot;æœºåˆ¶â€”â€”å°†æ‰€æœ‰çš„APIç±»å‹<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup>äº‹å…ˆæ³¨å†Œï¼Œåœ¨&quot;æ™ºèƒ½æ¨æ–­&quot;æœºåˆ¶è·å–APIç±»å‹ä¿¡æ¯åæŸ¥è¡¨ç›´æ¥è·å–APIç±»å‹ã€‚</p><p>æˆ‘ä»¬åœ¨ä¹‹å‰<a href="/crd-controller-from-scratch/docs/apimachinery/runtime.Object#runtimescheme%E4%B8%8Ekind">runtime.Schemeä¸kind</a>å°èŠ‚å·²ç»è¾ƒä¸ºå®Œæ•´åœ°ä»‹ç»è¿‡è¿™ä¸ªæœºåˆ¶ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä¸å†èµ˜è¿°ã€‚</p></li></ul></li></ol><ol start="2"><li><p><a href="https://github.com/kubernetes/kubernetes/pull/565" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Pull Request #565</a></p><p>ä¼´éšç€<code>apiVersion</code>å­—æ®µå¼•å…¥APIç±»å‹ï¼ŒAPIå¯¹è±¡çš„<em>å†…éƒ¨ç‰ˆæœ¬</em>çš„æ¦‚å¿µå¼€å§‹å‡ºç°ã€‚ç›¸åº”åœ°ï¼Œ&quot;ç‰ˆæœ¬è½¬åŒ–&quot;æœºåˆ¶ä¹Ÿå¼€å§‹æ­£å¼è¿›å…¥ç¼–/è§£ç æµç¨‹ã€‚</p></li><li><p><a href="https://github.com/kubernetes/kubernetes/pull/672" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Pull Request #672</a></p><p>åœ¨è¿™ä¸ªPRä¸­ï¼Œä½œè€…å¼•å…¥&quot;ç‰ˆæœ¬è½¬åŒ–å‡½æ•°æ³¨å†Œ&quot;æœºåˆ¶ï¼Œç”¨äºä¼˜åŒ–ç‰ˆæœ¬è½¬åŒ–æµç¨‹ï¼›</p></li></ol><p>åœ¨&quot;è¿‘ä»£&quot;é˜¶æ®µï¼Œæ‰€æœ‰ç¼–/è§£ç ä»£ç è¢«æ”¾ç½®åœ¨<code>pkg/api/helper.go</code>ä¸­â€”â€”è¿™è¯´æ˜ç¼–/è§£ç åœ¨å½“æ—¶å¹¶æœªå¼•èµ·ç¤¾åŒºè¶³å¤Ÿçš„é‡è§†ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç°ä»£é˜¶æ®µschemeå¤§ä¸€ç»Ÿæ—¶æœŸ">ç°ä»£é˜¶æ®µï¼ˆSchemeå¤§ä¸€ç»Ÿæ—¶æœŸï¼‰<a href="#ç°ä»£é˜¶æ®µschemeå¤§ä¸€ç»Ÿæ—¶æœŸ" class="hash-link" aria-label="Direct link to ç°ä»£é˜¶æ®µï¼ˆSchemeå¤§ä¸€ç»Ÿæ—¶æœŸï¼‰" title="Direct link to ç°ä»£é˜¶æ®µï¼ˆSchemeå¤§ä¸€ç»Ÿæ—¶æœŸï¼‰">â€‹</a></h3><p>&quot;ç°ä»£&quot;é˜¶æ®µæ˜¯æŒ‡ä»<a href="https://github.com/kubernetes/kubernetes/pull/723" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Pull Request #723</a>å¼€å§‹çš„æ—¶æœŸã€‚
åœ¨è¯¥PRä¸­ï¼Œä½œè€…å…¶å®æ²¡æœ‰å¼•å…¥æ–°çš„æœºåˆ¶æˆ–æ˜¯æ”¹åŠ¨åŸæ¥çš„ç¼–/è§£ç é€»è¾‘ï¼Œä½œè€…åªæ˜¯æŠŠåŸæ¥<code>pkg/api/helper.go</code>ä¸­åˆ†æ•£çš„ç¼–/è§£ç é€»è¾‘å’Œæœºåˆ¶æ•´ä½“è¿ç§»å¹¶å°è£…åˆ°äº†ä¸€ä¸ªå«åš<code>Scheme</code>çš„ç±»å‹ä¸­ã€‚åŒæ—¶åˆ é™¤äº†åŸå…ˆçš„<code>pkg/api/helper.go</code>æ–‡ä»¶ã€‚
æˆ‘ä»¬æŠŠ<a href="https://github.com/kubernetes/kubernetes/pull/723" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Pull Request #723</a>å•ç‹¬æå‡åˆ°ä¸€ä¸ªé˜¶æ®µçš„åŸå› æ˜¯ï¼šç»è¿‡æ•´ç†åçš„ç¼–/è§£ç ä»£ç é€»è¾‘å¼‚å¸¸æ¸…æ™°ï¼Œä¸€ä¸ª<code>Scheme</code>ç±»å‹å›Šæ‹¬äº†&quot;è¿‘ä»£&quot;é˜¶æ®µæ‰€æ–­æ–­ç»­ç»­å¼•å…¥çš„å„ä¸ªæœºåˆ¶ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Scheme defines an entire encoding and decoding scheme.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Scheme </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// versionMap allows one to figure out the go type of an object with</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// the given version and name.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    versionMap </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">reflect</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// converter stores all registered conversion functions. It also has</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// default coverting behavior.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    converter </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">Converter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// MetaInsertionFactory is used to create an object to store and retrieve</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// the version and kind information for all objects. The default uses the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// keys &quot;version&quot; and &quot;kind&quot; respectively.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MetaInsertionFactory MetaInsertionFactory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å…¶ä¸­ï¼š</p><ul><li><code>MetaInsertionFactory</code>æˆå‘˜ç”¨äº&quot;æ™ºèƒ½æ¨æ–­&quot;æœºåˆ¶ï¼›</li><li><code>versionMap</code>æˆå‘˜ç”¨äº&quot;APIç±»å‹æ³¨å†Œ&quot;æœºåˆ¶ï¼›</li><li><code>converter</code>æˆå‘˜ç”¨äº&quot;ç‰ˆæœ¬è½¬åŒ–&quot;ã€‚</li></ul><p>ä»¥ç»è¿‡æ•´ç†åçš„è§£ç å‡½æ•°ä¸ºä¾‹ï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">pkg/api/conversion/decode.go</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Decode converts a YAML or JSON string back into a pointer to an api object.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Deduces the type based upon the fields added by the MetaInsertionFactory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// technique. The object will be converted, if necessary, into the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// s.InternalVersion type before being returned. Decode will refuse to decode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// objects without a version, because that&#x27;s probably an error.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">Scheme</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">byte</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">interface</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    version</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> kind</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">DataVersionAndKind</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> version </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Errorf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;version not set in &#x27;%s&#x27;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    obj</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">version</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> kind</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// yaml is a superset of json, so we use it to decode here. That way,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// we understand both.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    err </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> yaml</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Unmarshal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Version and Kind should be blank in memory.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    err </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetVersionAndKind</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Convert if needed.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">InternalVersion </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> version </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        objOut</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">InternalVersion</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> kind</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        err </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">converter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Convert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> objOut</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        obj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> objOut</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è§£ç è¿‡ç¨‹å¯ä»¥æ¸…æ™°åœ°åˆ’åˆ†ä¸º5ä¸ªæ­¥éª¤ï¼š</p><ol><li><p>æ™ºèƒ½æ¨æ–­</p><p>è°ƒç”¨<code>DataVersionAndKind()</code>å‡½æ•°æ¨æ–­å­—èŠ‚åºåˆ—çš„<code>kind</code>å’Œ<code>apiVersion</code>ï¼ˆå½¼æ—¶ï¼ŒAPIåˆ†ç»„çš„æ¦‚å¿µè¿˜æ²¡æœ‰å‡ºç°ï¼‰ã€‚</p></li><li><p>åˆ›å»ºAPIå¯¹è±¡è½½ä½“</p><p>è·å–APIå¯¹è±¡çš„ç±»å‹å’Œç‰ˆæœ¬ä¿¡æ¯åï¼Œè°ƒç”¨<code>NewObject()</code>åˆ›å»ºä¸€ä¸ªå¯¹åº”ç±»å‹å’Œç‰ˆæœ¬çš„APIå¯¹è±¡çš„&quot;ç©ºè½½ä½“&quot;ã€‚</p></li><li><p>ååºåˆ—åŒ–</p><p>è°ƒç”¨<code>Unmarshal()</code>å°†å­—èŠ‚åºåˆ—åºåˆ—åŒ–åˆ°ä¸Šä¸€æ­¥åˆ›å»ºçš„APIå¯¹è±¡è½½ä½“ä¸­ï¼›</p></li><li><p>ç‰ˆæœ¬è½¬åŒ–</p><ul><li>è°ƒç”¨<code>SetVersionAndKind()</code>å‡½æ•°å°†APIå¯¹è±¡çš„<code>apiVersion</code>å’Œ<code>kind</code>å­—æ®µè‡³ç©º;</li><li>è°ƒç”¨<code>NewObject()</code>åˆ›å»ºAPIå¯¹è±¡çš„å†…éƒ¨ç‰ˆæœ¬çš„&quot;ç©ºè½½ä½“&quot;;</li><li>è°ƒç”¨<code>Convert()</code>å°†APIå¯¹è±¡è½¬åŒ–ä¸ºå…¶å†…éƒ¨ç‰ˆæœ¬ã€‚</li></ul></li><li><p>è¿”å›å†…éƒ¨ç‰ˆæœ¬</p></li></ol><p>å…¶ä¸­æœ‰ä¸€äº›ç»†èŠ‚éœ€è¦å•ç‹¬è¯´æ˜ï¼š</p><ul><li><p><code>Scheme</code>çš„<code>NewObject()</code>æ–¹æ³•ç”¨äºåˆ›å»ºç»™å®šç±»å‹å’Œç‰ˆæœ¬çš„APIå¯¹è±¡çš„ç©º&quot;è½½ä½“&quot;ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// NewObject returns a new object of the given version and name,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// or an error if it hasn&#x27;t been registered.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">Scheme</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NewObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">versionName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> typeName </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">interface</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> types</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ok </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">versionMap</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">versionName</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> ok </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> t</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ok </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> types</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">typeName</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> ok </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> reflect</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">New</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Interface</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Errorf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;No type &#x27;%v&#x27; for version &#x27;%v&#x27;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> typeName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> versionName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Errorf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;No version &#x27;%v&#x27;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> versionName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p> å…·ä½“å®ç°ä¸Šå®ƒéœ€è¦æŸ¥è¯¢<code>versionMap</code>è¿™å¼ è¡¨ï¼Œåªæœ‰åœ¨è¿™å¼ è¡¨ä¸­æ³¨å†Œè¿‡çš„APIç±»å‹æ‰èƒ½è¢«åˆ›å»ºã€‚</p></li><li><p><code>Scheme</code>çš„<code>DataVersionAndKind()</code>æ–¹æ³•ç”¨äº&quot;æ™ºèƒ½æ¨æ–­&quot;ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// DataAPIVersionAndKind will return the APIVersion and Kind of the given wire-format</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// enconding of an API Object, or an error.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">Scheme</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">DataVersionAndKind</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">byte</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">version</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> kind </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    findKind </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">MetaInsertionFactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// yaml is a superset of json, so we use it to decode here. That way,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// we understand both.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    err </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> yaml</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Unmarshal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> findKind</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Errorf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;couldn&#x27;t get version/kind: %v&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    version</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> kind </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">MetaInsertionFactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Interpret</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">findKind</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> version</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> kind</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨å®ç°ä¸Šå®ƒä¾èµ–äº<code>MetaInsertionFactory</code>æˆå‘˜ã€‚å…·ä½“çš„æ™ºèƒ½æ¨ç†è¿‡ç¨‹åŸç†åŸºæœ¬ä¸&quot;è¿‘ä»£&quot;é˜¶æ®µä¸€è‡´ï¼Œæˆ‘ä»¬ä¸å†èµ˜è¿°ã€‚</p></li></ul><p>ä¸‹å›¾æ€»ç»“äº†æ­¤æ—¶æœŸçš„è§£ç è¿‡ç¨‹ï¼ˆä¸åŒ…æ‹¬ç‰ˆæœ¬è½¬åŒ–ï¼‰ï¼š</p><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1287.677 221.693" width="1287.677" height="221.693" style="width:95%"><defs><style>@font-face{font-family:&quot;Virgil&quot;;src:url(https://excalidraw.com/Virgil.woff2)}@font-face{font-family:&quot;Cascadia&quot;;src:url(https://excalidraw.com/Cascadia.woff2)}</style></defs><g stroke-linecap="round"><path d="M185.034 62.122h940.11v149.57h-940.11" stroke-width="0" fill="#f9f7ed"></path><path d="M185.034 62.122h940.11m-940.11 0h940.11m0 0v149.57m0-149.57v149.57m0 0h-940.11m940.11 0h-940.11m0 0V62.122m0 149.57V62.122" stroke="#000" fill="none"></path></g><g fill-rule="evenodd" stroke-linecap="round"><path d="m184.36 61.485 51.22-51.22 942.97-.18-51.83 52.99-942.36-1.59" stroke-width="0" fill="#f9f7ed"></path><path d="m184.36 61.485 51.22-51.22m-51.22 51.22 51.22-51.22m0 0c347.03-.06 694.07-.13 942.97-.18m-942.97.18c377.04-.07 754.09-.14 942.97-.18m0 0c-10.82 11.06-21.63 22.12-51.83 52.99m51.83-52.99c-19.51 19.95-39.02 39.9-51.83 52.99m0 0c-298.1-.5-596.2-1.01-942.36-1.59m942.36 1.59c-279.91-.47-559.81-.94-942.36-1.59m0 0s0 0 0 0m0 0s0 0 0 0" stroke="#000" fill="none"></path></g><g fill-rule="evenodd" stroke-linecap="round"><path d="m1126.722 63.348-1.36 147.49 51.65-54.67 1.49-146.17-51.78 53.35" stroke-width="0" fill="#f9f7ed"></path><path d="M1126.722 63.348c-.3 32.82-.6 65.65-1.36 147.49m1.36-147.49c-.53 57.17-1.05 114.34-1.36 147.49m0 0c19.7-20.85 39.41-41.7 51.65-54.67m-51.65 54.67c20.07-21.24 40.14-42.48 51.65-54.67m0 0c.35-33.79.69-67.58 1.49-146.17m-1.49 146.17c.51-50.18 1.03-100.37 1.49-146.17m0 0c-12.49 12.87-24.98 25.74-51.78 53.35m51.78-53.35c-16.32 16.82-32.64 33.63-51.78 53.35m0 0s0 0 0 0m0 0s0 0 0 0" stroke="#000" fill="none"></path></g><path d="M190.357 210.575c12.006-13.774 24.006-27.541 48.832-56.017M241.688 155.24h932.81M237.87 10.854v143.65" stroke="#000" stroke-width="1.5" fill="none" stroke-dasharray="8 9" stroke-linecap="round"></path><g stroke-linecap="round"><path d="M254.88 113.372h136v60h-136" stroke-width="0" fill="#f2ffff"></path><path d="M254.88 113.372h136m-136 0h136m0 0v60m0-60v60m0 0h-136m136 0h-136m0 0v-60m0 60v-60" stroke="#000" fill="none"></path></g><text x="52.734" font-family="Cascadia, Segoe UI Emoji" font-size="20" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(270.146 131.372)">interpret</text><g fill-rule="evenodd" stroke-linecap="round"><path d="m254.673 112.535 18.61-19.94 134.47.16-16.9 21.35-136.18-1.57" stroke-width="0" fill="#f2ffff"></path><path d="M254.673 112.535c6.76-7.24 13.52-14.49 18.61-19.94m-18.61 19.94c3.9-4.18 7.8-8.36 18.61-19.94m0 0c49.66.06 99.32.12 134.47.16m-134.47-.16c45.52.06 91.04.11 134.47.16m0 0c-5.55 7.02-11.11 14.03-16.9 21.35m16.9-21.35c-3.98 5.04-7.97 10.07-16.9 21.35m0 0c-36.22-.42-72.45-.84-136.18-1.57m136.18 1.57c-27.48-.32-54.97-.64-136.18-1.57m0 0s0 0 0 0m0 0s0 0 0 0" stroke="#000" fill="none"></path></g><g fill-rule="evenodd" stroke-linecap="round"><path d="m391.562 113.511-.88 59.39 17.83-25.17.14-54.99-17.09 20.77" stroke-width="0" fill="#f2ffff"></path><path d="M391.562 113.511c-.34 23.08-.68 46.16-.88 59.39m.88-59.39c-.19 12.63-.37 25.25-.88 59.39m0 0c5.38-7.59 10.75-15.17 17.83-25.17m-17.83 25.17c6.94-9.79 13.87-19.58 17.83-25.17m0 0c.03-14.14.07-28.27.14-54.99m-.14 54.99c.04-18.3.09-36.6.14-54.99m0 0c-3.77 4.58-7.55 9.17-17.09 20.77m17.09-20.77c-6.74 8.19-13.48 16.38-17.09 20.77m0 0s0 0 0 0m0 0s0 0 0 0" stroke="#000" fill="none"></path></g><g stroke-linecap="round"><path d="M462.746 112.404h245v60h-245" stroke-width="0" fill="#f2ffff"></path><path d="M462.746 112.404h245m-245 0h245m0 0v60m0-60v60m0 0h-245m245 0h-245m0 0v-60m0 60v-60" stroke="#000" fill="none"></path></g><text font-family="Cascadia, Segoe UI Emoji" font-size="20" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(467.746 118.404)">check</text><text y="24" font-family="Cascadia, Segoe UI Emoji" font-size="20" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(467.746 118.404)">scheme</text><g fill-rule="evenodd" stroke-linecap="round"><path d="m462.796 112.512 18.61-19.94 243.54.82-17.29 21.3-244.86-2.18" stroke-width="0" fill="#f2ffff"></path><path d="M462.796 112.512c6.76-7.24 13.52-14.49 18.61-19.94m-18.61 19.94c3.9-4.18 7.8-8.36 18.61-19.94m0 0c89.94.3 179.88.61 243.54.82m-243.54-.82c82.44.28 164.89.56 243.54.82m0 0c-5.68 7-11.36 14-17.29 21.3m17.29-21.3c-4.08 5.02-8.15 10.05-17.29 21.3m0 0-244.86-2.18m244.86 2.18-244.86-2.18m0 0s0 0 0 0m0 0s0 0 0 0" stroke="#000" fill="none"></path></g><g fill-rule="evenodd" stroke-linecap="round"><path d="m708.031 113.982-.88 59.39 17.83-25.17.14-54.99-17.09 20.77" stroke-width="0" fill="#f2ffff"></path><path d="M708.031 113.982c-.34 23.08-.68 46.16-.88 59.39m.88-59.39c-.19 12.63-.37 25.25-.88 59.39m0 0c5.38-7.59 10.75-15.17 17.83-25.17m-17.83 25.17c6.94-9.79 13.87-19.58 17.83-25.17m0 0c.03-14.14.07-28.27.14-54.99m-.14 54.99c.04-18.3.09-36.6.14-54.99m0 0c-3.77 4.58-7.55 9.17-17.09 20.77m17.09-20.77c-6.74 8.19-13.48 16.38-17.09 20.77m0 0s0 0 0 0m0 0s0 0 0 0" stroke="#000" fill="none"></path></g><path d="M580.3 119.927h44.84m-44.84 0h44.84m0 0v17.77m0-17.77v17.77m0 0H580.3m44.84 0H580.3m0 0v-17.77m0 17.77v-17.77M625.036 119.85h53.14m-53.14 0h53.14m0 0v17.79m0-17.79v17.79m0 0h-53.14m53.14 0h-53.14m0 0v-17.79m0 17.79v-17.79M580.3 137.438h44.84m-44.84 0h44.84m0 0v15.83m0-15.83v15.83m0 0H580.3m44.84 0H580.3m0 0v-15.83m0 15.83v-15.83M625.036 137.438h53.14m-53.14 0h53.14m0 0v15.63m0-15.63v15.63m0 0h-53.14m53.14 0h-53.14m0 0v-15.63m0 15.63v-15.63M580.328 153.088h45m-45 0h45m0 0v13.66m0-13.66v13.66m0 0h-45m45 0h-45m0 0v-13.66m0 13.66v-13.66M625.066 153.088h53.14m-53.14 0h53.14m0 0v13.56m0-13.56v13.56m0 0h-53.14m53.14 0h-53.14m0 0v-13.56m0 13.56v-13.56" stroke="#000" fill="none" stroke-linecap="round"></path><text font-family="Cascadia, Segoe UI Emoji" font-size="15.359" fill="#5f3dc4" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(589.2 119.093)">gvk</text><text font-family="Cascadia, Segoe UI Emoji" font-size="15.359" fill="#0a11d3" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(633.422 119.708)">type</text><text font-family="Cascadia, Segoe UI Emoji" font-size="14.903" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(590.808 147.568)">...</text><text font-family="Cascadia, Segoe UI Emoji" font-size="14.903" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(639.841 147.341)">...</text><g stroke-linecap="round"><path d="M768.362 112.051h271v60h-271" stroke-width="0" fill="#f2ffff"></path><path d="M768.362 112.051h271m-271 0h271m0 0v60m0-60v60m0 0h-271m271 0h-271m0 0v-60m0 60v-60" stroke="#000" fill="none"></path></g><text font-family="Cascadia, Segoe UI Emoji" font-size="20" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(773.362 130.051)">unmarshal(   ,      )</text><g fill-rule="evenodd" stroke-linecap="round"><path d="m768.647 112.36 18.61-19.94 270.33.04-16.8 20.16-272.14-.26" stroke-width="0" fill="#f2ffff"></path><path d="M768.647 112.36c6.76-7.24 13.52-14.49 18.61-19.94m-18.61 19.94c3.9-4.18 7.8-8.36 18.61-19.94m0 0c99.83.02 199.66.03 270.33.04m-270.33-.04c91.51.01 183.03.03 270.33.04m0 0c-5.52 6.63-11.04 13.25-16.8 20.16m16.8-20.16c-3.96 4.76-7.92 9.51-16.8 20.16m0 0c-72.39-.07-144.78-.14-272.14-.26m272.14.26c-54.92-.05-109.85-.11-272.14-.26m0 0s0 0 0 0m0 0s0 0 0 0" stroke="#000" fill="none"></path></g><g fill-rule="evenodd" stroke-linecap="round"><path d="m1039.882 113.89-.88 59.39 17.83-25.17.32-54.87-17.27 20.65" stroke-width="0" fill="#f2ffff"></path><path d="M1039.882 113.89c-.34 23.08-.68 46.16-.88 59.39m.88-59.39c-.19 12.63-.37 25.25-.88 59.39m0 0c5.38-7.59 10.75-15.17 17.83-25.17m-17.83 25.17c6.94-9.79 13.87-19.58 17.83-25.17m0 0c.08-14.1.16-28.21.32-54.87m-.32 54.87c.11-18.26.21-36.52.32-54.87m0 0c-3.81 4.56-7.63 9.12-17.27 20.65m17.27-20.65c-6.81 8.14-13.62 16.28-17.27 20.65m0 0s0 0 0 0m0 0s0 0 0 0" stroke="#000" fill="none"></path></g><g stroke-linecap="round"><path d="M667.874 147.533c.29 12.29.57 24.59 1.11 47.64m0 0h299.12m0 0v-40.39" stroke="#0a11d3" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8"></path><path d="m968.104 154.783 6.34 13.59h-12.68l6.34-13.59" stroke-width="0" fill="#0a11d3" fill-rule="evenodd"></path><path d="M968.104 154.783c1.64 3.51 3.27 7.01 6.34 13.59m0 0h-12.68m0 0c1.91-4.08 3.81-8.16 6.34-13.59m0 0s0 0 0 0" stroke="#0a11d3" stroke-width="2.5" fill="none"></path></g><g stroke-linecap="round"><path d="M402.125 142.921c49.05.18 98.11.37 174.05.65" stroke="#5f3dc4" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8"></path><path d="m576.175 143.571-13.61 6.29.04-12.68 13.57 6.39" stroke-width="0" fill="#5f3dc4" fill-rule="evenodd"></path><path d="M576.175 143.571c-3.83 1.78-7.67 3.55-13.61 6.29m0 0c.01-2.67.02-5.34.04-12.68m0 0c4.5 2.12 9 4.24 13.57 6.39m0 0s0 0 0 0" stroke="#5f3dc4" stroke-width="2.5" fill="none"></path></g><text font-family="Cascadia, Segoe UI Emoji" font-size="20" fill="#5f3dc4" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(417.26 119.296)">gvk</text><g stroke-linecap="round"><path d="M10 143.574h240.88" stroke="#449b82" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8"></path><path d="m250.88 143.574-13.59 6.34v-12.68l13.59 6.34" stroke-width="0" fill="#449b82" fill-rule="evenodd"></path><path d="M250.88 143.574c-3.76 1.75-7.52 3.51-13.59 6.34m0 0v-12.68m0 0 13.59 6.34m0 0s0 0 0 0" stroke="#449b82" stroke-width="2.5" fill="none"></path></g><text font-family="Cascadia, Segoe UI Emoji" font-size="20" fill="#449b82" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(30.415 116.447)">data([]bytes)</text><g stroke-linecap="round"><path d="M201.814 140.001v-61.61m0 0h709.42m0 0c-.41 22.07-.83 44.14-1.1 58.77" stroke="#449b82" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8"></path><path d="m910.134 137.161-6.08-13.71 12.67.24-6.59 13.47" stroke-width="0" fill="#449b82" fill-rule="evenodd"></path><path d="M910.134 137.161c-1.27-2.86-2.54-5.72-6.08-13.71m0 0c4.28.08 8.57.16 12.67.24m0 0c-2.47 5.06-4.95 10.12-6.59 13.47m0 0s0 0 0 0" stroke="#449b82" stroke-width="2.5" fill="none"></path></g><text font-family="Cascadia, Segoe UI Emoji" font-size="16" fill="#449b82" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(890.409 132.152)">data</text><text font-family="Cascadia, Segoe UI Emoji" font-size="16" fill="#0a11d3" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(939.43 133.385)">&amp;Kind{}</text><g stroke-linecap="round"><path d="M1047.976 143.125h229.7" stroke="#0a11d3" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8"></path><path d="m1277.676 143.125-13.59 6.34v-12.68l13.59 6.34" stroke-width="0" fill="#0a11d3" fill-rule="evenodd"></path><path d="M1277.676 143.125c-4.47 2.09-8.94 4.17-13.59 6.34m0 0v-12.68m0 0c5.17 2.41 10.35 4.83 13.59 6.34m0 0s0 0 0 0" stroke="#0a11d3" stroke-width="2.5" fill="none"></path></g><text font-family="Cascadia, Segoe UI Emoji" font-size="20" fill="#0a11d3" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(1138.974 116.543)">&amp;Kind{}</text><text font-family="Cascadia, Segoe UI Emoji" font-size="20" style="white-space:pre" dominant-baseline="text-before-edge" transform="rotate(.025 -144470.343 2107413.874)" stroke-opacity="0.7" fill-opacity="0.7">Â©Xudong WangğŸ¤–ï¸ğŸˆ</text><text font-family="Cascadia, Segoe UI Emoji" font-size="20" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(582.078 23.302)">Serializer</text></svg><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å½“ä»£é˜¶æ®µ">å½“ä»£é˜¶æ®µ<a href="#å½“ä»£é˜¶æ®µ" class="hash-link" aria-label="Direct link to å½“ä»£é˜¶æ®µ" title="Direct link to å½“ä»£é˜¶æ®µ">â€‹</a></h3><p>Kuberneteså¦‚ä»Šä½¿ç”¨çš„ç¼–/è§£ç ä½“ç³»æ¥è‡ªäºä¸€æ¬¡é‡å¤§é‡æ„:ç›¸å…³ææ¡ˆ<a href="https://github.com/kubernetes/kubernetes/issues/7111" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Issues #7111</a>åŠå®ç°<a href="https://github.com/kubernetes/kubernetes/pull/17922" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Pull Request #17922</a>ã€‚</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>å½“æ—¶Kubernetesç‰ˆæœ¬å·²ç»æ¥è¾¾äº†<a href="https://github.com/kubernetes/kubernetes/tree/v1.2.0-alpha.7" target="_blank" rel="noopener noreferrer">v1.2.0-alpha.7</a>ï¼ŒKubernetes APIç±»å‹ç³»ç»Ÿï¼ˆ<em>èµ„æº</em>ï¼Œ<em>APIåˆ†ç»„</em>ï¼Œ<em>kind</em>ï¼Œ<code>runtime.Object</code>æ¥å£ï¼Œ<em>GVK</em>ç­‰ï¼‰å·²ç»åŸºæœ¬è¶‹å‘æˆç†Ÿã€‚
è€Œæ­¤å‰æˆ‘ä»¬æ‰€ä»‹ç»çš„ä¸‰ä¸ªé˜¶æ®µç”šè‡³éƒ½åœ¨Kubernetesä»“åº“æ‰“çš„ç¬¬ä¸€ä¸ªtag<a href="https://github.com/kubernetes/kubernetes/tree/v0.2" target="_blank" rel="noopener noreferrer">v0.2</a>ä¹‹å‰ã€‚</p></div></div><p>ç”±äº<a href="https://github.com/kubernetes/kubernetes/pull/17922" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Pull Request #17922</a>å¥ å®šäº†å¦‚ä»Šçš„Kubernetesç¼–/è§£ç ä½“ç³»ï¼Œå¹¶ä¸”åœ¨å†…å®¹ä¸Šè¿›è¡Œäº†å¤§é‡çš„é‡æ„ã€‚æˆ‘ä»¬å°†æŠŠå®ƒæ”¾åœ¨å•ç‹¬çš„å°èŠ‚ä»‹ç»ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="codecä½“ç³»">Codecä½“ç³»<a href="#codecä½“ç³»" class="hash-link" aria-label="Direct link to Codecä½“ç³»" title="Direct link to Codecä½“ç³»">â€‹</a></h2><p>åœ¨ææ¡ˆ<a href="https://github.com/kubernetes/kubernetes/issues/7111" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Issue #7111</a>ä¸­ï¼Œä½œè€…å†³å®šå°†<code>Scheme</code>è§£è€¦:</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>ææ¡ˆä¸­ä½œè€…å†³å®šè§£è€¦Schemeçš„åŠ¨æœº</summary><div><div class="collapsibleContent_i85q"><blockquote><p>A runtime.Scheme combines a few concepts:</p><ul><li>A registry of APIVersion -&gt; Kind string -&gt; Go object</li><li>A library of conversion routines which includes APIVersion -&gt; Go object as well as Go object -&gt; Go object</li><li>An encoding mechanism based around JSON</li></ul><p>In order to better support multiple API patterns grouped together (Kubernetes user API, Kubelet API, OpenShift API, future extension API) these assumptions will start to break down.</p></blockquote></div></div></details><p>åŒæ—¶ä½œè€…ä¹Ÿç»™å‡ºäº†é‡æ„çš„å¤§è‡´æ–¹å‘ä¸è¦è§£å†³çš„é—®é¢˜ï¼š</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>ææ¡ˆä¸­ä½œè€…åˆ—ä¸¾é‡æ„éœ€è¦è§£å†³çš„é—®é¢˜</summary><div><div class="collapsibleContent_i85q"><blockquote><p>Types of problems we want to solve:</p><ol><li>It should be possible to take arbitrary serialized data and convert it to a versioned Go struct - call this &quot;marshalling/unmarshalling&quot;. The interface for this is a <code>Codec</code>. There may be many codecs.<ol><li>Where possible, we want to reuse the underlying infrastructure for marshaling and unmarshalling that exists in go - &quot;encoding/json&quot; / &quot;encoding/gob&quot; / &quot;protobufs&quot; efficiently.</li><li>It&#x27;s likely that there exists one canonical &quot;marshaller&quot; for most objects, but there may be alternate mechanisms. For example, JSON is canonical for Kube, but we may occasionally want to marshal an annotated YAML object that has description comments for each field interleaved.</li><li>There are places where we want to convert <code>map[string]interface{}</code> (generic JSON object representation) or a <code>map[string][]string</code> (url.Values) into a versioned Go struct, which is dependent on a type of marshaling (i.e. following JSON rules, or Query parameter rules).</li></ol></li><li>It should be possible to convert a versioned Go struct into a different versioned Go struct (typically by going to an intermediate format) on the server. This is &quot;object versioning&quot;.<ol><li>&quot;Object versioning&quot; requires the registration of an object Kind into an APIVersion for a specific API group. This was the original intent of runtime.Scheme.</li></ol></li><li>It should be possible to convert arbitrary Go structs to different Go structs. This is &quot;conversion&quot;.<ol><li>Object versioning is a specific subset of conversion</li><li>We should try to make conversion less dependent on scheme?</li></ol></li></ol></blockquote></div></div></details><p>æ€»ç»“æ¥è¯´ï¼Œä½œè€…å†³å®šå°†ç¼–/è§£ç é€»è¾‘æ•´ä½“ä»<code>Scheme</code>ä¸­å‰¥ç¦»ï¼Œå¹¶ä¿ç•™<code>Scheme</code>ç±»å‹çš„&quot;APIç±»å‹æ³¨å†Œ&quot;æœºåˆ¶ï¼ŒåŒæ—¶å¯ç”¨<code>Codec</code>æ¦‚å¿µä¸“é—¨ç”¨äºè´Ÿè´£ç¼–/è§£ç ã€‚
å› æ­¤ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠKubernetes&quot;å½“ä»£&quot;ç¼–/è§£ç ä½“ç³»ç§°ä¸º&quot;Codecä½“ç³»&quot;ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ¥å£">æ¥å£<a href="#æ¥å£" class="hash-link" aria-label="Direct link to æ¥å£" title="Direct link to æ¥å£">â€‹</a></h3><p>åœ¨ä¸Šè¿°ææ¡ˆçš„å®ç°<a href="https://github.com/kubernetes/kubernetes/pull/17922" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Pull Request #17922</a>ä¸­ï¼Œä½œè€…é¦–å…ˆæŠ½è±¡äº†ä¸€ç³»åˆ—æ¥å£ï¼š<code>Encoder</code>ï¼Œ<code>Decoder</code>ï¼Œ<code>Codec</code>ï¼Œ <code>NegotiatedSerializer</code>ï¼š</p><ul><li><p><code>Encoder</code>â€”â€”<em>ç¼–ç å™¨</em>æ¥å£ï¼š</p><p> åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¸å…³æ³¨ç¼–ç è¿‡ç¨‹ã€‚</p></li><li><p><code>Decoder</code>â€”â€”<em>è§£ç å™¨</em>æ¥å£ï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Decoder </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Decode attempts to deserialize the provided data using either the innate typing of the scheme or the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// default kind, group, and version provided. It returns a decoded object as well as the kind, group, and</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// version from the serialized data, or an error. If into is non-nil, it will be used as the target type</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// and implementations may choose to use it rather than reallocating an object. However, the object is not</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// guaranteed to be populated. The returned object is not guaranteed to match into. If defaults are</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// provided, they are applied to the data by default. If no defaults or partial defaults are provided, the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// type of the into may be used to guide conversion decisions.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">Decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">byte</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> defaults </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">unversioned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GroupVersionKind</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> into Object</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Object</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">unversioned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GroupVersionKind</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>Decoder</code>æ¥å£æ‰€æè¿°çš„è§£ç å‡½æ•°ç­¾åä¸&quot;è¿‘ä»£&quot;å’Œ&quot;ç°ä»£&quot;é˜¶æ®µçš„è§£ç å‡½æ•°ç­¾åäº§ç”Ÿäº†è¾ƒå¤§çš„åŒºåˆ«ã€‚
&quot;è¿‘ä»£&quot;å’Œ&quot;ç°ä»£&quot;é˜¶æ®µæ‰€ç”¨çš„è§£ç å‡½æ•°ç­¾åå…¶å®é€šä¿—å¸¸è§ï¼š<code>func Decode(data []byte) (interface{}, error)</code>ã€‚
é™¤äº†åŸå§‹å­—èŠ‚åºåˆ—æ•°æ®<code>data</code>è¿™ä¸ªå‚æ•°ä»¥å¤–ï¼Œè¿˜éœ€è¦æä¾›<code>defaults</code>ä»¥åŠ<code>into</code>ä¸¤ä¸ªå‚æ•°ã€‚è¿™æ ·è®¾è®¡è§£ç æ–¹æ³•çš„åŠ¨æœºæ˜¯å¸¦æ¥äº†æ›´å¤šçš„çµæ´»æ€§ã€‚
PRä½œè€…å¸Œæœ›è§£ç å™¨ï¼š</p><ol><li>å¦‚æœè°ƒç”¨è€…å·²ç»é¢„å…ˆæä¾›äº†è§£ç åçš„<em>kind</em>&quot;ç©ºè½½ä½“&quot;ï¼ˆ<code>into</code>ï¼‰ï¼Œè§£ç å™¨åº”è¯¥å°½é‡ä½¿ç”¨è°ƒç”¨è€…æä¾›çš„è½½ä½“è€Œé¿å…åœ¨å†…å­˜ä¸­å†åˆ†é…ä¸€ä¸ªæ–°å¯¹è±¡ï¼›</li><li>é€šè¿‡åŸå§‹å­—èŠ‚åºåˆ—ï¼ˆ<code>data</code>ï¼‰åŒ…å«çš„GVKä¿¡æ¯ã€è°ƒç”¨è€…é»˜è®¤æä¾›çš„GVKä¿¡æ¯ï¼ˆ<code>defaults</code>ï¼‰ã€è°ƒç”¨è€…æä¾›çš„&quot;ç©ºè½½ä½“&quot;ï¼ˆ<code>into</code>ï¼‰ä¸­åŒ…å«çš„GVKä¿¡æ¯å…±åŒæ¨æ–­å‡ºä¸€ä¸ªå¯èƒ½çš„GVKã€‚</li></ol><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>æ³¨</div><div class="admonitionContent_S0QG"><p>è¿™æ ·è®¾è®¡çš„ä¸€ä¸ªå¥½å¤„æ˜¯å¯¹äºåŸå§‹å­—èŠ‚æ•°æ®ä¸¢å¤±æˆ–GVKä¿¡æ¯æ®‹ç¼ºçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨è€…æä¾›çš„GVKä¿¡æ¯ï¼ˆ<code>defaults</code>ï¼‰ç”šè‡³æ˜¯<code>into</code>çš„GVKä¿¡æ¯å…œåº•ã€‚
å½“ç„¶ï¼Œè¿™ç§çµæ´»æ€§ä¹Ÿå¸¦æ¥äº†å®ç°ä¸Šçš„ä¸æ–¹ä¾¿ã€‚å°¤å…¶æ˜¯åŸå§‹æ•°æ®åŒ…å«çš„å®é™…GVKä¿¡æ¯å’Œè°ƒç”¨è€…æä¾›çš„GVKä¿¡æ¯ä»¥åŠ<code>into</code>çš„GVKä¸ä¸€è‡´çš„æƒ…å†µã€‚
å› æ­¤åœ¨è§£ç å™¨æ¥å£çš„å®ç°ä¸­ï¼ˆä¾‹å¦‚æˆ‘ä»¬åç»­ä»‹ç»çš„<!-- -->[JSONåºåˆ—åŒ–å™¨]<!-- -->(# TODO: reference)ï¼‰ï¼Œæœ‰ç›¸å½“ä¸€éƒ¨åˆ†é€»è¾‘åœ¨å¤„ç†è¿™ç§æƒ…å½¢ã€‚</p></div></div></li></ul><ul><li><p><code>Codec</code>â€”â€”<em>ç¼–è§£ç¼–ç å™¨</em>æ¥å£ï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Codec defines methods for serializing and deserializing API objects.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Codec </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Decoder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Encoder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>Codec</code>æ¥å£æŠ½è±¡äº†å®ç°ç±»éœ€è¦åŒæ—¶å…·å¤‡ç¼–ç ä»¥åŠè§£ç èƒ½åŠ›ã€‚</p></li><li><p><code>NegotiatedSerializer</code>â€”â€”<em>åå•†åºåˆ—åŒ–å™¨</em>æ¥å£ï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// NegotiatedSerializer is an interface used for obtaining encoders, decoders, and serializers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// for multiple supported media types.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> NegotiatedSerializer </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">SupportedMediaTypes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">SerializerForMediaType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mediaType </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Serializer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">bool</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">EncoderForVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">serializer Serializer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> gv unversioned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GroupVersion</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> Encoder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">DecoderToVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">serializer Serializer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> gv unversioned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GroupVersion</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> Decoder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>PRä½œè€…ç”¨<em>Negotiated(åå•†)</em>å‘½åæ­¤æ¥å£çš„åŠ¨æœºæ­£å¼æ¥è‡ªäº<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Content_negotiation" target="_blank" rel="noopener noreferrer"><em>HTTPå†…å®¹åå•†ï¼ˆHTTP Content negotiationï¼‰</em></a>ã€‚
ç®€å•æ¥è¯´ï¼Œ<em>HTTPå†…å®¹åå•†</em>æ˜¯æŒ‡æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯&quot;åå•†&quot;è¿”å›èµ„æºçš„å…·ä½“è¡¨ç¤ºå½¢å¼çš„ä¸€ç§æœºåˆ¶ã€‚
ä¾‹å¦‚ï¼Œæ ¹æ®æ–‡æ¡£<a href="https://kubernetes.io/docs/reference/using-api/api-concepts" target="_blank" rel="noopener noreferrer">Kubernetes API Concepts <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:nonzero;fill:#326ce5;fill-opacity:1" d="M7.945 0c-.14.008-.28.043-.41.102L1.973 2.668c-.29.137-.5.39-.575.691L.028 9.13a.976.976 0 0 0 .202.86l3.852 4.624c.203.242.508.387.832.387l6.172-.004c.324 0 .633-.14.832-.383l3.852-4.625a.987.987 0 0 0 .203-.863l-1.375-5.766a1.01 1.01 0 0 0-.575-.691L8.461.102C8.3.027 8.12-.008 7.945 0Zm0 0"></path><path style="stroke:none;fill-rule:nonzero;fill:#fff;fill-opacity:1" d="M8 1.965c-.184 0-.332.16-.332.355v.012c0 .023-.004.059 0 .082.004.113.027.2.043.305.031.222.055.41.039.582a.382.382 0 0 1-.11.168l-.007.136c-.2.016-.403.043-.602.09a4.299 4.299 0 0 0-2.176 1.2l-.12-.082c-.06.007-.118.023-.196-.02a3.193 3.193 0 0 1-.45-.39c-.073-.079-.128-.153-.218-.227-.02-.016-.05-.04-.074-.055a.411.411 0 0 0-.235-.086.328.328 0 0 0-.265.113c-.113.141-.074.352.082.477h.008c.02.02.047.04.066.055.098.066.184.101.277.156.2.117.364.219.497.336.05.055.058.144.066.187l.105.09a4.057 4.057 0 0 0-.68 2.903l-.136.039c-.039.046-.09.117-.144.14-.172.051-.364.07-.598.094-.11.008-.203.004-.32.023a.554.554 0 0 1-.086.02l-.004.004h-.004c-.2.047-.324.219-.281.39.039.172.23.278.43.235h.007c.031-.008.063-.012.086-.02.117-.03.2-.074.3-.109.22-.078.403-.14.583-.168.074-.004.152.047.191.066l.145-.023a4.207 4.207 0 0 0 1.918 2.316l-.059.141c.02.055.047.129.027.18-.062.164-.175.336-.3.523-.059.09-.121.156-.176.258-.016.023-.031.062-.043.086-.086.18-.024.383.14.457.165.078.372-.004.458-.18h.003c.012-.027.028-.058.04-.082.046-.105.062-.195.097-.297.086-.215.137-.437.258-.578.031-.039.086-.05.145-.066l.074-.133a4.385 4.385 0 0 0 3.07.008c.024.035.063.105.074.125.055.015.117.027.168.097.09.153.153.329.23.543.032.102.048.188.094.293l.043.082c.09.18.293.262.461.184.164-.078.227-.281.141-.457-.012-.027-.031-.063-.043-.086-.055-.102-.117-.168-.18-.258-.125-.191-.23-.347-.293-.511-.027-.083.004-.133.024-.188-.012-.016-.04-.094-.055-.129a4.21 4.21 0 0 0 1.918-2.336c.043.008.117.02.145.027.05-.035.093-.074.183-.066.18.024.364.086.582.164.102.035.184.082.301.11.023.007.059.011.086.02h.004c.004 0 .004 0 .004.003.199.039.39-.066.43-.238.042-.172-.083-.344-.282-.39-.027-.009-.066-.017-.094-.024-.117-.02-.21-.016-.32-.024a3.314 3.314 0 0 1-.598-.094c-.07-.027-.12-.105-.144-.14l-.133-.04a4.065 4.065 0 0 0-.695-2.895c.035-.026.101-.085.117-.1.008-.059.004-.118.063-.18.132-.121.296-.219.496-.34.093-.05.183-.086.277-.152.023-.016.05-.043.074-.059.16-.125.195-.336.082-.472-.117-.141-.336-.153-.496-.032-.023.02-.055.04-.074.059-.09.074-.145.148-.223.223a2.991 2.991 0 0 1-.445.394c-.066.035-.16.024-.203.02l-.13.09a4.415 4.415 0 0 0-2.76-1.294 2.321 2.321 0 0 1-.009-.14c-.043-.043-.097-.074-.109-.164-.016-.172.008-.36.04-.582.015-.106.038-.192.042-.305.004-.027 0-.066 0-.094 0-.195-.148-.355-.332-.355Zm-.418 2.492-.098 1.688-.007.003a.292.292 0 0 1-.293.274.282.282 0 0 1-.172-.055h-.004l-1.434-.98a3.459 3.459 0 0 1 1.653-.867c.12-.028.238-.047.355-.063Zm.836 0a3.52 3.52 0 0 1 1.992.93l-1.422.976-.004-.004a.302.302 0 0 1-.402-.05.3.3 0 0 1-.066-.164ZM5.055 6.02l1.308 1.128v.008a.27.27 0 0 1 .035.387.28.28 0 0 1-.152.098v.007l-1.676.465a3.214 3.214 0 0 1 .485-2.093Zm5.879 0a3.262 3.262 0 0 1 .5 2.09L9.75 7.64v-.007a.282.282 0 0 1-.21-.336.306.306 0 0 1 .093-.152ZM7.73 7.234h.536l.336.403-.122.5-.48.226-.484-.226-.118-.5ZM9.45 8.61c.023 0 .046.004.066.008l.004-.004 1.734.282a3.347 3.347 0 0 1-1.39 1.683l-.673-1.57h.004c-.062-.14 0-.301.14-.367a.289.289 0 0 1 .114-.032Zm-2.915.008c.133.004.254.09.285.223a.285.285 0 0 1-.02.172l.009.008-.668 1.554a3.372 3.372 0 0 1-1.383-1.672l1.719-.285.003.004c.02-.004.04-.004.055-.004Zm1.453.68a.28.28 0 0 1 .137.031c.059.027.105.07.133.121h.008l.847 1.477a3.586 3.586 0 0 1-2.219 0l.844-1.477h.004a.29.29 0 0 1 .246-.152Zm0 0"></path></svg></a>ï¼Œ<code>kube-apiserver</code>é™¤äº†æ”¯æŒè¿”å›èµ„æºçš„JSONç¼–ç æ ¼å¼å¤–ï¼Œä¹Ÿæ”¯æŒè¿”å›èµ„æºçš„protobufç¼–ç æ ¼å¼ï¼š</p><blockquote><p><a href="https://kubernetes.io/docs/reference/using-api/api-concepts/#alternate-representations-of-resources" target="_blank" rel="noopener noreferrer">Alternate representations of resources</a></p><p>List all of the pods on a cluster in Protobuf format.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET /api/v1/pods</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">Accept: application/vnd.kubernetes.protobuf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> OK</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">Content-Type: application/vnd.kubernetes.protobuf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. binary encoded PodList object</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></blockquote><p>å› æ­¤ï¼Œ<em>åå•†åºåˆ—åŒ–å™¨</em>æ¥å£æ‰€è¦æŠ½è±¡çš„èƒ½åŠ›æ˜¯æ”¯æŒåŒæ—¶å¯¹å¤šç§æ•°æ®æ ¼å¼çš„ç¼–/è§£ç ã€‚æ­£å¦‚ä½œè€…åœ¨ææ¡ˆ<a href="https://github.com/kubernetes/kubernetes/issues/7111" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Issue #7111</a>ä¸­æè¿°çš„é‚£æ ·ï¼š</p><blockquote><p>It&#x27;s likely that there exists one canonical &quot;marshaller&quot; for most objects, but there may be alternate mechanisms. For example, JSON is canonical for Kube, but we may occasionally want to marshal an annotated YAML object that has description comments for each field interleaved.</p></blockquote><p>å…·ä½“æ¥è¯´ï¼š</p><ul><li><code>SupportedMediaTypes()</code>æè¿°äº†å®ç°ç±»éœ€è¦è¿”å›æ­¤åºåˆ—åŒ–å™¨æ”¯æŒçš„æ‰€æœ‰ç¼–ç æ ¼å¼ï¼›</li><li><code>SerializerForMediaType()</code>æè¿°äº†å®ç°ç±»å¯ä»¥æ ¹æ®æŒ‡å®šçš„ç¼–ç æ ¼å¼è¿”å›å¯¹åº”çš„åºåˆ—åŒ–å™¨ï¼›</li></ul><p><em>åå•†åºåˆ—åŒ–å™¨</em>é™¤äº†å¯ä»¥&quot;åå•†&quot;ç¼–ç æ ¼å¼ä»¥å¤–ï¼Œ<strong>å®ƒçš„å¦ä¸€ä¸ªç‰¹ç‚¹æ˜¯æ”¯æŒ&quot;åå•†&quot;ç‰ˆæœ¬è½¬åŒ–æ—¶çš„ç›®æ ‡ç‰ˆæœ¬</strong>ã€‚
æˆ‘ä»¬ç°åœ¨å·²ç»çŸ¥é“ç¼–/è§£ç ä½“ç³»çš„&quot;ç°ä»£&quot;é˜¶æ®µï¼Œç¼–/è§£ç æ—¶é»˜è®¤è½¬åŒ–ä¸ºå…¶å†…éƒ¨ç‰ˆæœ¬ã€‚è€Œåœ¨è¿™æ¬¡é‡æ„ä¸­ï¼Œä½œè€…å†³å®šæ”¯æŒä»»æ„ä¸åŒç‰ˆæœ¬ä¹‹é—´çš„è½¬åŒ–ï¼Œæ­£å¦‚ä½œè€…åœ¨ææ¡ˆ<a href="https://github.com/kubernetes/kubernetes/issues/7111" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Issue #7111</a>ä¸­æè¿°çš„é‚£æ ·ï¼š</p><blockquote><p>It should be possible to convert a versioned Go struct into a different versioned Go struct (typically by going to an intermediate format) on the server.
This is &quot;object versioning&quot;.</p></blockquote><p>å…·ä½“æ¥è¯´:</p><ul><li><code>EncoderForVersion()/DecoderToVersion()</code>è¡¨ç¤ºå®ç°ç±»å¯ä»¥æ ¹æ®æŒ‡å®šçš„ç›®æ ‡ç‰ˆæœ¬è¿”å›ä¸€ä¸ªä¸“é—¨è½¬åŒ–ä¸ºè¯¥ç›®æ ‡ç‰ˆæœ¬çš„ç¼–è§£ç å™¨ï¼›</li></ul></li></ul><p>  å¦å¤–ï¼Œç›¸æ¯”äºä¹‹å‰çš„å‡ ä¸ªæ¥å£åå‘åº•å±‚ï¼Œ<em>åå•†åºåˆ—åŒ–å™¨</em>æ¥å£å·²ç»æ˜¯<strong>åº”ç”¨å±‚</strong>çº§åˆ«çš„å°è£…ã€‚
<code>client-go</code>ä½œä¸ºå®¢æˆ·ç«¯åº“ï¼Œå®ƒæ‰€ä½¿ç”¨çš„ç¼–è§£ç å™¨æ­£æ˜¯åå•†åºåˆ—åŒ–å™¨ã€‚<a href="/crd-controller-from-scratch/docs/intro#%E7%BA%A6%E5%AE%9A">ğŸˆ</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å®ç°">å®ç°<a href="#å®ç°" class="hash-link" aria-label="Direct link to å®ç°" title="Direct link to å®ç°">â€‹</a></h3><p>ä»‹ç»å®Œæ¥å£ä¹‹åï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥çœ‹ä½œè€…æ˜¯å¦‚ä½•å®ç°è¿™äº›æ¥å£çš„ã€‚</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="jsonåºåˆ—åŒ–å™¨">JSONåºåˆ—åŒ–å™¨<a href="#jsonåºåˆ—åŒ–å™¨" class="hash-link" aria-label="Direct link to JSONåºåˆ—åŒ–å™¨" title="Direct link to JSONåºåˆ—åŒ–å™¨">â€‹</a></h4><p>ä½œè€…åœ¨<a href="https://github.com/kubernetes/kubernetes/pull/17922" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Pull Request #17922</a>ä¸­åŒæ—¶æä¾›äº†JSONå’ŒYAMLä¸¤ç§åºåˆ—åŒ–å™¨çš„å®ç°ã€‚</p><p>æˆ‘ä»¬ä»¥JSONç¼–è§£ç å™¨ä¸ºä¾‹ï¼Œå®ƒå®ç°çš„æ¥å£æ˜¯<code>Codec</code>ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Serializer </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    meta    MetaFactory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    creater runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ObjectCreater</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    typer   runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Typer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    yaml    </span><span class="token builtin">bool</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pretty  </span><span class="token builtin">bool</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å…¶ä¸­ï¼Œ</p><ul><li><code>meta</code>æˆå‘˜ç”¨äº&quot;æ™ºèƒ½æ¨æ–­&quot;ï¼Œå®ƒæ¼”åŒ–äº&quot;ç°ä»£&quot;æ—¶æœŸçš„<code>MetaInsertionFactory</code>ã€‚</li><li><code>creater</code>æˆå‘˜ç”¨äºæ ¹æ®ç»™å®šçš„GVKä¸‰å…ƒç»„åˆ›å»ºå¯¹åº”<em>kind</em>ï¼ˆç©ºï¼‰å®ä¾‹ã€‚</li><li><code>typer</code>æˆå‘˜ç”¨äºåˆ¤å®šä¸€ä¸ªç»™å®šçš„APIå¯¹è±¡æ˜¯å¦æ³¨å†Œè¿‡ã€‚</li></ul><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>æ³¨</div><div class="admonitionContent_S0QG"><p>å°½ç®¡åœ¨ææ¡ˆ<a href="https://github.com/kubernetes/kubernetes/issues/7111" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Issue #7111</a>ä¸­ï¼Œä½œè€…è™½ç„¶å†³å®šæŠŠç¼–/è§£ç é€»è¾‘ä»<code>Scheme</code>ç±»å‹ä¸­å‰¥ç¦»ï¼Œä½†æ˜¯ä½œè€…ä»ç„¶æœ‰æ„ä¿ç•™äº†<code>Scheme</code>&quot;APIå¯¹è±¡æ³¨å†Œ&quot;æœºåˆ¶ã€‚æ­£å¦‚ä½œè€…æåˆ°çš„é‚£æ ·ï¼š</p><blockquote><p>&quot;Object versioning&quot; requires the registration of an object Kind into an APIVersion for a specific API group.
This was the original intent of runtime.Scheme.</p></blockquote><p>ä»<a href="https://github.com/kubernetes/kubernetes/pull/17922" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Pull Request #17922</a>ä¹‹åï¼Œ<code>Scheme</code>ç±»å‹ä»…ä»…è¢«ç”¨äºï¼š</p><ul><li>æ³¨å†Œæ‰€æœ‰çš„<em>kind</em>ï¼ˆAPIå¯¹è±¡ï¼‰ï¼›</li><li>åˆ¤å®šç»™å®šçš„<em>kind</em>ï¼ˆAPIå¯¹è±¡ï¼‰æ˜¯å¦æ³¨å†Œï¼›</li><li>æ ¹æ®ç»™å®šçš„GVKä¸‰å…ƒç»„åˆ›å»ºå¯¹åº”<em>kind</em>ï¼ˆAPIå¯¹è±¡ï¼‰çš„ç©ºå®ä¾‹ï¼ˆ&quot;è½½ä½“&quot;ï¼‰ã€‚</li></ul><p>æ‰€ä»¥åœ¨Kubernetesæºç ä¸­ï¼ŒJSONåºåˆ—åŒ–å™¨åœ¨åˆå§‹åŒ–<code>creater</code>ï¼Œ<code>typer</code>æˆå‘˜æ—¶ä½¿ç”¨çš„æ˜¯<code>Scheme</code>å¯¹è±¡ã€‚<strong>æ‰€ä»¥JSONåºåˆ—åŒ–å™¨ä»ç„¶ä¾èµ–<code>Scheme</code>çš„æ³¨å†Œæœºåˆ¶å·¥ä½œ</strong>ã€‚</p></div></div><p>æˆ‘ä»¬ä»…å…³æ³¨å®ƒçš„è§£ç è¿‡ç¨‹ï¼š</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>æ³¨</div><div class="admonitionContent_S0QG"><p>ä¸ºäº†å‡è½»è¯»è€…çš„è´Ÿæ‹…ä¹Ÿä¾¿äºè¯»è€…ç†è§£ï¼ŒåŒæ—¶ä¹Ÿä¸ºäº†èšç„¦ååºåˆ—åŒ–é€»è¾‘çš„ä¸»å¹²æ­¥éª¤ï¼Œä¸‹é¢çš„ä»£ç çœç•¥äº†ä¸€äº›ç»†ææœ«èŠ‚ã€‚</p></div></div><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Decode attempts to convert the provided data into YAML or JSON, extract the stored schema kind, apply the provided default gvk, and then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// load that data into an object matching the desired schema kind or the provided into. If into is *runtime.Unknown, the raw data will be</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// extracted and no decoding will be performed. If into is not registered with the typer, then the object will be straight decoded using</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// normal JSON/YAML unmarshalling. If into is provided and the original data is not fully qualified with kind/version/group, the type of</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// the into will be used to alter the returned gvk. On success or most errors, the method will return the calculated schema kind.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">Serializer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">originalData </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">byte</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> gvk </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">unversioned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GroupVersionKind</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> into runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Object</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Object</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">unversioned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GroupVersionKind</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> originalData</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    actual</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">meta</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Interpret</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> gvk </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// apply kind and version defaulting from provided default</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">actual</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Kind</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            actual</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Kind </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Kind</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">actual</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Version</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">actual</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Group</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            actual</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Group </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Group</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            actual</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">actual</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Version</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> actual</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Group </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Group </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            actual</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> into </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        typed</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">typer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ObjectKind</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">into</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">IsNotRegisteredError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> codec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewDecoderBytes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">codec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">JsonHandle</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">into</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> actual</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> into</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> actual</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> actual</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">default</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">actual</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Kind</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                actual</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Kind </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> typed</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Kind</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">actual</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Version</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">actual</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Group</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                actual</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Group </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> typed</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Group</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                actual</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> typed</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">actual</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Version</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> actual</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Group </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> typed</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Group </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                actual</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> typed</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">actual</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Kind</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> actual</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewMissingKindErr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">originalData</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">actual</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Version</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> actual</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewMissingVersionErr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">originalData</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// use the target if necessary</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    obj</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">UseOrCreateObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">typer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">creater</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">actual</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> into</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> actual</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> codec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewDecoderBytes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">codec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">JsonHandle</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> actual</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> actual</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>JSONåºåˆ—åŒ–å™¨çš„è§£ç è¿‡ç¨‹å¯ä»¥å¤§è‡´åˆ’åˆ†ä¸º5ä¸ªæ­¥éª¤ï¼š</p><ol><li><p>æ™ºèƒ½æ¨æ–­</p><p>è·å–åŸå§‹å­—èŠ‚åºåˆ—ï¼ˆ<code>originalData</code>ï¼‰ä¸­çš„GVKä¿¡æ¯ã€‚</p></li><li><p><strong>å…±åŒ</strong>æ¨æ–­</p><p>åˆ©ç”¨<code>originalData</code>ã€<code>gvk</code>ã€<code>into</code>ä¸­çš„GVKä¿¡æ¯å…±åŒæ¨æ–­å‡ºä¸€ä¸ªGKVä¸‰å…ƒç»„ã€‚
è¡¥å…¨é¡ºåºä¸ºåŸå§‹å­—èŠ‚æ•°æ®åŒ…å«çš„GVKä¿¡æ¯ä¼˜å…ˆäºè°ƒç”¨è€…ç»™å®šçš„GVKä¿¡æ¯ï¼ˆå‚æ•°<code>gvk</code>ï¼‰ä¼˜å…ˆäºè°ƒç”¨è€…æä¾›çš„ç›®æ ‡å¯¹è±¡è½½ä½“ï¼ˆå‚æ•°<code>into</code>ï¼‰ã€‚</p></li><li><p>åˆ›å»º/å¤ç”¨&quot;è½½ä½“&quot;</p><p>è°ƒç”¨<code>UseOrCreateObject</code>åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡&quot;è½½ä½“&quot;æˆ–è€…ä½¿ç”¨è°ƒç”¨è€…æä¾›çš„<code>into</code>ä½œä¸º&quot;è½½ä½“&quot;ã€‚
å…·ä½“è§„åˆ™ä¸ºï¼šå¦‚æœå…±åŒæ¨æ–­å‡ºçš„GVKä¸‰å…ƒç»„ä¸<code>into</code>æ‰€æºå¸¦çš„GVKä¿¡æ¯ä¸åŒ¹é…ï¼Œé‚£ä¹ˆå°†ä¼šåˆ›å»ºå‡ºä¸€ä¸ªä¸æ¨æ–­GVKåŒ¹é…çš„å¯¹è±¡åšä¸ºç›®æ ‡&quot;è½½ä½“&quot;ï¼›</p></li><li><p>ååºåˆ—åŒ–</p></li><li><p>è¿”å›åºåˆ—åŒ–åçš„å¯¹è±¡ä»¥åŠ<strong>å…±åŒæ¨æ–­çš„GVKä¸‰å…ƒç»„</strong></p></li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="codec">codec<a href="#codec" class="hash-link" aria-label="Direct link to codec" title="Direct link to codec">â€‹</a></h4><p>æˆ‘ä»¬å¯ä»¥çœ‹å‡ºJSONåºåˆ—åŒ–å™¨çš„è§£ç è¿‡ç¨‹ä¸&quot;ç°ä»£&quot;æ—¶æœŸçš„è§£ç è¿‡ç¨‹äº§ç”Ÿäº†ä¸€äº›åŒºåˆ«ï¼š</p><ol><li>å¤šäº†&quot;å…±åŒæ¨æ–­&quot;çš„æ­¥éª¤</li><li>å°‘äº†&quot;ç‰ˆæœ¬è½¬åŒ–&quot;çš„æ­¥éª¤</li></ol><p>å¯¹äºå¤šå‡ºçš„&quot;å…±åŒæ¨æ–­&quot;æ­¥éª¤å…¶å®æ˜¯å®¹æ˜“ç†è§£çš„ï¼Œæ¯•ç«Ÿæ­¤æ—¶<code>Decode()</code>æ–¹æ³•ç­¾åå·²&quot;ä»Šæ—¶ä¸åŒå¾€æ—¥&quot;â€”â€”ä¸‰ä¸ªå‚æ•°å…¨éƒ¨åŒ…å«æœ‰GVKä¿¡æ¯ã€‚
å¯æ˜¯ä¸ºä»€ä¹ˆåœ¨è§£ç è¿‡ç¨‹ä¸­ä¸å†æœ‰&quot;ç‰ˆæœ¬è½¬åŒ–&quot;æ­¥éª¤äº†å‘¢ï¼Ÿéš¾é“è¿™æ¬¡é‡æ„èˆå¼ƒäº†Kubernetesçš„&quot;ç‰ˆæœ¬è½¬åŒ–&quot;å—ï¼Ÿ</p><p>å…¶å®ä¸ç„¶ï¼ŒPRä½œè€…å…¶å®æœ‰æ„è€Œä¸ºä¹‹â€”â€”JSON/YAMLåºåˆ—åŒ–å™¨ä»…ç”¨äº<strong>çº¯ç²¹</strong>çš„åºåˆ—åŒ–/ååºåˆ—åŒ–ä»»åŠ¡ã€‚
çœŸæ­£å¸¦æœ‰ç‰ˆæœ¬è½¬åŒ–çš„åºåˆ—åŒ–å™¨å®ç°æ˜¯<code>codec</code>ï¼Œå®ƒæ‰€å®ç°çš„ä¹Ÿæ˜¯<code>Codec</code>æ¥å£ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">pkg/runtime/serializer/versioning/versioning.go</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> codec </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    serializer runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Serializer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    convertor  runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ObjectConvertor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    creater    runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ObjectCreater</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    typer      runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Typer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    encodeVersion </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">unversioned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GroupVersion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    decodeVersion </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">unversioned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GroupVersion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å…¶ä¸­ï¼š</p><ul><li><code>serializer</code>æˆå‘˜ä¼šæ˜¯JSON/YAMLåºåˆ—åŒ–å™¨çš„ä¸€ç§ï¼Œå®ƒè´Ÿè´£çº¯ç²¹çš„åºåˆ—åŒ–/ååºåˆ—åŒ–æ­¥éª¤ï¼›</li><li><code>convertor</code>æˆå‘˜ç”¨äº&quot;ç‰ˆæœ¬è½¬åŒ–&quot;æ­¥éª¤ï¼Œè¿™ä¸ªæˆå‘˜å¯ä»¥è®¤ä¸ºæ˜¯å‰¥ç¦»è‡ª&quot;è¿‘ä»£&quot;æ—¶æœŸçš„<code>Scheme</code>ä¸­çš„<code>convertor</code>ï¼›</li><li><code>creater</code>æˆå‘˜ç”¨äºæ ¹æ®ç»™å®šçš„GVKä¸‰å…ƒç»„åˆ›å»ºå¯¹åº”<em>kind</em>ï¼ˆAPIå¯¹è±¡ï¼‰çš„ç©ºå®ä¾‹ï¼ˆ&quot;è½½ä½“&quot;ï¼‰ï¼›</li><li><code>typer</code>æˆå‘˜ç”¨äºåˆ¤å®šä¸€ä¸ªç»™å®šçš„<em>kind</em>ï¼ˆAPIå¯¹è±¡ï¼‰æ˜¯å¦æ³¨å†Œè¿‡ï¼›</li><li><code>encodeVersion</code>å’Œ<code>decodeVersion</code>æˆå‘˜æ˜¯<code>codec</code>åºåˆ—åŒ–å™¨åŒºåˆ«äº&quot;ç°ä»£&quot;ï¼ˆ<code>Scheme</code>å¤§ä¸€ç»Ÿï¼‰æ—¶æœŸçš„ç¼–/è§£ç é€»è¾‘çš„å¦ä¸€ä¸ªç‰¹æ€§â€”â€”<code>codec</code>æ”¯æŒå°†ç‰ˆæœ¬è½¬åŒ–ä¸ºè°ƒç”¨è€…æŒ‡å®šçš„<strong>ç›®æ ‡ç‰ˆæœ¬</strong>ï¼Œè€Œä¸æ˜¯ä»…é»˜è®¤è½¬åŒ–ä¸ºå†…éƒ¨ç‰ˆæœ¬ã€‚</li></ul><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>ä¸JSONåºåˆ—åŒ–å™¨ä¸€æ ·ï¼Œ<code>codec</code>ç±»å‹åˆå§‹åŒ–<code>typer</code>å’Œ<code>creater</code>æˆå‘˜æ—¶ç”¨çš„æ˜¯<code>Scheme</code>ç±»å‹çš„å®ä¾‹ã€‚</p></div></div><p>æ‰€ä»¥ï¼Œ<code>codec</code>åºåˆ—åŒ–å™¨æ˜¯å¯¹JSON/YAMLåºåˆ—åŒ–å™¨çš„è¿›ä¸€æ­¥å°è£…ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹<code>codec</code>çš„è§£ç æ–¹æ³•çš„å…·ä½“æ­¥éª¤ï¼š</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>æ³¨</div><div class="admonitionContent_S0QG"><p>ä¸ºäº†å‡è½»è¯»è€…çš„è´Ÿæ‹…ä¹Ÿä¾¿äºè¯»è€…ç†è§£ï¼ŒåŒæ—¶ä¹Ÿä¸ºäº†èšç„¦<code>codec</code>è§£ç é€»è¾‘çš„ä¸»å¹²æ­¥éª¤ï¼Œä¸‹é¢çš„ä»£ç çœç•¥äº†ä¸€äº›ç»†èŠ‚ã€‚</p></div></div><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Decode attempts a decode of the object, then tries to convert it to the internal version. If into is provided and the decoding is</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// successful, the returned runtime.Object will be the value passed as into. Note that this may bypass conversion if you pass an</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// into that matches the serialized version.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">codec</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">byte</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> defaultGVK </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">unversioned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GroupVersionKind</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> into runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Object</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Object</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">unversioned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GroupVersionKind</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    obj</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">serializer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> defaultGVK</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> into</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// if we specify a target, use generic conversion.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> into </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> into </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> obj </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> into</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">convertor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Convert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> into</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> into</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// invoke a version conversion</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    group </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Group</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> defaultGVK </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        group </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> defaultGVK</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Group</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> targetGV unversioned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GroupVersion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decodeVersion </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// convert to internal by default</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        targetGV</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Group </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> group</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        targetGV</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">APIVersionInternal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ok </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decodeVersion</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">group</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">ok </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        targetGV </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> gv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GroupVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> targetGV </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Convert if needed.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    out</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">convertor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ConvertToVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> targetGV</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> out</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li><p>åˆ©ç”¨åŸºç¡€çš„JSON/YAMLåºåˆ—åŒ–ç»„ä»¶è¿›è¡Œçº¯ç²¹çš„ååºåˆ—åŒ–æ­¥éª¤ã€‚</p></li><li><p>ç‰ˆæœ¬è½¬åŒ–</p><ul><li>å¦‚æœè°ƒç”¨è¿™æä¾›äº†ç›®æ ‡APIå¯¹è±¡è½½ä½“<code>into</code>ï¼Œåˆ™å°†ä¸Šä¸€æ­¥ååºåˆ—åŒ–ç»“æœè½¬åŒ–ä¸ºè°ƒç”¨è€…æä¾›çš„<code>into</code>å¯¹è±¡ï¼›</li><li>å¦‚æœè°ƒç”¨è€…æ²¡æœ‰æä¾›ç›®æ ‡APIå¯¹è±¡è½½ä½“ï¼ˆ<code>into</code>ä¸º<code>nil</code>ï¼‰ï¼Œå¹¶ä¸”äº‹å…ˆæä¾›äº†ç›®æ ‡ç‰ˆæœ¬çš„GVä¿¡æ¯ï¼ˆ<code>decodeVersion</code>ï¼‰åˆ™è½¬åŒ–ä¸ºæŒ‡å®šçš„ç›®æ ‡ç‰ˆæœ¬ï¼›</li><li>å¦‚æœè°ƒç”¨è€…å³æ²¡æœ‰æä¾›ç›®æ ‡APIå¯¹è±¡è½½ä½“ï¼ˆ<code>into</code>ä¸º<code>nil</code>ï¼‰ï¼Œä¹Ÿæ²¡æœ‰æä¾›ç›®æ ‡ç‰ˆæœ¬çš„GVä¿¡æ¯ï¼ˆ<code>decodeVersion</code>æˆå‘˜ä¸º<code>nil</code>ï¼‰åˆ™å°†ä¸Šä¸€æ­¥ååºåˆ—åŒ–çš„ç»“æœé»˜è®¤è½¬åŒ–ä¸ºå†…éƒ¨ç‰ˆæœ¬ã€‚</li></ul></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åºåˆ—åŒ–å™¨å·¥å‚codecfactory">åºåˆ—åŒ–å™¨å·¥å‚CodecFactory<a href="#åºåˆ—åŒ–å™¨å·¥å‚codecfactory" class="hash-link" aria-label="Direct link to åºåˆ—åŒ–å™¨å·¥å‚CodecFactory" title="Direct link to åºåˆ—åŒ–å™¨å·¥å‚CodecFactory">â€‹</a></h3><p>æˆ‘ä»¬ç°åœ¨å·²ç»çŸ¥é“<code>codec</code>åºåˆ—åŒ–å™¨æä¾›äº†è®¸å¤šå¯å®šåˆ¶åŒ–é¡¹ã€‚ä¾‹å¦‚å¯ä»¥é…ç½®JSONæˆ–è€…YAMLä½œä¸ºåº•å±‚çš„åºåˆ—åŒ–/ååºåˆ—åŒ–ç»„ä»¶ï¼Œä¹Ÿå¯ä»¥äº‹å…ˆé…ç½®å¥½æ‰€è¦è½¬åŒ–çš„ç›®æ ‡ç‰ˆæœ¬ä¿¡æ¯ã€‚
å› æ­¤ï¼Œåœ¨è¯¥PRä¸­ï¼Œä½œè€…ä¹ŸåŒæ—¶æä¾›äº†<code>CodecFactory</code>ï¼ˆ<em>åºåˆ—åŒ–å™¨å·¥å‚</em>ï¼‰â€”â€”ç”¨äº&quot;ç”Ÿäº§&quot;ä¸åŒå®šåˆ¶åŒ–çš„<code>codec</code>ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// CodecFactory provides methods for retrieving codecs and serializers for specific</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// versions and content types.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> CodecFactory </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scheme      </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Scheme</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    universal   runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Decoder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    serializers </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">serializerType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    accepts     </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å…¶ä¸­ï¼š</p><ul><li><code>scheme</code>æˆå‘˜ç”¨äº&quot;APIå¯¹è±¡æ³¨å†Œ&quot;ï¼›</li><li><code>serializers</code>æˆå‘˜ç”¨äºå­˜æ”¾åŒ…æ‹¬JSONå’ŒYAMLä¸¤ç§æ ¼å¼çš„åŸºç¡€åºåˆ—åŒ–å™¨ï¼›</li><li><code>accepts</code>æˆå‘˜ç”¨äºå­˜æ”¾<strong>æ”¯æŒ</strong>çš„ç¼–/è§£ç æ ¼å¼ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š<code>&quot;application/json&quot;</code>ä»¥åŠ<code>&quot;application/yaml&quot;</code>;</li><li><code>universal</code>æˆå‘˜æ„åœ¨æä¾›ä¸€ä¸ª<strong>é€šç”¨</strong>å¿«æ·çš„è§£ç å™¨ï¼Œå®ƒèƒ½å¤Ÿè¯†åˆ«å­—èŠ‚åºåˆ—çš„æ•°æ®æ ¼å¼ï¼ˆJSON/YAMLï¼‰å†æ‰¾åˆ°å¯¹åº”çš„åŸºç¡€çš„åºåˆ—åŒ–å™¨è¿›è¡Œååºåˆ—åŒ–ã€‚</li></ul><p>å¦å¤–ï¼Œ<code>CodecFactory</code>å…¶å®å®ç°äº†<code>NegotiatedSerializer</code>ï¼ˆ<em>åå•†åºåˆ—åŒ–å™¨</em>æ¥å£ï¼‰:</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">NegotiatedSerializer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">CodecFactory</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// SupportedMediaTypes returns the RFC2046 media types that this factory has serializers for.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">f CodecFactory</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SupportedMediaTypes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">string</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">accepts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// SerializerForMediaType returns a serializer that matches the provided RFC2046 mediaType, or false if no such</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// serializer exists</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">f CodecFactory</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SerializerForMediaType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mediaType </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Serializer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">bool</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">serializers </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> accepted </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AcceptContentTypes </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> accepted </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> mediaType </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> v</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ok </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;pretty&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> ok </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> v </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PrettySerializer </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PrettySerializer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Serializer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// DecoderToVersion returns a decoder that targets the provided group version.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">f CodecFactory</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">DecoderToVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">serializer runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Serializer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> gv unversioned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GroupVersion</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Decoder </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">CodecForVersions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">serializer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">unversioned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GroupVersion</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">gv</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// EncoderForVersion returns an encoder that targets the provided group version.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">f CodecFactory</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">EncoderForVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">serializer runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Serializer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> gv unversioned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GroupVersion</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Encoder </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">CodecForVersions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">serializer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">unversioned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GroupVersion</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">gv</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å®ƒå®ç°çš„<code>NegotiatedSerializer</code>æ¥å£çš„æ–¹æ³•ï¼š</p><ul><li><code>SupportedMediaTypes()</code>æ–¹æ³•ç”¨äºè¿”å›æ‰€æ”¯æŒçš„ç¼–ç æ ¼å¼ï¼›</li><li><code>SerializerForMediaType()</code>æ–¹æ³•ç”¨äº&quot;ç”Ÿäº§&quot;ä¸€ä¸ªæŒ‡å®šç¼–ç ç±»å‹çš„&quot;å®šåˆ¶åŒ–&quot;<code>codec</code>;</li><li><code>EncoderForVersion()/DecoderToVersion()</code>æ–¹æ³•ç”¨äº&quot;ç”Ÿäº§&quot;ä¸€ä¸ªå¯ä»¥è½¬åŒ–ä¸ºæŒ‡å®šç›®æ ‡ç‰ˆæœ¬çš„&quot;å®šåˆ¶åŒ–&quot;<code>codec</code>ï¼›</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="åˆ›å»ºcodecfactoryå¯¹è±¡">åˆ›å»ºCodecFactoryå¯¹è±¡<a href="#åˆ›å»ºcodecfactoryå¯¹è±¡" class="hash-link" aria-label="Direct link to åˆ›å»ºCodecFactoryå¯¹è±¡" title="Direct link to åˆ›å»ºCodecFactoryå¯¹è±¡">â€‹</a></h4><p>ä»‹ç»å®Œ<code>CodecFactory</code>ç±»å‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥çœ‹çœ‹å¦‚ä½•åˆ›å»ºä¸€ä¸ª<code>CodecFactory</code>ç±»ï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NewCodecFactory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scheme </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Scheme</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> CodecFactory </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¼€å‘è€…ä¸ºæˆ‘ä»¬å°è£…çš„åˆå§‹åŒ–å‡½æ•°ååˆ†ç®€å•â€”â€”è°ƒç”¨è€…ä»…éœ€è¦æä¾›ä¸€ä¸ª<code>Scheme</code>å¯¹è±¡å³å¯ï¼Œå‰©ä¸‹çš„ç”±åˆå§‹åŒ–å‡½æ•°å®Œæˆã€‚<a href="/crd-controller-from-scratch/docs/intro#%E7%BA%A6%E5%AE%9A">ğŸˆ</a></p><p>ä¸ºäº†å‡è½»è¯»è€…è´Ÿæ‹…ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä¸å†å…³æ³¨åˆå§‹åŒ–çš„ç»†èŠ‚ã€‚</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="withoutconversion">WithoutConversion<a href="#withoutconversion" class="hash-link" aria-label="Direct link to WithoutConversion" title="Direct link to WithoutConversion">â€‹</a></h4><p>æˆ‘ä»¬çŸ¥é“&quot;ç‰ˆæœ¬è½¬åŒ–&quot;åœ¨<code>kube-apiserver</code>æ˜¯ä¸ªååˆ†é‡è¦çš„è¡Œä¸ºã€‚ä½†æ˜¯å¯¹äºå®¢æˆ·ç«¯ï¼ˆ<code>client-go</code>ï¼‰æ¥è¯´ï¼Œå®ƒä»¬åœ¨åºåˆ—åŒ–/ååºåˆ—åŒ–èµ„æºæ—¶å…¶å®å¹¶ä¸éœ€è¦&quot;ç‰ˆæœ¬è½¬åŒ–&quot;ã€‚
é’ˆå¯¹è¿™ç§éœ€æ±‚ï¼Œåœ¨<a href="https://github.com/kubernetes/kubernetes/tree/v1.15.0-alpha1" target="_blank" rel="noopener noreferrer">Kubernetes v1.15.0-alpha1</a>
<a href="https://github.com/kubernetes/kubernetes/pull/76098" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Pull Request #76098</a>
å¼€å‘è€…ç»™<code>CodecFactory</code>å°è£…äº†ä¸€ä¸ª&quot;å¿«æ·&quot;æ–¹æ³•<code>WithoutConversion()</code>ï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// WithoutConversion returns a NegotiatedSerializer that performs no conversion</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">f CodecFactory</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">WithoutConversion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">NegotiatedSerializer </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç”¨äºè¿”å›ä¸€ä¸ªåœ¨ç¼–/è§£ç æ—¶<strong>ä¸è¿›è¡Œç‰ˆæœ¬è½¬åŒ–</strong>çš„<code>CodecFactory</code>ã€‚<a href="/crd-controller-from-scratch/docs/intro#%E7%BA%A6%E5%AE%9A">ğŸˆ</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="urlå‚æ•°ç¼–è§£ç å™¨parametercodec">URLå‚æ•°ç¼–è§£ç å™¨ParameterCodec<a href="#urlå‚æ•°ç¼–è§£ç å™¨parametercodec" class="hash-link" aria-label="Direct link to URLå‚æ•°ç¼–è§£ç å™¨ParameterCodec" title="Direct link to URLå‚æ•°ç¼–è§£ç å™¨ParameterCodec">â€‹</a></h3><p>ä¸Šè¿°çš„<code>CodecFactory</code>ä¸»è¦ç”¨äºHTTP<strong>è¯·æ±‚/è¿”å›ä½“</strong>ï¼ˆå³<em>èµ„æº</em>ï¼‰çš„ç¼–è§£/ç ã€‚</p><p>åœ¨ææ¡ˆ<a href="https://github.com/kubernetes/kubernetes/issues/7111" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Issue #7111</a>ä¸­ï¼Œä½œè€…ç”šè‡³&quot;è´´å¿ƒåœ°&quot;æè®®ä¸ºHTTP URLå‚æ•°ï¼ˆQuery Parametersï¼‰ä¸Goå¯¹è±¡ä¹‹é—´çš„è½¬æ¢ä¹Ÿä¸“é—¨å°è£…æˆä¸€ç§&quot;ç¼–è§£ç å™¨&quot;<sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup>ï¼š</p><blockquote><p>There are places where we want to convert map<!-- -->[string]<!-- -->interface{} (generic JSON object representation) or a map<!-- -->[string][]<!-- -->string (url.Values) into a versioned Go struct, which is dependent on a type of marshaling (i.e. following JSON rules, or Query parameter rules).</p></blockquote><p>åœ¨<a href="https://github.com/kubernetes/kubernetes/pull/17922" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Pull Request #17922</a>ä¸­ï¼Œä½œè€…å®ç°äº†<code>ParameterCodec</code>ç¼–è§£ç å™¨ä¸“é—¨ç”¨äºæ­¤ç›®çš„ï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// parameterCodec implements conversion to and from query parameters and objects.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> parameterCodec </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    typer     Typer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    convertor ObjectConvertor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    creator   ObjectCreater</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¾‹å¦‚ï¼Œé€šå¸¸æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>apimachinery</code>åº“æä¾›çš„<code>metav1.ListOptions</code>ç»“æ„<sup id="fnref-3"><a href="#fn-3" class="footnote-ref">3</a></sup>æ¥åŸºäºæ¡ä»¶åœ°æŸ¥è¯¢èµ„æºé›†åˆï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">listOptions </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> metav1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ListOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Limit</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        LabelSelector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;app=foo&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pods</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> clientset</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">CoreV1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Pods</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;default&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">List</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">listOptions</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>client-go</code>å…¶å®åœ¨èƒŒåæ­£æ˜¯åˆ©ç”¨äº†<code>ParameterCodec</code>&quot;ç¼–è§£ç å™¨&quot;å°†<code>metav1.ListOptions</code>ç±»å‹æœ€ç»ˆ&quot;è§£ç &quot;æˆHTTP URLå‚æ•°<code>limit=1&amp;app=foo</code>ã€‚
å¦å¤–ï¼Œéœ€è¦æåŠçš„æ˜¯ï¼Œ<code>ParameterCodec</code>&quot;ç¼–è§£ç å™¨&quot;ä»ç„¶åŸºäº<code>Scheme</code>æ³¨å†Œæœºåˆ¶å·¥ä½œï¼ˆ<code>typer</code>å’Œ<code>creator</code>æˆå‘˜ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>metav1.ListOptions</code>ç±»å‹ä¹ŸåŒæ ·éœ€è¦æ³¨å†Œè¿›<code>scheme</code>ä¸­ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å°ç»“">å°ç»“<a href="#å°ç»“" class="hash-link" aria-label="Direct link to å°ç»“" title="Direct link to å°ç»“">â€‹</a></h3><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>å°ç»“</div><div class="admonitionContent_S0QG"><p>åœ¨æœ¬å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¼ºè°ƒäº†åœ¨Kubernetesä¸Šä¸‹æ–‡ä¸­ç¼–/è§£ç çš„ç‰¹æ®Šæ€§ï¼Œè€Œè¿™ç§ç‰¹æ®Šæ€§æœ¬è´¨ä¸Šæ¥è‡ªäºèµ„æºçš„å¤šç‰ˆæœ¬ä»¥åŠç‰ˆæœ¬é—´çš„ç›¸äº’è½¬åŒ–ã€‚
ä¹‹åæˆ‘ä»¬æ€»ç»“äº†Kubernetesç¼–/è§£ç ä½“ç³»æ¼”åŒ–çš„å››ä¸ªé‡è¦é˜¶æ®µã€‚
å¦‚ä»Šçš„Kubernetesä½“ç³»ä¸»è¦åŸºäºä¸¤ä¸ªç»„ä»¶ï¼š</p><ul><li><code>Scheme</code>â€”â€”<em>kind</em>æ³¨å†Œ</li><li><code>codec</code>â€”â€”åºåˆ—åŒ–/ååºåˆ—åŒ–åŠèµ„æºç‰ˆæœ¬è½¬åŒ–</li></ul><p>å¦å¤–ï¼Œæˆ‘ä»¬è¿˜ä»‹ç»äº†<code>CodecFactory</code>ï¼Œå®ƒå®ç°äº†<code>NegotiatedSerializer</code>ï¼ˆ<em>åå•†åºåˆ—åŒ–å™¨</em>ï¼‰ï¼Œæ”¯æŒå¤šç§ç¼–ç æ ¼å¼ï¼Œä¹Ÿå¯ä»¥ç”¨äºç”Ÿäº§&quot;å®šåˆ¶åŒ–&quot;çš„<code>codec</code>ã€‚</p><p>åŒæ—¶æˆ‘ä»¬ä¹ŸæŒ‡å‡ºäº†å¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œå®ƒåœ¨åºåˆ—åŒ–/ååºåˆ—åŒ–èµ„æºæ—¶å¹¶ä¸éœ€è¦åƒKubernetes API Serverä¸€æ ·è¿›è¡Œç‰ˆæœ¬è½¬ã€‚é’ˆå¯¹è¿™ç§éœ€æ±‚ï¼Œ<code>CodecFactory</code>çš„<code>WithoutConversion()</code>æ–¹æ³•ä¹Ÿå¯¹æ­¤æä¾›äº†æ–¹ä¾¿å¿«æ·çš„æ”¯æŒã€‚</p></div></div><div class="footnotes"><hr><ol><li id="fn-1">å½¼æ—¶<em>èµ„æº</em>çš„æ¦‚å¿µç”šè‡³è¿˜æ²¡æœ‰æ­£å¼å½¢æˆã€‚åœ¨Kubernetesæ—©æœŸé˜¶æ®µï¼Œå®˜æ–¹å¼€å‘è€…æ›´å€¾å‘äºä½¿ç”¨æœ¯è¯­<em>APIå¯¹è±¡ï¼ˆAPI Objectï¼‰</em>æˆ–æ˜¯<em>APIç±»å‹ï¼ˆAPI Typeï¼‰</em>æ¥æŒ‡ä»£APIçš„JSON Schemaã€‚<em>APIå¯¹è±¡ï¼ˆAPI Objectï¼‰</em>é¦–æ¬¡å‡ºç°åœ¨<a href="https://github.com/kubernetes/kubernetes/pull/529" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg> Pull Request #529</a>ã€‚<a href="#fnref-1" class="footnote-backref">â†©</a></li><li id="fn-2">é€šå¸¸æˆ‘ä»¬æ‰€è¯´çš„<em>åºåˆ—åŒ–å™¨</em>æˆ–è€…<em>ç¼–è§£ç å™¨</em>æ˜¯æŒ‡å­—èŠ‚åºåˆ—ï¼ˆ<code>[]bytes</code>ï¼‰ä¸Goå¯¹è±¡ä¹‹é—´çš„è½¬åŒ–ï¼Œæ­¤å¤„çš„&quot;ç¼–è§£ç å™¨&quot;å¹¶ä¸èƒ½å½’ä¸ºæ­¤ç±»ï¼Œå®ƒçš„ä½œç”¨æ˜¯HTTP URLå‚æ•°ï¼ˆQuery Parametersï¼‰ä¸Goå¯¹è±¡ä¹‹é—´çš„è½¬æ¢ã€‚<a href="#fnref-2" class="footnote-backref">â†©</a></li><li id="fn-3">æ³¨æ„æ­¤å¤„çš„<code>ListOptions</code>ä¸æˆ‘ä»¬åœ¨ä¹‹å‰<a href="/crd-controller-from-scratch/docs/apimachinery/gvk#%E5%86%8D%E8%AF%86kind">å†è¯†kind</a>å°èŠ‚ä¸­æåŠçš„<code>DeleteOptions</code>çš„åŒºåˆ«ï¼š<code>DeleteOptions</code>ä¸<code>ListOptions</code>è™½ç„¶åŒå±äº<em>kind</em>ç¬¬ä¸‰ç§ç±»ï¼Œä½†æ˜¯<code>DeleteOptions</code>å¯¹åº”çš„æ˜¯HTTP<strong>è¯·æ±‚ä½“</strong>è€Œä¸æ˜¯HTTP URLå‚æ•°ã€‚<a href="#fnref-3" class="footnote-backref">â†©</a></li></ol></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/crd-controller-from-scratch/docs/apimachinery/kind-case-study"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">kindæ¡ˆä¾‹æ¢ç©¶</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/crd-controller-from-scratch/docs/apimachinery/client-go-and-apimachinery"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">client-goä¸apimachinery</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#èµ„æºçš„å†…éƒ¨ç‰ˆæœ¬" class="table-of-contents__link toc-highlight">èµ„æºçš„å†…éƒ¨ç‰ˆæœ¬</a></li><li><a href="#kubernetesç¼–è§£ç ä½“ç³»æ¼”åŒ–å†å²" class="table-of-contents__link toc-highlight">Kubernetesç¼–/è§£ç ä½“ç³»æ¼”åŒ–å†å²</a><ul><li><a href="#å¤ä»£é˜¶æ®µ" class="table-of-contents__link toc-highlight">å¤ä»£é˜¶æ®µ</a></li><li><a href="#è¿‘ä»£é˜¶æ®µ" class="table-of-contents__link toc-highlight">è¿‘ä»£é˜¶æ®µ</a></li><li><a href="#ç°ä»£é˜¶æ®µschemeå¤§ä¸€ç»Ÿæ—¶æœŸ" class="table-of-contents__link toc-highlight">ç°ä»£é˜¶æ®µï¼ˆSchemeå¤§ä¸€ç»Ÿæ—¶æœŸï¼‰</a></li><li><a href="#å½“ä»£é˜¶æ®µ" class="table-of-contents__link toc-highlight">å½“ä»£é˜¶æ®µ</a></li></ul></li><li><a href="#codecä½“ç³»" class="table-of-contents__link toc-highlight">Codecä½“ç³»</a><ul><li><a href="#æ¥å£" class="table-of-contents__link toc-highlight">æ¥å£</a></li><li><a href="#å®ç°" class="table-of-contents__link toc-highlight">å®ç°</a></li><li><a href="#åºåˆ—åŒ–å™¨å·¥å‚codecfactory" class="table-of-contents__link toc-highlight">åºåˆ—åŒ–å™¨å·¥å‚CodecFactory</a></li><li><a href="#urlå‚æ•°ç¼–è§£ç å™¨parametercodec" class="table-of-contents__link toc-highlight">URLå‚æ•°ç¼–è§£ç å™¨ParameterCodec</a></li><li><a href="#å°ç»“" class="table-of-contents__link toc-highlight">å°ç»“</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 Xudong Wang, Under license <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/">CC BY-NC-ND 4.0</a>, Built with Docusaurus.ğŸˆ</div></div></div></footer></div>
<script src="/crd-controller-from-scratch/assets/js/runtime~main.56e28771.js"></script>
<script src="/crd-controller-from-scratch/assets/js/main.66bc2718.js"></script>
</body>
</html>