<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-client-go/controller">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Controller | ã€Šä»é›¶å®ç°Kubernetesè‡ªå®šä¹‰æ§åˆ¶å™¨ã€‹</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://caozhuozi.github.io/crd-controller-from-scratch/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://caozhuozi.github.io/crd-controller-from-scratch/img/logo.png"><meta data-rh="true" property="og:url" content="https://caozhuozi.github.io/crd-controller-from-scratch/docs/client-go/controller"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Controller | ã€Šä»é›¶å®ç°Kubernetesè‡ªå®šä¹‰æ§åˆ¶å™¨ã€‹"><meta data-rh="true" name="description" content="åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ­£å¼ä»‹ç»åœ¨Kubernetesè¯­å¢ƒä¸‹ï¼Œæ§åˆ¶å™¨ï¼ˆControllerï¼‰ç©¶ç«ŸæŒ‡çš„æ˜¯ä»€ä¹ˆã€‚"><meta data-rh="true" property="og:description" content="åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ­£å¼ä»‹ç»åœ¨Kubernetesè¯­å¢ƒä¸‹ï¼Œæ§åˆ¶å™¨ï¼ˆControllerï¼‰ç©¶ç«ŸæŒ‡çš„æ˜¯ä»€ä¹ˆã€‚"><link data-rh="true" rel="icon" href="/crd-controller-from-scratch/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://caozhuozi.github.io/crd-controller-from-scratch/docs/client-go/controller"><link data-rh="true" rel="alternate" href="https://caozhuozi.github.io/crd-controller-from-scratch/docs/client-go/controller" hreflang="en"><link data-rh="true" rel="alternate" href="https://caozhuozi.github.io/crd-controller-from-scratch/docs/client-go/controller" hreflang="x-default"><link rel="stylesheet" href="/crd-controller-from-scratch/assets/css/styles.37df9119.css">
<link rel="preload" href="/crd-controller-from-scratch/assets/js/runtime~main.56e28771.js" as="script">
<link rel="preload" href="/crd-controller-from-scratch/assets/js/main.66bc2718.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#e6f6e6;color:#5f805b" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">ğŸ¥³v0.6.0-rc2 is released.ğŸ‰</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/crd-controller-from-scratch/"><div class="navbar__logo"><img src="/crd-controller-from-scratch/img/logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/crd-controller-from-scratch/img/logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/crd-controller-from-scratch/docs/intro">å¼€å§‹</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/caozhuozi/crd-controller-from-scratch" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/crd-controller-from-scratch/docs/intro">å‰è¨€</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/crd-controller-from-scratch/docs/apimachinery/apimachinery">apimachinery</a><button aria-label="Toggle the collapsible sidebar category &#x27;apimachinery&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/crd-controller-from-scratch/docs/client-go/client-go">client-go</a><button aria-label="Toggle the collapsible sidebar category &#x27;client-go&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/crd-controller-from-scratch/docs/client-go/restclient">RESTClient</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/crd-controller-from-scratch/docs/client-go/controller">Controller</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/crd-controller-from-scratch/docs/client-go/informer-is-all-you-need">informer is all you need</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/crd-controller-from-scratch/docs/client-go/summary">æœ¬ç« å°ç»“</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/crd-controller-from-scratch/docs/putting-it-all-together/putting-it-all-together">putting it all together</a><button aria-label="Toggle the collapsible sidebar category &#x27;putting it all together&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/crd-controller-from-scratch/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/crd-controller-from-scratch/docs/client-go/client-go"><span itemprop="name">client-go</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Controller</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Controller</h1><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ­£å¼ä»‹ç»åœ¨Kubernetesè¯­å¢ƒä¸‹ï¼Œ<em>æ§åˆ¶å™¨ï¼ˆControllerï¼‰</em>ç©¶ç«ŸæŒ‡çš„æ˜¯ä»€ä¹ˆã€‚
åœ¨æ­£å¼ä»‹ç»<em>Controller</em>æ¦‚å¿µä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦é“ºå«ä¸€äº›è¾…åŠ©æ¦‚å¿µã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¯¹è±¡çš„çŠ¶æ€ä¸åè°ƒ">å¯¹è±¡çš„çŠ¶æ€ä¸åè°ƒ<a href="#å¯¹è±¡çš„çŠ¶æ€ä¸åè°ƒ" class="hash-link" aria-label="Direct link to å¯¹è±¡çš„çŠ¶æ€ä¸åè°ƒ" title="Direct link to å¯¹è±¡çš„çŠ¶æ€ä¸åè°ƒ">â€‹</a></h2><p>æ—©åœ¨<a href="/crd-controller-from-scratch/docs/apimachinery/kubernetes-api#kubernetes%E5%AF%B9%E8%B1%A1kubernetes-object">Kuberneteså¯¹è±¡</a>å°èŠ‚ï¼Œæˆ‘ä»¬å°±å·²ç»ä»‹ç»äº†Kubernetesæ˜¯ä¸€ä¸ªä»¥Kubernetes APIä¸ºä¸­å¿ƒçš„<em>å£°æ˜å¼èµ„æºç®¡ç†ç³»ç»Ÿ</em>ã€‚
ç”¨æˆ·å‘Kubernetesæè¿°èµ„æºçš„æœŸæœ›çŠ¶æ€ï¼Œç”±Kubernetesç³»ç»Ÿæ§åˆ¶ä»¥ä½¿èµ„æºè¾¾åˆ°æœŸæœ›çŠ¶æ€ã€‚
åœ¨Kubernetesä¸­ï¼Œä½¿Kuberneteså¯¹è±¡çš„æœŸæœ›çŠ¶æ€ä¸å®é™…çŠ¶æ€ä¿æŒä¸€è‡´çš„è¿‡ç¨‹è¢«ç§°ä¸º<em>åè°ƒï¼ˆreconcileï¼‰</em>ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ§åˆ¶å™¨controller">æ§åˆ¶å™¨ï¼ˆControllerï¼‰<a href="#æ§åˆ¶å™¨controller" class="hash-link" aria-label="Direct link to æ§åˆ¶å™¨ï¼ˆControllerï¼‰" title="Direct link to æ§åˆ¶å™¨ï¼ˆControllerï¼‰">â€‹</a></h2><p>åœ¨Kubernetesä¸­ï¼Œ<em>æ§åˆ¶å™¨ï¼ˆControllerï¼‰</em>æ˜¯æŒ‡ç”¨äº<em>åè°ƒ</em>çš„æ— é™å¾ªç¯<sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup><sup id="fnref-3"><a href="#fn-3" class="footnote-ref">3</a></sup>ã€‚</p><p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä»Kubernetesä½œä¸ºä¸€ä¸ª<em>å£°æ˜å¼ç³»ç»Ÿ</em>çš„è§’åº¦æ¥è§£é‡Š<em>æ§åˆ¶å™¨</em>ã€‚
åœ¨å£°æ˜å¼ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·çŸ¥é“ç³»ç»Ÿçš„æœŸæœ›çŠ¶æ€ï¼Œç”¨æˆ·ä»…å‘ç³»ç»Ÿæä¾›æœŸæœ›çŠ¶æ€çš„æè¿°ï¼Œç”±ç³»ç»Ÿæ¥ç¡®å®šä»å½“å‰çŠ¶æ€è¾¾åˆ°æœŸæœ›çŠ¶æ€æ‰€éœ€è¦çš„åŠ¨ä½œåºåˆ—ã€‚
è€Œç³»ç»Ÿä¸­å†³å®šå¹¶æ‰§è¡ŒåŠ¨ä½œåºåˆ—çš„ç»„ä»¶è¢«ç§°ä¸º<em>æ§åˆ¶å™¨</em>ã€‚</p><p>å¦å¤–ï¼ŒKubernetesè®¾è®¡æ–‡æ¡£<a href="https://github.com/kubernetes/design-proposals-archive/blob/main/architecture/resource-management.md#declarative-control" target="_blank" rel="noopener noreferrer">The Kubernetes Resource Model (KRM) <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg></a>ä¹Ÿå¯¹<em>Controller</em>çš„è¡Œä¸ºåšäº†è§„èŒƒï¼š</p><blockquote><p>The intent is carried out by asynchronous controllers, which interact through the Kubernetes API.
Controllers donâ€™t access the state store, etcd, directly, and donâ€™t communicate via private direct APIs.</p><p>...</p><p>Controllers continuously strive to make the observed state match the desired state, and report back their status to the apiserver asynchronously.</p></blockquote><p>æ„æ€æ˜¯è¯´æ§åˆ¶å™¨<strong>åªèƒ½</strong>é€šè¿‡ä¸Kubernetes APIäº¤äº’æ¥å®æ–½åè°ƒåŠ¨ä½œï¼Œè€Œä¸èƒ½ç›´æ¥è®¿é—®çŠ¶æ€é›†ç¾¤çš„å­˜å‚¨ï¼ˆetcdï¼‰æˆ–è€…å…¶ä»–ç§æœ‰çš„æœåŠ¡ã€‚</p><p>Kubernetesé›†ç¾¤å†…ç½®äº†ä¸€äº›åŸç”Ÿèµ„æºçš„æ§åˆ¶å™¨ï¼Œä¾‹å¦‚Jobæ§åˆ¶å™¨ç­‰ã€‚
å½“ç”¨æˆ·å£°æ˜ä¸€ä¸ª<code>job</code>èµ„æºåï¼ŒJobæ§åˆ¶å™¨æœ¬èº«å¹¶ä¸åˆ›å»ºpodèµ„æºæ¥æ‰§è¡Œä»»åŠ¡ï¼Œå®ƒè€Œæ˜¯é€šè¿‡Kubernetes APIæ¥åˆ›å»ºpodèµ„æºæ¥è¿è¡Œä»»åŠ¡<sup id="fnref-4"><a href="#fn-4" class="footnote-ref">4</a></sup>ï¼Œå¹¶åŒæ—¶ä¸æ–­å°†<code>job</code>å¯¹è±¡çš„çŠ¶æ€&quot;æ±‡æŠ¥&quot;ç»™Kubernetes APIä»¥å†™å…¥<code>etcd</code>ä¸­ã€‚
å¯è§ï¼ŒJobæ§åˆ¶å™¨çš„æ‰€æœ‰è¡Œä¸ºéƒ½åªä¸Kubernetesäº¤äº’ã€‚</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>ç”±äºèµ„æº<em>æ§åˆ¶å™¨</em>åªèƒ½ä¸Kubernetes APIäº¤äº’ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®¤ä¸º<em>æ§åˆ¶å™¨</em>æ˜¯ä¸€ç§å…·æœ‰ç‰¹æ®Šè¡Œä¸ºçš„èµ„æºå®¢æˆ·ç«¯ã€‚</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ§åˆ¶å™¨ä¸å­èµ„æºstatus">æ§åˆ¶å™¨ä¸å­èµ„æºstatus<a href="#æ§åˆ¶å™¨ä¸å­èµ„æºstatus" class="hash-link" aria-label="Direct link to æ§åˆ¶å™¨ä¸å­èµ„æºstatus" title="Direct link to æ§åˆ¶å™¨ä¸å­èµ„æºstatus">â€‹</a></h2><p>åœ¨ä¹‹å‰<a href="/crd-controller-from-scratch/docs/apimachinery/kubernetes-api#%E5%AD%90%E8%B5%84%E6%BA%90subresource">å­èµ„æºï¼ˆsubresourceï¼‰</a>å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥äº†<em>å­èµ„æº</em>çš„æ¦‚å¿µã€‚
æˆ‘ä»¬å·²ç»çŸ¥é“å¼•å…¥<code>status</code>å­èµ„æºçš„åŠ¨æœºæ˜¯ä¸ºäº†å°†å¯¹Kuberneteså¯¹è±¡<code>status</code>å­—æ®µï¼ˆå®é™…çŠ¶æ€ï¼‰çš„å˜æ›´ä¸<code>spec</code>å­—æ®µï¼ˆæœŸæœ›çŠ¶æ€ï¼‰çš„å˜æ›´åˆ†å¼€ã€‚
ä½†å½“æ—¶ç”±äºç¼ºä¹Kubernetes<em>æ§åˆ¶å™¨</em>çš„æ¦‚å¿µï¼Œæˆ‘ä»¬ä»å¹¶å‘æ§åˆ¶çš„è§’åº¦å»è§£é‡Šåˆ†å¼€çš„åŸç”±ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥è¡¥å……æ›´å¤šçš„èƒŒæ™¯ã€‚Kubernetesä½œä¸ºä¸€ä¸ª<em>å£°æ˜å¼èµ„æºç®¡ç†ç³»ç»Ÿ</em>ï¼š</p><ul><li>ç”¨æˆ·å¯ä»¥å†™å…¥ï¼ˆæˆ–æ›´æ”¹ï¼‰èµ„æºçš„<code>spec</code>ï¼ˆæœŸæœ›çŠ¶æ€ï¼‰ï¼Œä½†ä¸åº”æ›´æ”¹èµ„æºçš„<code>status</code>å­—æ®µï¼›</li><li><em>æ§åˆ¶å™¨</em>å¯ä»¥å†™å…¥ï¼ˆæˆ–æ›´æ”¹ï¼‰<code>status</code>å­—æ®µï¼ˆå®é™…çŠ¶æ€ï¼‰ï¼Œä½†ä¸åº”æ›´æ”¹èµ„æºçš„<code>spec</code>å­—æ®µã€‚</li></ul><p>é€šè¿‡èµ„æºAPIåˆ›å»ºæˆ–è€…æ›´æ”¹èµ„æºæ—¶ï¼Œ<code>kube-apiserver</code>ä¼šè‡ªåŠ¨å¿½ç•¥è¯·æ±‚ä½“ä¸­<code>status</code>å­—æ®µä¸­çš„å†…å®¹ï¼›è€Œé€šè¿‡å­èµ„æº<code>status</code>APIæ›´æ–°èµ„æºçŠ¶æ€æ—¶ï¼Œ<code>kube-apiserver</code>ä¹Ÿä¼šå¿½ç•¥è¯·æ±‚ä½“ä¸­<code>status</code>å­—æ®µä¹‹å¤–çš„æ›´æ”¹ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä½¿ç”¨restclientæ›´æ–°kuberneteså¯¹è±¡çŠ¶æ€">ä½¿ç”¨RESTClientæ›´æ–°Kuberneteså¯¹è±¡çŠ¶æ€<a href="#ä½¿ç”¨restclientæ›´æ–°kuberneteså¯¹è±¡çŠ¶æ€" class="hash-link" aria-label="Direct link to ä½¿ç”¨RESTClientæ›´æ–°Kuberneteså¯¹è±¡çŠ¶æ€" title="Direct link to ä½¿ç”¨RESTClientæ›´æ–°Kuberneteså¯¹è±¡çŠ¶æ€">â€‹</a></h3><p>æˆ‘ä»¬ç°åœ¨å·²ç»çŸ¥é“<em>æ§åˆ¶å™¨</em>æ˜¯ä¸€ç§å…·æœ‰ç‰¹æ®Šè¡Œä¸ºçš„Kuberneteså®¢æˆ·ç«¯ï¼Œå®ƒéœ€è¦é€šè¿‡Kuberneteså­èµ„æºAPI<code>status</code>&quot;æ±‡æŠ¥&quot;Kuberneteså¯¹è±¡çš„å½“å‰çŠ¶æ€ã€‚å¹¸è¿çš„æ˜¯ï¼Œ<code>client-go</code>ä½œä¸ºKubernetesæ ‡å‡†å®¢æˆ·ç«¯åº“å·²ç»ä¸ºæˆ‘ä»¬å°è£…äº†ç›¸å…³æ–¹æ³•ç”¨äºä¸å­èµ„æºAPIäº¤äº’ã€‚</p><p>æˆ‘ä»¬å…ˆä»<code>client-go</code>å°è£…çš„<a href="/crd-controller-from-scratch/docs/client-go/restclient#%E8%B5%84%E6%BA%90%E5%AE%A2%E6%88%B7%E7%AB%AF">èµ„æºå®¢æˆ·ç«¯</a>è¯´èµ·ã€‚å¯¹äºé‚£äº›æ˜¯<em>Kuberneteså¯¹è±¡</em>çš„èµ„æºç±»å‹ï¼Œ<code>client-go</code>çš„åŸç”Ÿ<em>èµ„æºå®¢æˆ·ç«¯</em>ä¸“é—¨å°è£…äº†ä¸€ä¸ª<code>UpdateStatus()</code>çš„æ–¹æ³•ç”¨äºæ›´æ–°å¯¹è±¡çš„å½“å‰çŠ¶æ€ã€‚
ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä»¥<code>Pod</code>å®¢æˆ·ç«¯ä¸ºä¾‹ï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> PodInterface </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">Create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pod </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">v1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Pod</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> opts metav1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">CreateOptions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">v1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Pod</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">Update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pod </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">v1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Pod</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> opts metav1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">UpdateOptions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">v1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Pod</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">UpdateStatus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pod </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">v1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Pod</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> opts metav1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">UpdateOptions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">v1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Pod</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">Delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> opts metav1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DeleteOptions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">Get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> opts metav1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GetOptions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">v1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Pod</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">List</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> opts metav1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ListOptions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">v1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PodList</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">Watch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> opts metav1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ListOptions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">watch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Interface</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">Patch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pt types</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PatchType</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> data </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">byte</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> opts metav1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PatchOptions</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> subresources </span><span class="token operator" style="color:#393A34">...</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">v1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Pod</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ‘ä»¬åœ¨<a href="/crd-controller-from-scratch/docs/client-go/restclient#%E8%B5%84%E6%BA%90%E5%AE%A2%E6%88%B7%E7%AB%AF">èµ„æºå®¢æˆ·ç«¯</a>å°èŠ‚ä¸­å·²ç»è¯´æ˜äº†<em>èµ„æºå®¢æˆ·ç«¯</em>ä½¿ç”¨çš„æ˜¯<code>RESTClient</code>ç»„ä»¶ã€‚æˆ‘ä»¬ä»¥<code>pods</code>èµ„æºå®¢æˆ·ç«¯<code>UpdateStatus()</code>æ–¹æ³•çš„å®ç°ä¸ºä¾‹ï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pods</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">UpdateStatus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pod </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">v1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Pod</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> opts metav1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">UpdateOptions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">v1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Pod</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">v1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Pod</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    err </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">Namespace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ns</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">Resource</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;pods&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">Name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pod</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">SubResource</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;status&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">VersionedParams</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">opts</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scheme</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ParameterCodec</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">Body</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pod</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">Do</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">Into</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä»å®ç°æ¥çœ‹ï¼Œ<a href="/crd-controller-from-scratch/docs/client-go/restclient#request%E7%B1%BB%E5%9E%8B"><code>Request</code>ç±»å‹</a>å·²ç»ä¸ºæˆ‘ä»¬å°è£…äº†<code>SubResource()</code>æ–¹æ³•ï¼Œä½¿ç”¨æ–¹å¼ä¹Ÿååˆ†ç®€å•ï¼Œåªè¦å¡«å…¥ç›¸åº”çš„<em>å­èµ„æº</em>åç§°å°±èƒ½ä¸ç›¸åº”çš„å­èµ„æºAPIäº¤äº’ã€‚
åœ¨æœ¬ä¾‹ä¸­ï¼Œç”±äºè¦é€šè¿‡å­èµ„æº<code>status</code>æ›´æ–°å¯¹è±¡çš„å½“å‰çŠ¶æ€ï¼Œåªè¦åœ¨å‚æ•°ä¸­å¡«å…¥<code>&quot;status&quot;</code>å³å¯ã€‚<a href="/crd-controller-from-scratch/docs/intro#%E7%BA%A6%E5%AE%9A">ğŸˆ</a></p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>æ³¨</div><div class="admonitionContent_S0QG"><p>é€šè¿‡æ¢ç©¶åŸç”Ÿ<code>pods</code>èµ„æºå®¢æˆ·ç«¯<code>UpdateStatus()</code>çš„å®ç°ï¼Œæˆ‘ä»¬å…¶å®å·²ç»å­¦ä¼šäº†å¦‚ä½•ä½¿ç”¨<code>RESTClient</code>åŸºç¡€ç»„ä»¶æ›´æ–°å¯¹è±¡çš„å½“å‰çŠ¶æ€â€”â€”æˆ‘ä»¬åœ¨ç¼–å†™<em>è‡ªå®šä¹‰èµ„æº</em>å®¢æˆ·ç«¯æ—¶ä¹Ÿéœ€è¦ä½¿ç”¨åŒæ ·çš„æ–¹æ³•ã€‚</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ§åˆ¶å™¨æ¨¡å¼">æ§åˆ¶å™¨æ¨¡å¼<a href="#æ§åˆ¶å™¨æ¨¡å¼" class="hash-link" aria-label="Direct link to æ§åˆ¶å™¨æ¨¡å¼" title="Direct link to æ§åˆ¶å™¨æ¨¡å¼">â€‹</a></h2><p>æ ¹æ®<em>æ§åˆ¶å™¨</em>çš„å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€æ®µä¼ªä»£ç æè¿°ä¸€ç§æœ€ä¸ºç®€å•åŸºç¡€çš„æ§åˆ¶å™¨å®ç°ï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  desired </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getDesiredState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  current </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getCurrentState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">makeChanges</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">desired</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> current</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Kuberneteså„ç§æ§åˆ¶å™¨çš„å®ç°æœ¬è´¨ä¸Šéƒ½æ˜¯å¯¹æ­¤åŸºæœ¬æ¡†æ¶çš„ä¼˜åŒ–å’Œæ‰©å±•ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è¢«é—å¿˜çš„ç›‘å¬watchæœºåˆ¶">è¢«é—å¿˜çš„ç›‘å¬ï¼ˆwatchï¼‰æœºåˆ¶<a href="#è¢«é—å¿˜çš„ç›‘å¬watchæœºåˆ¶" class="hash-link" aria-label="Direct link to è¢«é—å¿˜çš„ç›‘å¬ï¼ˆwatchï¼‰æœºåˆ¶" title="Direct link to è¢«é—å¿˜çš„ç›‘å¬ï¼ˆwatchï¼‰æœºåˆ¶">â€‹</a></h2><p>åœ¨ä¸Šè¿°çš„ç»“æ„ä¸­ï¼Œç›¸æ¯”äºé€šè¿‡è½®è¯¢ä¸æ–­ä¸»åŠ¨è·å–èµ„æºçš„çŠ¶æ€ï¼Œ ä¸€ä¸ªæ˜æ˜¾å¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹æ˜¯æˆ‘ä»¬å¯ä»¥<strong>è¢«åŠ¨åœ°</strong>åªåœ¨<strong>æœ‰å¯¹è±¡çŠ¶æ€å‘ç”Ÿå˜æ›´çš„æ—¶å€™</strong>æ‰è§¦å‘åè°ƒåŠ¨ä½œã€‚
åŸå› ä¹Ÿå¾ˆç®€å•ï¼Œåªæœ‰å½“å¯¹è±¡çŠ¶æ€å‘ç”Ÿå˜æ›´çš„æ—¶å€™ï¼Œæ‰æœ‰å¯èƒ½ä¸æœŸæœ›çš„çŠ¶æ€å‘ç”Ÿåç¦»ï¼Œå› æ­¤æˆ‘ä»¬åªè¦åœ¨æ­¤æ—¶åˆ»è§¦å‘åè°ƒåŠ¨ä½œå³å¯ã€‚</p><p>å¹¸è¿çš„æ˜¯ï¼ŒKubernetes APIæ”¯æŒæŒç»­<em>ç›‘å¬ï¼ˆwatchï¼‰</em>èµ„æºçš„å˜æ›´ï¼ˆåŒ…æ‹¬<em>æ–°å¢</em>ï¼Œ<em>ä¿®æ”¹</em>ä»¥åŠ<em>åˆ é™¤</em>äº‹ä»¶ï¼‰ã€‚
å…·ä½“æ¥è¯´ï¼Œåœ¨èµ„æºå¯¹åº”çš„APIçš„åŸºç¡€ä¸ŠåŠ ä¸Š<code>?watch=true</code>çš„æŸ¥è¯¢å‚æ•°ï¼ˆquery parameterï¼‰å°±å¯ä»¥å¯¹èµ„æºçš„å˜æ›´è¿›è¡Œç›‘å¬ã€‚
ä¾‹å¦‚ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET /api/v1/namespaces/test/pods?watch</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Transfer-Encoding: chunked</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: application/json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ADDED&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;object&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;kind&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Pod&quot;</span><span class="token plain">, </span><span class="token string" style="color:#e3116c">&quot;apiVersion&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;v1&quot;</span><span class="token plain">, </span><span class="token string" style="color:#e3116c">&quot;metadata&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;resourceVersion&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;10596&quot;</span><span class="token plain">, </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">, </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MODIFIED&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;object&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;kind&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Pod&quot;</span><span class="token plain">, </span><span class="token string" style="color:#e3116c">&quot;apiVersion&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;v1&quot;</span><span class="token plain">, </span><span class="token string" style="color:#e3116c">&quot;metadata&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;resourceVersion&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;11020&quot;</span><span class="token plain">, </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">, </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™äº›å˜æ›´äº‹ä»¶ä»¥HTTP&quot;æµ&quot;<sup id="fnref-5"><a href="#fn-5" class="footnote-ref">5</a></sup>çš„å½¢å¼è¿”å›ã€‚å¦å¤–ï¼Œä»ä¸Šè¿°ä¾‹å­å¯ä»¥çœ‹å‡ºï¼šæ¯ä¸ªå˜æ›´äº‹ä»¶åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼šç±»å‹ï¼ˆ<code>type</code>ï¼‰ä»¥åŠèµ„æºæœ¬èº«ï¼ˆ<code>object</code>ï¼‰ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä½¿ç”¨restclientç›‘å¬èµ„æº">ä½¿ç”¨RESTClientç›‘å¬èµ„æº<a href="#ä½¿ç”¨restclientç›‘å¬èµ„æº" class="hash-link" aria-label="Direct link to ä½¿ç”¨RESTClientç›‘å¬èµ„æº" title="Direct link to ä½¿ç”¨RESTClientç›‘å¬èµ„æº">â€‹</a></h3><p><code>RESTClient</code>ä¸­ä¸ºæˆ‘ä»¬å°è£…äº†ç›¸å…³çš„æ–¹æ³•ç”¨äºå¯¹èµ„æºç±»å‹çš„ç›‘å¬ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨<code>RESTClient</code>æ¥ç›‘å¬èµ„æºçš„ä¸€ä¸ªä¾‹å­ï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Assume restClient is initialized.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">opts </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> metav1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ListOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">opts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Watch </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">watcher</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> restClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">Get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">Namespace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;default&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">Resource</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;pods&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">VersionedParams</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">opts</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scheme</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ParameterCodec</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">Watch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> event </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> watcher</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ResultChan</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Event type: %v\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> event</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Type</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Pod name: %v\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> event</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Object</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">v1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Pod</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>é¦–å…ˆæˆ‘ä»¬éœ€è¦å°†<code>metav1.ListOptions</code>å¯¹è±¡çš„<code>Watch</code>æˆå‘˜è®¾ç½®ä¸º<code>true</code>ã€‚<code>metav1.ListOptions</code>å¯¹è±¡å°†æœ€ç»ˆä¼šè¢«<code>scheme.ParameterCodec</code>ç¼–ç æˆè¯·æ±‚URLä¸­çš„<code>?watch=true</code>éƒ¨åˆ†ã€‚</li><li><code>Watch()</code>æ–¹æ³•è¿”å›çš„ä¸€ä¸ªæ˜¯<code>StreamWatcher</code>å¯¹è±¡ã€‚<code>StreamWatcher</code>å¯¹è±¡ä¸æ–­å°†åŸºäºè¿”å›ä½“ä¸­çš„æ•°æ®å—è§£ç æˆ<code>WatchEvent</code>å¯¹è±¡<sup id="fnref-6"><a href="#fn-6" class="footnote-ref">6</a></sup>ï¼Œå¹¶å†™å…¥channelä¸­ï¼ˆä¹Ÿå°±æ˜¯å®ƒçš„<code>ResultChan</code>æˆå‘˜ï¼‰ã€‚</li><li>æˆ‘ä»¬é€šè¿‡è¿­ä»£<code>ResultChan()</code>å°±å¯ä»¥&quot;æºæºä¸æ–­&quot;çš„ä»ä¸­è·å–èµ„æºçš„å˜æ›´äº‹ä»¶ã€‚</li></ul><p>ä¸‹å›¾å±•ç¤ºä½¿ç”¨<code>RESTClient</code>ç›‘å¬èµ„æºæ—¶çš„è¿‡ç¨‹ï¼š</p><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 996.339 432.386" width="996.339" height="432.386" style="width:95%"><defs><style>@font-face{font-family:&quot;Virgil&quot;;src:url(https://excalidraw.com/Virgil.woff2)}@font-face{font-family:&quot;Cascadia&quot;;src:url(https://excalidraw.com/Cascadia.woff2)}</style></defs><g stroke-opacity="0.6" fill-opacity="0.6" stroke-linecap="round"><path d="M115.688 125.428h805v139.93h-805" stroke-width="0" fill="#f2ffff"></path><path d="M115.688 125.428h805m0 0v139.93m0 0h-805m0 0v-139.93" stroke="#000" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8"></path></g><g stroke-linecap="round"><path d="M339.302 62.585h106.79m-106.79 0h106.79" stroke="#000" stroke-width="2" fill="none"></path><path d="m446.092 62.585-13.6 6.34v-12.68l13.6 6.34" stroke-width="0" fill-rule="evenodd"></path><path d="M446.092 62.585c-3.63 1.69-7.26 3.38-13.6 6.34m13.6-6.34c-3.19 1.49-6.38 2.97-13.6 6.34m0 0v-12.68m0 12.68v-12.68m0 0c4.85 2.26 9.71 4.53 13.6 6.34m-13.6-6.34c3.34 1.56 6.68 3.12 13.6 6.34m0 0s0 0 0 0m0 0s0 0 0 0" stroke="#000" stroke-width="2" fill="none"></path></g><text font-family="Cascadia, Segoe UI Emoji" font-size="16" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(341.347 41.814)">Namespace()</text><text font-family="Cascadia, Segoe UI Emoji" font-size="16" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(484.324 41.814)">Resource()</text><text font-family="Cascadia, Segoe UI Emoji" font-size="16" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(622.018 42.367)">Name()</text><text font-family="Cascadia, Segoe UI Emoji" font-size="16" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(920.714 83.436)">watch()</text><g stroke-linecap="round"><path d="M10.458 33.135h110v58h-110" stroke-width="0" fill="#eae6ff"></path><path d="M10.458 33.135h110m-110 0h110m0 0v58m0-58v58m0 0h-110m110 0h-110m0 0v-58m0 58v-58" stroke="#000" stroke-width="2" fill="none"></path></g><text x="46.875" font-family="Cascadia, Segoe UI Emoji" font-size="16" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(18.583 52.535)">RESTClient</text><g stroke-linecap="round"><path d="M260.258 33.484h76v58h-76" stroke-width="0" fill="#d5e8d4"></path><path d="M260.258 33.484h76m-76 0h76m0 0v58m0-58v58m0 0h-76m76 0h-76m0 0v-58m0 58v-58" stroke="#000" stroke-width="2" fill="none"></path></g><text x="32.813" font-family="Cascadia, Segoe UI Emoji" font-size="16" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(265.446 67.284)">Request</text><g stroke-linecap="round"><path d="M270.05 38.099h29.26v14.6h-29.26" stroke-width="0" fill="#eae6ff"></path><path d="M270.05 38.099h29.26m-29.26 0h29.26m0 0v14.6m0-14.6v14.6m0 0h-29.26m29.26 0h-29.26m0 0v-14.6m0 14.6v-14.6" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-linecap="round"><path d="M123.502 61.054h132.99m-132.99 0h132.99" stroke="#000" stroke-width="2" fill="none"></path><path d="m256.492 61.054-13.6 6.34v-12.68l13.6 6.34" stroke-width="0" fill-rule="evenodd"></path><path d="M256.492 61.054c-4.85 2.26-9.7 4.52-13.6 6.34m13.6-6.34c-4.19 1.95-8.39 3.91-13.6 6.34m0 0v-12.68m0 12.68v-12.68m0 0c3.43 1.6 6.85 3.19 13.6 6.34m-13.6-6.34c3.95 1.84 7.91 3.69 13.6 6.34m0 0s0 0 0 0m0 0s0 0 0 0" stroke="#000" stroke-width="2" fill="none"></path></g><text font-family="Cascadia, Segoe UI Emoji" font-size="17.012" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(167.574 40.229)">Get()</text><g stroke-linecap="round"><path d="M121.458 33.835c11.79-2.71 46.14-17.34 70.77-16.25 24.62 1.1 64.15 19.01 76.98 22.82" stroke="#000" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8" stroke-opacity="0.7" fill-opacity="0.7"></path><g stroke-opacity="0.7" fill-opacity="0.7"><path d="m269.208 40.405-14.94 1.32 4.33-11.92 10.61 10.6" stroke-width="0" fill-rule="evenodd"></path><path d="M269.208 40.405c-3.53.31-7.07.62-14.94 1.32m0 0c1.71-4.7 3.41-9.4 4.33-11.92m0 0c3.73 3.73 7.46 7.45 10.61 10.6m0 0s0 0 0 0" stroke="#000" stroke-width="2.5" fill="none"></path></g></g><g stroke-linecap="round"><path d="M448.716 47.367h33.03v30.48h-33.03" stroke-width="0" fill="#d5e8d4"></path><path d="M448.716 47.367h33.03m-33.03 0h33.03m0 0v30.48m0-30.48v30.48m0 0h-33.03m33.03 0h-33.03m0 0v-30.48m0 30.48v-30.48" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-linecap="round"><path d="M584.058 47.244h33.03v30.48h-33.03" stroke-width="0" fill="#d5e8d4"></path><path d="M584.058 47.244h33.03m-33.03 0h33.03m0 0v30.48m0-30.48v30.48m0 0h-33.03m33.03 0h-33.03m0 0v-30.48m0 30.48v-30.48" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-linecap="round"><path d="M483.22 62.384h100.01m-100.01 0h100.01" stroke="#000" stroke-width="2" fill="none"></path><path d="m583.23 62.384-13.6 6.34v-12.68l13.6 6.34" stroke-width="0" fill-rule="evenodd"></path><path d="M583.23 62.384c-4.54 2.11-9.07 4.23-13.6 6.34m13.6-6.34c-2.91 1.36-5.83 2.72-13.6 6.34m0 0v-12.68m0 12.68v-12.68m0 0c2.97 1.38 5.93 2.76 13.6 6.34m-13.6-6.34c3 1.4 6 2.8 13.6 6.34m0 0s0 0 0 0m0 0s0 0 0 0" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-linecap="round"><path d="M694.796 47.244h33.03v30.48h-33.03" stroke-width="0" fill="#d5e8d4"></path><path d="M694.796 47.244h33.03m-33.03 0h33.03m0 0v30.48m0-30.48v30.48m0 0h-33.03m33.03 0h-33.03m0 0v-30.48m0 30.48v-30.48" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-linecap="round"><path d="M619.442 63.884h73.78m-73.78 0h73.78" stroke="#000" stroke-width="2" fill="none"></path><path d="m693.222 63.884-13.6 6.34v-12.68l13.6 6.34" stroke-width="0" fill-rule="evenodd"></path><path d="M693.222 63.884c-5.02 2.34-10.03 4.68-13.6 6.34m13.6-6.34c-5.41 2.52-10.81 5.04-13.6 6.34m0 0v-12.68m0 12.68v-12.68m0 0c5.4 2.52 10.79 5.03 13.6 6.34m-13.6-6.34c2.91 1.35 5.81 2.71 13.6 6.34m0 0s0 0 0 0m0 0s0 0 0 0" stroke="#000" stroke-width="2" fill="none"></path></g><text font-family="Cascadia, Segoe UI Emoji" font-size="16" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(117.438 170.189)" stroke-opacity="0.6" fill-opacity="0.6">GET /apis/{group}/{version}/namespaces/{namespace}/{resourcetype}/{name}?{watch=true}</text><text font-family="Cascadia, Segoe UI Emoji" font-size="16" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(733.7 44.684)">VersionedParams()</text><g stroke-linecap="round"><path d="M896.755 47.244h33.03v30.48h-33.03" stroke-width="0" fill="#d5e8d4"></path><path d="M896.755 47.244h33.03m-33.03 0h33.03m0 0v30.48m0-30.48v30.48m0 0h-33.03m33.03 0h-33.03m0 0v-30.48m0 30.48v-30.48" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-linecap="round"><path d="M730.054 64.46c47.66-.16 95.32-.31 166.23-.54m-166.23.54c49.78-.16 99.57-.33 166.23-.54" stroke="#000" stroke-width="2" fill="none"></path><path d="m896.284 63.92-13.58 6.38-.04-12.68 13.62 6.3" stroke-width="0" fill-rule="evenodd"></path><path d="M896.284 63.92c-3.9 1.83-7.79 3.66-13.58 6.38m13.58-6.38c-4.07 1.91-8.13 3.82-13.58 6.38m0 0c-.01-3.55-.02-7.1-.04-12.68m.04 12.68c-.01-3.65-.02-7.3-.04-12.68m0 0c4.71 2.18 9.42 4.36 13.62 6.3m-13.62-6.3 13.62 6.3m0 0s0 0 0 0m0 0s0 0 0 0" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-linecap="round"><path d="M836.355 68.679c.67 25.32 1.33 50.63 2.68 101.62" stroke="#000" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8" stroke-opacity="0.6" fill-opacity="0.6"></path><g stroke-opacity="0.6" fill-opacity="0.6"><path d="m839.035 170.299-6.7-13.42 12.67-.34-5.97 13.76" stroke-width="0" fill-rule="evenodd"></path><path d="M839.035 170.299c-1.67-3.34-3.34-6.69-6.7-13.42m0 0c4.79-.13 9.59-.25 12.67-.34m0 0c-1.3 3-2.6 6-5.97 13.76m0 0s0 0 0 0" stroke="#000" stroke-width="2.5" fill="none"></path></g></g><g stroke-linecap="round"><path d="M289.325 45.472v98.29" stroke="#000" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8" stroke-opacity="0.6" fill-opacity="0.6"></path><g stroke-opacity="0.6" fill-opacity="0.6"><path d="m289.325 143.762-6.34-13.59h12.68l-6.34 13.59" stroke-width="0" fill-rule="evenodd"></path><path d="M289.325 143.762c-2.46-5.27-4.92-10.54-6.34-13.59m0 0h12.68m0 0c-1.88 4.03-3.76 8.07-6.34 13.59m0 0s0 0 0 0" stroke="#000" stroke-width="2.5" fill="none"></path></g></g><text font-family="Cascadia, Segoe UI Emoji" font-size="36" style="white-space:pre" dominant-baseline="text-before-edge" transform="rotate(91.035 84.732 226.08)" stroke-opacity="0.4" fill-opacity="0.4">{</text><text font-family="Cascadia, Segoe UI Emoji" font-size="16" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(223.202 98.54)" stroke-opacity="0.7" fill-opacity="0.7">versionedAPIPath</text><g stroke-linecap="round"><path d="M402.266 68.354c9.69 5.35 38.55 15.03 58.16 32.09 19.61 17.07 49.57 58.59 59.48 70.31" stroke="#000" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8" stroke-opacity="0.6" fill-opacity="0.6"></path><g stroke-opacity="0.6" fill-opacity="0.6"><path d="m519.906 170.754-13.39-6.74 9.95-7.86 3.44 14.6" stroke-width="0" fill-rule="evenodd"></path><path d="M519.906 170.754c-3.37-1.7-6.75-3.4-13.39-6.74m0 0c2.89-2.29 5.78-4.57 9.95-7.86m0 0c.69 2.93 1.38 5.85 3.44 14.6m0 0s0 0 0 0" stroke="#000" stroke-width="2.5" fill="none"></path></g></g><g stroke-linecap="round"><path d="M529.133 67.626c9.69 5.35 39.88 15.17 58.16 32.09 18.28 16.93 42.94 57.89 51.53 69.47" stroke="#000" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8" stroke-opacity="0.6" fill-opacity="0.6"></path><g stroke-opacity="0.6" fill-opacity="0.6"><path d="m638.823 169.186-12.87-7.69 10.49-7.12 2.38 14.81" stroke-width="0" fill-rule="evenodd"></path><path d="M638.823 169.186c-3.17-1.89-6.34-3.79-12.87-7.69m0 0c3.43-2.33 6.86-4.65 10.49-7.12m0 0c.73 4.51 1.45 9.02 2.38 14.81m0 0s0 0 0 0" stroke="#000" stroke-width="2.5" fill="none"></path></g></g><g stroke-linecap="round"><path d="M648.767 68.494c9.69 5.35 40.97 15.35 58.16 32.09 17.19 16.75 37.47 56.97 44.96 68.36" stroke="#000" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8" stroke-opacity="0.6" fill-opacity="0.6"></path><g stroke-opacity="0.6" fill-opacity="0.6"><path d="m751.887 168.944-12.35-8.51 10.93-6.42 1.42 14.93" stroke-width="0" fill-rule="evenodd"></path><path d="M751.887 168.944c-4.18-2.87-8.35-5.75-12.35-8.51m0 0c4.07-2.39 8.14-4.78 10.93-6.42m0 0c.29 3.03.57 6.06 1.42 14.93m0 0s0 0 0 0" stroke="#000" stroke-width="2.5" fill="none"></path></g></g><g stroke-linecap="round"><path d="M914.97 80.223v118.82m0-118.82v118.82m0 0H109.74m805.23 0H109.74" stroke="#000" stroke-width="2" fill="none"></path><path d="m109.74 199.043 13.6-6.33v12.67l-13.6-6.34" stroke-width="0" fill-rule="evenodd"></path><path d="M109.74 199.043c3.19-1.48 6.38-2.97 13.6-6.33m-13.6 6.33c5.36-2.49 10.71-4.99 13.6-6.33m0 0v12.67m0-12.67v12.67m0 0c-4.35-2.03-8.71-4.05-13.6-6.34m13.6 6.34c-5.4-2.51-10.8-5.03-13.6-6.34m0 0s0 0 0 0m0 0s0 0 0 0" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-linecap="round"><path d="M725.437 205.855h167v53h-167" stroke-width="0" fill="#f9f7ed"></path><path d="M725.437 205.855h167m-167 0h167m0 0v53m0-53v53m0 0h-167m167 0h-167m0 0v-53m0 53v-53" stroke="#000" stroke-width="2" fill="none"></path></g><text font-family="Cascadia, Segoe UI Emoji" font-size="16" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(730.437 234.655)">StreamWatcher</text><g stroke-opacity="0.8" fill-opacity="0.8" stroke-linecap="round"><path d="M10 178.522h96v68H10" stroke-width="0" fill="#6b8eed"></path><path d="M10 178.522h96m-96 0h96m0 0v68m0-68v68m0 0H10m96 0H10m0 0v-68m0 68v-68" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-opacity="0.8" fill-opacity="0.8"><text x="42.188" font-family="Cascadia, Segoe UI Emoji" font-size="16" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(15.813 193.322)">kube-</text><text x="42.188" y="19.2" font-family="Cascadia, Segoe UI Emoji" font-size="16" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(15.813 193.322)">apiserver</text></g><text font-family="Cascadia, Segoe UI Emoji" font-size="16" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(859.187 10)" stroke-opacity="0.7" fill-opacity="0.7">watch</text><g stroke-linecap="round"><path d="M111.13 220.682h803.23m-803.23 0h803.23" stroke="#000" stroke-width="2" fill="none"></path><path d="m914.36 220.682-13.59 6.34v-12.68l13.59 6.34" stroke-width="0" fill-rule="evenodd"></path><path d="M914.36 220.682c-4.31 2.01-8.61 4.02-13.59 6.34m13.59-6.34c-4.48 2.09-8.97 4.18-13.59 6.34m0 0v-12.68m0 12.68v-12.68m0 0c4.79 2.23 9.58 4.47 13.59 6.34m-13.59-6.34c5.31 2.48 10.62 4.96 13.59 6.34m0 0s0 0 0 0m0 0s0 0 0 0" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-linecap="round"><path d="M882.233 29.292v18.87m0-18.87v18.87" stroke="#000" stroke-width="2" fill="none" stroke-opacity="0.6" fill-opacity="0.6"></path><g stroke-opacity="0.6" fill-opacity="0.6"><path d="m882.233 48.162-3.99-8.55h7.98l-3.99 8.55" stroke-width="0" fill-rule="evenodd"></path><path d="M882.233 48.162c-1-2.14-1.99-4.27-3.99-8.55m3.99 8.55c-.94-2.02-1.88-4.04-3.99-8.55m0 0h7.98m-7.98 0h7.98m0 0c-1.01 2.16-2.01 4.32-3.99 8.55m3.99-8.55c-1.57 3.35-3.13 6.71-3.99 8.55m0 0s0 0 0 0m0 0s0 0 0 0" stroke="#000" stroke-width="2" fill="none"></path></g></g><g stroke-opacity="0.8" fill-opacity="0.8" stroke-linecap="round"><path d="M735.421 211.482h19.66v18.42h-19.66" stroke-width="0" fill="#12b886"></path><path d="M735.421 211.482h19.66m-19.66 0h19.66m0 0v18.42m0-18.42v18.42m0 0h-19.66m19.66 0h-19.66m0 0v-18.42m0 18.42v-18.42" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-opacity="0.8" fill-opacity="0.8" stroke-linecap="round"><path d="M765.054 211.482h19.66v18.42h-19.66" stroke-width="0" fill="#12b886"></path><path d="M765.054 211.482h19.66m-19.66 0h19.66m0 0v18.42m0-18.42v18.42m0 0h-19.66m19.66 0h-19.66m0 0v-18.42m0 18.42v-18.42" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-opacity="0.8" fill-opacity="0.8" stroke-linecap="round"><path d="M792.822 211.482h19.66v18.42h-19.66" stroke-width="0" fill="#12b886"></path><path d="M792.822 211.482h19.66m-19.66 0h19.66m0 0v18.42m0-18.42v18.42m0 0h-19.66m19.66 0h-19.66m0 0v-18.42m0 18.42v-18.42" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-opacity="0.8" fill-opacity="0.8" stroke-linecap="round"><path d="M819.652 211.62h19.66v18.42h-19.66" stroke-width="0" fill="#12b886"></path><path d="M819.652 211.62h19.66m-19.66 0h19.66m0 0v18.42m0-18.42v18.42m0 0h-19.66m19.66 0h-19.66m0 0v-18.42m0 18.42v-18.42" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-opacity="0.8" fill-opacity="0.8" stroke-linecap="round"><path d="M848.416 211.482h19.66v18.42h-19.66" stroke-width="0" fill="#12b886"></path><path d="M848.416 211.482h19.66m-19.66 0h19.66m0 0v18.42m0-18.42v18.42m0 0h-19.66m19.66 0h-19.66m0 0v-18.42m0 18.42v-18.42" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-linecap="round"><path d="M812.145 260.978c-.02 9.75-.03 19.49-.07 40.9m.07-40.9c-.02 11.19-.04 22.38-.07 40.9" stroke="#000" stroke-width="2" fill="none"></path><path d="m812.075 301.878-6.31-13.6 12.68.02-6.37 13.58" stroke-width="0" fill-rule="evenodd"></path><path d="M812.075 301.878c-1.5-3.24-3.01-6.48-6.31-13.6m6.31 13.6c-1.72-3.72-3.45-7.44-6.31-13.6m0 0c2.81 0 5.62.01 12.68.02m-12.68-.02c3.52 0 7.05.01 12.68.02m0 0c-2.01 4.29-4.02 8.58-6.37 13.58m6.37-13.58c-2.33 4.97-4.66 9.95-6.37 13.58m0 0s0 0 0 0m0 0s0 0 0 0" stroke="#000" stroke-width="2" fill="none"></path></g><text font-family="Cascadia, Segoe UI Emoji" font-size="48.689" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(655.49 176.338)">...</text><g stroke-linecap="round"><path d="M453.915 52.44h11.42v11.28h-11.42" stroke-width="0" fill="#eae6ff"></path><path d="M453.915 52.44h11.42m-11.42 0h11.42m0 0v11.28m0-11.28v11.28m0 0h-11.42m11.42 0h-11.42m0 0V52.44m0 11.28V52.44" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-linecap="round"><path d="M589.335 52.373h11.42v11.28h-11.42" stroke-width="0" fill="#eae6ff"></path><path d="M589.335 52.373h11.42m-11.42 0h11.42m0 0v11.28m0-11.28v11.28m0 0h-11.42m11.42 0h-11.42m0 0v-11.28m0 11.28v-11.28" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-linecap="round"><path d="M700.053 51.924h11.42v11.28h-11.42" stroke-width="0" fill="#eae6ff"></path><path d="M700.053 51.924h11.42m-11.42 0h11.42m0 0v11.28m0-11.28v11.28m0 0h-11.42m11.42 0h-11.42m0 0v-11.28m0 11.28v-11.28" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-linecap="round"><path d="M902.73 51.583h11.42v11.28h-11.42" stroke-width="0" fill="#eae6ff"></path><path d="M902.73 51.583h11.42m-11.42 0h11.42m0 0v11.28m0-11.28v11.28m0 0h-11.42m11.42 0h-11.42m0 0v-11.28m0 11.28v-11.28" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-opacity="0.8" fill-opacity="0.8" stroke-linecap="round"><path d="M23.54 403.847H43.2v18.42H23.54" stroke-width="0" fill="#0a11d3"></path><path d="M23.54 403.847H43.2m-19.66 0H43.2m0 0v18.42m0-18.42v18.42m0 0H23.54m19.66 0H23.54m0 0v-18.42m0 18.42v-18.42" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-linecap="round"><path d="M23.65 316.72h19.78v30H23.65" stroke-width="0" fill="#d5e8d4"></path><path d="M23.65 316.72h19.78m-19.78 0h19.78m0 0v30m0-30v30m0 0H23.65m19.78 0H23.65m0 0v-30m0 30v-30" stroke="#000" stroke-width="2" fill="none"></path></g><text x="32.813" font-family="Cascadia, Segoe UI Emoji" font-size="16" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(56.082 315.655)" stroke-opacity="0.8" fill-opacity="0.8">Request</text><g stroke-opacity="0.8" fill-opacity="0.8" stroke-linecap="round"><path d="M23.648 345.716h19.66v18.42h-19.66" stroke-width="0" fill="#eae6ff"></path><path d="M23.648 345.716h19.66m-19.66 0h19.66m0 0v18.42m0-18.42v18.42m0 0h-19.66m19.66 0h-19.66m0 0v-18.42m0 18.42v-18.42" stroke="#000" stroke-width="2" fill="none"></path></g><text x="46.875" font-family="Cascadia, Segoe UI Emoji" font-size="16" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(56.082 345.333)" stroke-opacity="0.8" fill-opacity="0.8">RESTClient</text><g stroke-opacity="0.8" fill-opacity="0.8" stroke-linecap="round"><path d="M23.734 375.495h19.66v18.42h-19.66" stroke-width="0" fill="#12b886"></path><path d="M23.734 375.495h19.66m-19.66 0h19.66m0 0v18.42m0-18.42v18.42m0 0h-19.66m19.66 0h-19.66m0 0v-18.42m0 18.42v-18.42" stroke="#000" stroke-width="2" fill="none"></path></g><text x="60.938" font-family="Cascadia, Segoe UI Emoji" font-size="16" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(56.082 374.313)" stroke-opacity="0.8" fill-opacity="0.8">response body</text><text x="46.875" font-family="Cascadia, Segoe UI Emoji" font-size="16" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(55.102 403.186)" stroke-opacity="0.8" fill-opacity="0.8">serializer</text><text font-family="Cascadia, Segoe UI Emoji" font-size="20" style="white-space:pre" dominant-baseline="text-before-edge" transform="rotate(.025 -615450.49 266880.844)" stroke-opacity="0.6" fill-opacity="0.6">Â©Xudong WangğŸ¤–ï¸ğŸˆ</text></svg><p>ä¸‹å›¾å±•ç¤ºäº†<code>StreamWatcher</code>å°†HTTPè¿”å›çš„æ•°æ®å—è½¬åŒ–ä¸ºäº‹ä»¶ç±»å‹å‘é€åˆ°channelçš„è¿‡ç¨‹ï¼š</p><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 511.565 370.69" width="511.565" height="370.69" style="height:320px"><defs><style>@font-face{font-family:&quot;Virgil&quot;;src:url(https://excalidraw.com/Virgil.woff2)}@font-face{font-family:&quot;Cascadia&quot;;src:url(https://excalidraw.com/Cascadia.woff2)}</style></defs><g stroke-linecap="round"><path d="M45.23 58.165h316.05v269.79H45.23" stroke-width="0" fill="#f9f7ed"></path><path d="M45.23 58.165h316.05m-316.05 0h316.05m0 0v269.79m0-269.79v269.79m0 0H45.23m316.05 0H45.23m0 0V58.165m0 269.79V58.165" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-linecap="round"><path d="M12.245 46.44h489.32" stroke="#000" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8" stroke-opacity="0.6" fill-opacity="0.6"></path><g stroke-opacity="0.6" fill-opacity="0.6"><path d="m501.565 46.44-13.6 6.34V40.1l13.6 6.34" stroke-width="0" fill-rule="evenodd"></path><path d="M501.565 46.44c-3.5 1.63-7 3.27-13.6 6.34m0 0V40.1m0 0c3.33 1.55 6.67 3.11 13.6 6.34m0 0s0 0 0 0" stroke="#000" stroke-width="2.5" fill="none"></path></g></g><g stroke-linecap="round"><path d="M499.711 73.955H10.001" stroke="#000" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8" stroke-opacity="0.6" fill-opacity="0.6"></path><g stroke-opacity="0.6" fill-opacity="0.6"><path d="m10.001 73.955 13.59-6.34v12.68l-13.59-6.34" stroke-width="0" fill-rule="evenodd"></path><path d="M10.001 73.955c5.3-2.47 10.6-4.94 13.59-6.34m0 0v12.68m0 0c-4.65-2.17-9.31-4.34-13.59-6.34m0 0s0 0 0 0" stroke="#000" stroke-width="2.5" fill="none"></path></g></g><text font-family="Cascadia, Segoe UI Emoji" font-size="48.689" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(289.031 30.386)">...</text><g stroke-linecap="round"><path d="M203.232 93.683c-.02 13.61-.05 27.22-.07 42.22m.07-42.22c-.02 8.55-.03 17.09-.07 42.22" stroke="#000" stroke-width="2" fill="none"></path><path d="m203.162 135.903-6.32-13.6 12.68.02-6.36 13.58" stroke-width="0" fill-rule="evenodd"></path><path d="M203.162 135.903c-2.04-4.38-4.08-8.77-6.32-13.6m6.32 13.6c-1.28-2.75-2.56-5.5-6.32-13.6m0 0c2.76 0 5.51.01 12.68.02m-12.68-.02c3.38.01 6.76.01 12.68.02m0 0c-1.3 2.77-2.59 5.54-6.36 13.58m6.36-13.58c-1.49 3.18-2.98 6.36-6.36 13.58m0 0s0 0 0 0m0 0s0 0 0 0" stroke="#000" stroke-width="2" fill="none"></path></g><text font-family="Cascadia, Segoe UI Emoji" font-size="20" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(215.967 99.438)">decode</text><g stroke-linecap="round"><path d="M107.704 142.41h191v72h-191" stroke-width="0" fill="#f2ffff"></path><path d="M107.704 142.41h191m-191 0h191m0 0v72m0-72v72m0 0h-191m191 0h-191m0 0v-72m0 72v-72" stroke="#000" stroke-width="2" fill="none"></path></g><text font-family="Cascadia, Segoe UI Emoji" font-size="16" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(112.704 147.41)">type Event struct {</text><text y="19.2" font-family="Cascadia, Segoe UI Emoji" font-size="16" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(112.704 147.41)">  // ...</text><text y="38.4" font-family="Cascadia, Segoe UI Emoji" font-size="16" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(112.704 147.41)">}</text><g stroke-opacity="0.8" fill-opacity="0.8" fill-rule="evenodd" stroke-linecap="round"><path d="m218.29 326.026-.604-64.967-1.396-2.707-4.683-2.374-7.888-.683-7.517 1.284-3.972 2.918-.536 2.436-.086-.57.673 65.797.163-.651 1.708 2.843 3.536 1.626 8.043 1.311 6.432-.893 5.032-2.869 1.096-2.5" stroke-width="0" fill="#40c057"></path><path d="M218.29 326.026c-.104-9.7-.552-47.397-.657-58.196-.106-10.8.25-5.043.025-6.63-.226-1.579-.36-1.977-1.368-2.848-1.009-.87-2.588-1.864-4.683-2.374-2.096-.51-5.318-.778-7.888-.683-2.569.105-5.604.585-7.517 1.284-1.914.698-3.22 2.021-3.972 2.918-.751.888-.439 1.135-.536 2.436-.098 1.29-.125-4.58-.028 5.33.096 9.91.462 44.258.588 54.137.137 9.87-.123 3.782.19 5.109s.83 2.102 1.708 2.843c.867.742 1.601 1.134 3.536 1.626 1.935.48 5.632 1.245 8.043 1.311 2.411.067 4.518-.264 6.432-.893 1.914-.628 4.01-1.979 5.032-2.869 1.031-.89.93-2.05 1.106-2.47.186-.413-.01-.02-.01-.03m0 0c-.105-9.7-.553-47.398-.658-58.197-.106-10.8.25-5.043.025-6.63-.226-1.579-.36-1.977-1.368-2.848-1.009-.87-2.588-1.864-4.683-2.374-2.096-.51-5.318-.778-7.888-.683-2.569.105-5.604.585-7.517 1.284-1.914.698-3.22 2.021-3.972 2.918-.751.888-.439 1.135-.536 2.436-.098 1.29-.125-4.58-.028 5.33.096 9.91.462 44.258.588 54.137.137 9.87-.123 3.782.19 5.109s.83 2.102 1.708 2.843c.867.742 1.601 1.134 3.536 1.626 1.935.48 5.632 1.245 8.043 1.311 2.411.067 4.518-.264 6.432-.893 1.914-.628 4.01-1.979 5.032-2.869 1.031-.89.93-2.05 1.106-2.47.186-.413-.01-.02-.01-.03" stroke="#087f5b" stroke-width="2" fill="none"></path></g><path d="M217.54 284.015c-.115-.419-.097-1.749-.695-2.513-.597-.764-1.765-1.533-2.89-2.092-1.116-.55-2.19-1.029-3.833-1.243-1.632-.214-3.822-.192-5.98-.061-2.16.14-5.139.24-6.982.888-1.834.648-3.23 2.082-4.041 3.01-.821.928-.7 2.126-.845 2.548m25.266-.537c-.115-.419-.097-1.749-.695-2.513-.597-.764-1.765-1.533-2.89-2.092-1.116-.55-2.19-1.029-3.833-1.243-1.632-.214-3.822-.192-5.98-.061-2.16.14-5.139.24-6.982.888-1.834.648-3.23 2.082-4.041 3.01-.821.928-.7 2.126-.845 2.548M218.127 306.028c-.113-.339-.094-1.399-.68-2.013-.596-.614-1.762-1.223-2.886-1.672-1.115-.44-2.188-.819-3.82-.983-1.632-.174-3.812-.153-5.96-.042-2.16.121-5.129.2-6.964.728-1.835.518-3.224 1.672-4.037 2.41-.822.748-.703 1.707-.85 2.048m25.197-.476c-.113-.339-.094-1.399-.68-2.013-.596-.614-1.762-1.223-2.886-1.672-1.115-.44-2.188-.819-3.82-.983-1.632-.174-3.812-.153-5.96-.042-2.16.121-5.129.2-6.964.728-1.835.518-3.224 1.672-4.037 2.41-.822.748-.703 1.707-.85 2.048" stroke="#087f5b" stroke-width="2" fill="none" stroke-opacity="0.8" fill-opacity="0.8" stroke-linecap="round"></path><g stroke-opacity="0.8" fill-opacity="0.8" stroke-linecap="round"><path d="M192.53 327.34c-.003-.33.063-.661.19-.983.127-.331.314-.653.56-.965.258-.313.565-.616.932-.91a9.707 9.707 0 0 1 1.272-.822c.478-.254 1.005-.5 1.573-.715a19.529 19.529 0 0 1 1.815-.588 27.619 27.619 0 0 1 2.015-.44 28.774 28.774 0 0 1 4.367-.382 29.679 29.679 0 0 1 4.373.297c.691.113 1.372.247 2.014.4.642.164 1.263.348 1.835.552.562.205 1.105.44 1.577.685a9.09 9.09 0 0 1 1.288.798c.373.286.696.583.949.89.253.308.456.626.59.955.122.318.195.648.199.978.003.33-.064.66-.18.992a3.852 3.852 0 0 1-.571.955 5.406 5.406 0 0 1-.931.91 8.265 8.265 0 0 1-1.273.822c-.467.254-1.005.5-1.563.715-.568.216-1.186.412-1.824.588a23.76 23.76 0 0 1-2.006.44c-.699.116-1.428.213-2.157.27a27.274 27.274 0 0 1-4.43.043 24.327 24.327 0 0 1-2.152-.228 23.202 23.202 0 0 1-2.024-.4 19.529 19.529 0 0 1-1.826-.553 13.634 13.634 0 0 1-1.587-.684 8.771 8.771 0 0 1-1.287-.798 5.788 5.788 0 0 1-.95-.89 3.802 3.802 0 0 1-.578-.945c-.134-.329-.168-.818-.21-.988-.032-.16-.028.17 0 0" stroke-width="0" fill="#fff"></path><path d="M192.53 327.34c-.003-.33.063-.661.19-.983.127-.331.314-.653.56-.965.258-.313.565-.616.932-.91a9.707 9.707 0 0 1 1.272-.822c.478-.254 1.005-.5 1.573-.715a19.529 19.529 0 0 1 1.815-.588 27.619 27.619 0 0 1 2.015-.44 28.774 28.774 0 0 1 4.367-.382 29.679 29.679 0 0 1 4.373.297c.691.113 1.372.247 2.014.4.642.164 1.263.348 1.835.552.562.205 1.105.44 1.577.685a9.09 9.09 0 0 1 1.288.798c.373.286.696.583.949.89.253.308.456.626.59.955.122.318.195.648.199.978.003.33-.064.66-.18.992a3.852 3.852 0 0 1-.571.955 5.406 5.406 0 0 1-.931.91 8.265 8.265 0 0 1-1.273.822c-.467.254-1.005.5-1.563.715-.568.216-1.186.412-1.824.588a23.76 23.76 0 0 1-2.006.44c-.699.116-1.428.213-2.157.27a27.274 27.274 0 0 1-4.43.043 24.327 24.327 0 0 1-2.152-.228 23.202 23.202 0 0 1-2.024-.4 19.529 19.529 0 0 1-1.826-.553 13.634 13.634 0 0 1-1.587-.684 8.771 8.771 0 0 1-1.287-.798 5.788 5.788 0 0 1-.95-.89 3.802 3.802 0 0 1-.578-.945c-.134-.329-.168-.818-.21-.988-.032-.16-.028.17 0 0" stroke="#087f5b" stroke-width="2" fill="none"></path></g><text font-family="Cascadia, Segoe UI Emoji" font-size="20" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(226.88 271.246)">channel</text><g stroke-linecap="round"><path d="M204.94 215.41c.05 14.14.1 28.27.13 35.91m-.13-35.91c.03 8.06.06 16.12.13 35.91" stroke="#000" stroke-width="2" fill="none"></path><path d="m205.07 251.32-6.39-13.57 12.68-.04-6.29 13.61" stroke-width="0" fill-rule="evenodd"></path><path d="M205.07 251.32c-2.52-5.34-5.03-10.68-6.39-13.57m6.39 13.57c-1.44-3.04-2.87-6.09-6.39-13.57m0 0c4.07-.01 8.14-.03 12.68-.04m-12.68.04c4.99-.02 9.99-.03 12.68-.04m0 0-6.29 13.61m6.29-13.61c-2.03 4.38-4.05 8.76-6.29 13.61m0 0s0 0 0 0m0 0s0 0 0 0" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-opacity="0.8" fill-opacity="0.8" stroke-linecap="round"><path d="M109.733 65.557h19.66v18.42h-19.66" stroke-width="0" fill="#12b886"></path><path d="M109.733 65.557h19.66m-19.66 0h19.66m0 0v18.42m0-18.42v18.42m0 0h-19.66m19.66 0h-19.66m0 0v-18.42m0 18.42v-18.42" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-opacity="0.8" fill-opacity="0.8" stroke-linecap="round"><path d="M137.502 65.557h19.66v18.42h-19.66" stroke-width="0" fill="#12b886"></path><path d="M137.502 65.557h19.66m-19.66 0h19.66m0 0v18.42m0-18.42v18.42m0 0h-19.66m19.66 0h-19.66m0 0v-18.42m0 18.42v-18.42" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-opacity="0.8" fill-opacity="0.8" stroke-linecap="round"><path d="M164.331 65.557h19.66v18.42h-19.66" stroke-width="0" fill="#12b886"></path><path d="M164.331 65.557h19.66m-19.66 0h19.66m0 0v18.42m0-18.42v18.42m0 0h-19.66m19.66 0h-19.66m0 0v-18.42m0 18.42v-18.42" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-opacity="0.8" fill-opacity="0.8" stroke-linecap="round"><path d="M193.964 65.557h19.66v18.42h-19.66" stroke-width="0" fill="#12b886"></path><path d="M193.964 65.557h19.66m-19.66 0h19.66m0 0v18.42m0-18.42v18.42m0 0h-19.66m19.66 0h-19.66m0 0v-18.42m0 18.42v-18.42" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-opacity="0.8" fill-opacity="0.8" stroke-linecap="round"><path d="M221.732 65.557h19.66v18.42h-19.66" stroke-width="0" fill="#12b886"></path><path d="M221.732 65.557h19.66m-19.66 0h19.66m0 0v18.42m0-18.42v18.42m0 0h-19.66m19.66 0h-19.66m0 0v-18.42m0 18.42v-18.42" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-opacity="0.8" fill-opacity="0.8" stroke-linecap="round"><path d="M248.562 65.695h19.66v18.42h-19.66" stroke-width="0" fill="#12b886"></path><path d="M248.562 65.695h19.66m-19.66 0h19.66m0 0v18.42m0-18.42v18.42m0 0h-19.66m19.66 0h-19.66m0 0v-18.42m0 18.42v-18.42" stroke="#000" stroke-width="2" fill="none"></path></g><g stroke-opacity="0.8" fill-opacity="0.8" stroke-linecap="round"><path d="M277.326 65.695h19.66v18.42h-19.66" stroke-width="0" fill="#12b886"></path><path d="M277.326 65.695h19.66m-19.66 0h19.66m0 0v18.42m0-18.42v18.42m0 0h-19.66m19.66 0h-19.66m0 0v-18.42m0 18.42v-18.42" stroke="#000" stroke-width="2" fill="none"></path></g><text font-family="Cascadia, Segoe UI Emoji" font-size="16" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(47.546 304.787)" stroke-opacity="0.8" fill-opacity="0.8">StreamWatcher</text><text font-family="Cascadia, Segoe UI Emoji" font-size="20" style="white-space:pre" dominant-baseline="text-before-edge" transform="rotate(.025 -756645.119 103542.561)" stroke-opacity="0.6" fill-opacity="0.6">Â©Xudong WangğŸ¤–ï¸ğŸˆ</text><text font-family="Cascadia, Segoe UI Emoji" font-size="20" fill="#1e1e1e" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(175.187 10)">request</text><text font-family="Cascadia, Segoe UI Emoji" font-size="20" fill="#1e1e1e" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(381.548 80.462)">response</text><text font-family="Cascadia, Segoe UI Emoji" font-size="16" fill="#099268" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(71.45 109.134)">data chunk</text><g stroke-linecap="round"><path d="M120.922 90.141c.04 3.37.19 16.85.23 20.22m-.23-20.22c.04 3.37.19 16.85.23 20.22" stroke="#099268" stroke-width="2" fill="none"></path><path d="m120.922 90.141 4.38 9.11-8.55.1 4.17-9.21" stroke-width="0" fill="#099268" fill-rule="evenodd"></path><path d="M120.922 90.141c1.57 3.27 3.14 6.54 4.38 9.11m-4.38-9.11c1.42 2.95 2.84 5.91 4.38 9.11m0 0c-1.97.03-3.94.05-8.55.1m8.55-.1c-1.97.03-3.94.05-8.55.1m0 0c1.45-3.21 2.91-6.42 4.17-9.21m-4.17 9.21c1.65-3.63 3.29-7.27 4.17-9.21m0 0s0 0 0 0m0 0s0 0 0 0" stroke="#099268" stroke-width="2" fill="none"></path></g></svg><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>æ³¨</div><div class="admonitionContent_S0QG"><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¼šä½¿ç”¨<code>RESTClient</code>ç›‘å¬èµ„æºçš„å˜æ›´ã€‚<a href="/crd-controller-from-scratch/docs/intro#%E7%BA%A6%E5%AE%9A">ğŸˆ</a></p></div></div><p>é€šè¿‡ç›‘å¬èµ„æºçš„å˜æ›´äº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸Šè¿°æ§åˆ¶å™¨åŸºç¡€ç‰ˆä¼ªä»£ç ä¼˜åŒ–ä¸ºï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> event </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> eventChannel </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  desired </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getDesiredState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  current </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getCurrentState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">makeChanges</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">desired</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> current</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ‘ä»¬å†ç¨ç¨è¡¥ä¸Šä¸€ç‚¹ç»†èŠ‚ï¼šæ ¹æ®æ§åˆ¶å™¨çš„å®šä¹‰ï¼Œ<em>æ§åˆ¶å™¨</em>æœ¬èº«è¦æœ‰æ£€ç´¢æŸç§ï¼ˆæˆ–è€…å¤šç§<sup id="fnref-7"><a href="#fn-7" class="footnote-ref">7</a></sup>ï¼‰èµ„æºç±»å‹çš„æœŸæœ›çŠ¶æ€ä¸å®é™…çŠ¶æ€çš„èƒ½åŠ›ã€‚
ä¸€ç§ç®€å•ç›´æ¥çš„æ–¹å¼æ˜¯é€šè¿‡Kubernetes APIæ¥è·å–æ­¤åˆ»çš„èµ„æºçš„é›†åˆï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> event </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> eventChannel </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  resources </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getResourceListFromK8sAPI</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> resource </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> resources </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token function" style="color:#d73a49">makeChanges</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">resource</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">desired</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> resource</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">current</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç„¶è€Œè¿™å…¶å®å¹¶ä¸æ˜¯ä¸€ç§å¥½çš„åŠæ³•ã€‚
ä¸€æ–¹é¢ï¼Œé€šè¿‡Kubernetes APIæ£€ç´¢èµ„æºé›†åˆæœ¬èº«å¹¶ä¸é«˜æ•ˆ<sup id="fnref-8"><a href="#fn-8" class="footnote-ref">8</a></sup>ã€‚å¦ä¸€æ–¹é¢ï¼Œåœ¨æ§åˆ¶å™¨ä¸­ï¼Œ<em>åè°ƒ</em>æ˜¯æ§åˆ¶å™¨ä¸­éœ€è¦é¢‘ç¹å‘ç”Ÿçš„åŠ¨ä½œã€‚</p><p>é‚£ä¹ˆåœ¨æ§åˆ¶å™¨ä¸­ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•é«˜æ•ˆåœ°è·å–èµ„æºé›†åˆå‘¢ï¼Ÿ
æˆ‘ä»¬ä¸å¦¨æ¢ä¸€ç§æ€è·¯ï¼ŒKubernetes APIçš„watchæœºåˆ¶ä¸ä»…ä»…å¯ä»¥è®©æˆ‘ä»¬æœ‰ç›‘å¬èµ„æºå˜æ›´çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬ç†è®ºä¸Šæ˜¯ä¹Ÿå¯ä»¥<strong>åˆ©ç”¨watchæœºåˆ¶æœ¬èº«åœ¨æœ¬åœ°ç»´æŠ¤ä¸€å¥—èµ„æºå½“å‰çš„æœ€æ–°å‰¯æœ¬</strong>â€”â€”èµ„æºæœ€æ–°çš„çŠ¶æ€å…¶å®ç­‰åŒäºè¯¥èµ„æºæœ€æ–°çš„äº‹ä»¶ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä»watchæœºåˆ¶åˆ°informer">ä»watchæœºåˆ¶åˆ°Informer<a href="#ä»watchæœºåˆ¶åˆ°informer" class="hash-link" aria-label="Direct link to ä»watchæœºåˆ¶åˆ°Informer" title="Direct link to ä»watchæœºåˆ¶åˆ°Informer">â€‹</a></h3><p>å¹¸è¿çš„æ˜¯åœ¨<code>client-go</code>ä¸­ï¼Œå®˜æ–¹å¼€å‘è€…å·²ç»ä¸ºæˆ‘ä»¬å®ç°äº†<strong>åŸºäºwatchæœºåˆ¶çš„æœ¬åœ°èµ„æºç¼“å­˜æœºåˆ¶</strong>â€”â€”<code>Informer</code>ç»„ä»¶ã€‚å®ƒè®¾è®¡çš„åˆè¡·æ—¨åœ¨è®©å¼€å‘è€…å°½é‡é¿å…ç›´æ¥é€šè¿‡Kubernetes APIæ£€ç´¢èµ„æºé›†åˆä»è€Œè¾¾åˆ°å‡è½»KubernetesæœåŠ¡ç«¯å‹åŠ›ã€‚
å½“ç„¶ï¼Œå®ƒä¹Ÿå®Œç¾å¥‘åˆäº†æˆ‘ä»¬å¯¹äºæ§åˆ¶å™¨çš„éœ€æ±‚ï¼š</p><ol><li>èµ„æºå˜æ›´äº‹ä»¶çš„é€šçŸ¥â€”â€”ä»¥ä¼˜åŒ–åè°ƒåŠ¨ä½œçš„è§¦å‘æ—¶æœºã€‚</li><li>Kubernetesèµ„æºçš„æœ¬åœ°ç¼“å­˜â€”â€”è®©æˆ‘ä»¬æ‹¥æœ‰ä¸€ä¸ªé«˜æ•ˆæ£€ç´¢Kubernetesèµ„æºé›†åˆçš„æ–¹å¼ã€‚</li></ol><div class="footnotes"><hr><ol><li id="fn-2"><p>è¿™ä¸ªå®šä¹‰å…¶å®æ˜¯æ•´åˆäº†å®˜æ–¹æ–‡æ¡£ä¸­ä¸¤ä¸ªå¯¹æ§åˆ¶å™¨çš„æè¿°ï¼š</p><ul><li><p><a href="https://kubernetes.io/docs/concepts/architecture/controller/" target="_blank" rel="noopener noreferrer">Controllers <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:nonzero;fill:#326ce5;fill-opacity:1" d="M7.945 0c-.14.008-.28.043-.41.102L1.973 2.668c-.29.137-.5.39-.575.691L.028 9.13a.976.976 0 0 0 .202.86l3.852 4.624c.203.242.508.387.832.387l6.172-.004c.324 0 .633-.14.832-.383l3.852-4.625a.987.987 0 0 0 .203-.863l-1.375-5.766a1.01 1.01 0 0 0-.575-.691L8.461.102C8.3.027 8.12-.008 7.945 0Zm0 0"></path><path style="stroke:none;fill-rule:nonzero;fill:#fff;fill-opacity:1" d="M8 1.965c-.184 0-.332.16-.332.355v.012c0 .023-.004.059 0 .082.004.113.027.2.043.305.031.222.055.41.039.582a.382.382 0 0 1-.11.168l-.007.136c-.2.016-.403.043-.602.09a4.299 4.299 0 0 0-2.176 1.2l-.12-.082c-.06.007-.118.023-.196-.02a3.193 3.193 0 0 1-.45-.39c-.073-.079-.128-.153-.218-.227-.02-.016-.05-.04-.074-.055a.411.411 0 0 0-.235-.086.328.328 0 0 0-.265.113c-.113.141-.074.352.082.477h.008c.02.02.047.04.066.055.098.066.184.101.277.156.2.117.364.219.497.336.05.055.058.144.066.187l.105.09a4.057 4.057 0 0 0-.68 2.903l-.136.039c-.039.046-.09.117-.144.14-.172.051-.364.07-.598.094-.11.008-.203.004-.32.023a.554.554 0 0 1-.086.02l-.004.004h-.004c-.2.047-.324.219-.281.39.039.172.23.278.43.235h.007c.031-.008.063-.012.086-.02.117-.03.2-.074.3-.109.22-.078.403-.14.583-.168.074-.004.152.047.191.066l.145-.023a4.207 4.207 0 0 0 1.918 2.316l-.059.141c.02.055.047.129.027.18-.062.164-.175.336-.3.523-.059.09-.121.156-.176.258-.016.023-.031.062-.043.086-.086.18-.024.383.14.457.165.078.372-.004.458-.18h.003c.012-.027.028-.058.04-.082.046-.105.062-.195.097-.297.086-.215.137-.437.258-.578.031-.039.086-.05.145-.066l.074-.133a4.385 4.385 0 0 0 3.07.008c.024.035.063.105.074.125.055.015.117.027.168.097.09.153.153.329.23.543.032.102.048.188.094.293l.043.082c.09.18.293.262.461.184.164-.078.227-.281.141-.457-.012-.027-.031-.063-.043-.086-.055-.102-.117-.168-.18-.258-.125-.191-.23-.347-.293-.511-.027-.083.004-.133.024-.188-.012-.016-.04-.094-.055-.129a4.21 4.21 0 0 0 1.918-2.336c.043.008.117.02.145.027.05-.035.093-.074.183-.066.18.024.364.086.582.164.102.035.184.082.301.11.023.007.059.011.086.02h.004c.004 0 .004 0 .004.003.199.039.39-.066.43-.238.042-.172-.083-.344-.282-.39-.027-.009-.066-.017-.094-.024-.117-.02-.21-.016-.32-.024a3.314 3.314 0 0 1-.598-.094c-.07-.027-.12-.105-.144-.14l-.133-.04a4.065 4.065 0 0 0-.695-2.895c.035-.026.101-.085.117-.1.008-.059.004-.118.063-.18.132-.121.296-.219.496-.34.093-.05.183-.086.277-.152.023-.016.05-.043.074-.059.16-.125.195-.336.082-.472-.117-.141-.336-.153-.496-.032-.023.02-.055.04-.074.059-.09.074-.145.148-.223.223a2.991 2.991 0 0 1-.445.394c-.066.035-.16.024-.203.02l-.13.09a4.415 4.415 0 0 0-2.76-1.294 2.321 2.321 0 0 1-.009-.14c-.043-.043-.097-.074-.109-.164-.016-.172.008-.36.04-.582.015-.106.038-.192.042-.305.004-.027 0-.066 0-.094 0-.195-.148-.355-.332-.355Zm-.418 2.492-.098 1.688-.007.003a.292.292 0 0 1-.293.274.282.282 0 0 1-.172-.055h-.004l-1.434-.98a3.459 3.459 0 0 1 1.653-.867c.12-.028.238-.047.355-.063Zm.836 0a3.52 3.52 0 0 1 1.992.93l-1.422.976-.004-.004a.302.302 0 0 1-.402-.05.3.3 0 0 1-.066-.164ZM5.055 6.02l1.308 1.128v.008a.27.27 0 0 1 .035.387.28.28 0 0 1-.152.098v.007l-1.676.465a3.214 3.214 0 0 1 .485-2.093Zm5.879 0a3.262 3.262 0 0 1 .5 2.09L9.75 7.64v-.007a.282.282 0 0 1-.21-.336.306.306 0 0 1 .093-.152ZM7.73 7.234h.536l.336.403-.122.5-.48.226-.484-.226-.118-.5ZM9.45 8.61c.023 0 .046.004.066.008l.004-.004 1.734.282a3.347 3.347 0 0 1-1.39 1.683l-.673-1.57h.004c-.062-.14 0-.301.14-.367a.289.289 0 0 1 .114-.032Zm-2.915.008c.133.004.254.09.285.223a.285.285 0 0 1-.02.172l.009.008-.668 1.554a3.372 3.372 0 0 1-1.383-1.672l1.719-.285.003.004c.02-.004.04-.004.055-.004Zm1.453.68a.28.28 0 0 1 .137.031c.059.027.105.07.133.121h.008l.847 1.477a3.586 3.586 0 0 1-2.219 0l.844-1.477h.004a.29.29 0 0 1 .246-.152Zm0 0"></path></svg></a></p><blockquote><p>In robotics and automation, a control loop is a non-terminating loop that regulates the state of a system.</p><p>In Kubernetes, controllers are control loops that watch the state of your cluster, then make or request changes where needed.
Each controller tries to move the current cluster state closer to the desired state.</p></blockquote></li><li><p><a href="https://github.com/kubernetes/community/blob/master/contributors/devel/sig-api-machinery/controllers.md" target="_blank" rel="noopener noreferrer">Writing Controllers <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:evenodd;fill:#24292f;fill-opacity:1" d="M7.977 0C3.567 0 0 3.438 0 7.691c0 3.399 2.285 6.278 5.453 7.293.399.079.543-.164.543-.367 0-.18-.016-.789-.016-1.426-2.218.457-2.68-.918-2.68-.918-.355-.89-.882-1.12-.882-1.12-.727-.47.05-.47.05-.47.805.051 1.231.79 1.231.79.711 1.172 1.86.84 2.324.636.063-.496.278-.84.5-1.03-1.77-.18-3.632-.84-3.632-3.798 0-.84.316-1.527.82-2.062-.078-.192-.356-.98.078-2.035 0 0 .676-.204 2.191.789a7.99 7.99 0 0 1 3.989 0c1.52-.993 2.195-.79 2.195-.79.434 1.055.156 1.844.078 2.036.516.535.817 1.222.817 2.062 0 2.957-1.86 3.606-3.645 3.797.293.242.543.7.543 1.426 0 1.031-.012 1.86-.012 2.113 0 .203.145.445.54.367 3.171-1.015 5.453-3.894 5.453-7.293C15.953 3.438 12.374 0 7.976 0Zm0 0"></path></svg></a></p><blockquote><p>A Kubernetes controller is an active reconciliation process.
That is, it watches some object for the world&#x27;s desired state, and it watches the world&#x27;s actual state, too.
Then, it sends instructions to try and make the world&#x27;s current state be more like the desired state.</p></blockquote></li></ul><p><a href="#fnref-2" class="footnote-backref">â†©</a></p></li><li id="fn-3"><p>Kubernetesæ§åˆ¶å™¨å…¶å®å€Ÿç”¨äº†è‡ªåŠ¨åŒ–ä¸­<em><a href="https://en.wikipedia.org/wiki/Closed-loop_controller" target="_blank" rel="noopener noreferrer">closed-loop controller</a></em>è¿™ä¸ªæ¦‚å¿µã€‚åœ¨è‡ªåŠ¨åŒ–é‡Œï¼Œclosed-loop controllerä½¿ç”¨åé¦ˆæ¥æ§åˆ¶åŠ¨æ€ç³»ç»Ÿçš„çŠ¶æ€æˆ–è¾“å‡ºã€‚å®ƒä»¬åœ¨æœ¬è´¨ä¸Šæ˜¯ç›¸é€šçš„ã€‚<a href="#fnref-3" class="footnote-backref">â†©</a></p></li><li id="fn-4"><p>åœ¨Kubernetesç³»ç»Ÿä¸­ï¼ŒçœŸæ­£åˆ›å»ºpodèµ„æºçš„åŠ¨ä½œç”±<code>kubelet</code>ç»„ä»¶å®Œæˆã€‚<a href="#fnref-4" class="footnote-backref">â†©</a></p></li><li id="fn-5"><p>æ‰€è°“HTTP&quot;æµ&quot;æŒ‡çš„æ˜¯HTTP 1.1çš„<em>åˆ†å—ä¼ è¾“ç¼–ç </em>ï¼ˆ<a href="https://en.wikipedia.org/wiki/Chunked_transfer_encoding" target="_blank" rel="noopener noreferrer">HTTP/1.1 Chunked Transfer Coding</a>ï¼‰ã€‚
<code>kube-apiserver</code>ä¼šåœ¨è¿”å›çš„å¤´ï¼ˆheaderï¼‰ä¸­
è®¾ç½®<code>Transfer-Encoding</code>ä¸º<code>chunked</code>ï¼Œè¡¨ç¤ºé‡‡ç”¨åˆ†å—ä¼ è¾“ç¼–ç ï¼Œå®¢æˆ·ç«¯æ¯è¯»å®Œä¸€ä¸ªæ•°æ®å—ï¼ˆå³èµ„æºçš„å˜æ›´äº‹ä»¶ï¼‰åï¼Œä¼šç»§ç»­è¯»å–æˆ–ç­‰å¾…ä¸‹ä¸€ä¸ªæ•°æ®å—ï¼Œç›´åˆ°å®¢æˆ·ç«¯ä¸»åŠ¨ç»ˆæ­¢è¿æ¥æˆ–è€…è¯»åˆ°é•¿åº¦ä¸º0çš„æ•°æ®åˆ†å—ä¸ºæ­¢ã€‚
æ¯ä¸ªæ•°æ®å—ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯ä»¥åå…­è¿›åˆ¶å½¢å¼è¡¨ç¤ºçš„åˆ†å—é•¿åº¦ï¼Œåé¢ç´§è·Ÿç€ <code>\r\n</code>ä»¥å‘ŠçŸ¥å®¢æˆ·ç«¯åˆ†å—çš„å¤§å°ã€‚ç¬¬äºŒéƒ¨åˆ†æ˜¯åˆ†å—æ•°æ®æœ¬èº«ï¼Œåé¢ä¹Ÿæ˜¯ <code>\r\n</code>ï¼Œ ç»ˆæ­¢å—åˆ™æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º0çš„åˆ†å—ã€‚<a href="#fnref-5" class="footnote-backref">â†©</a></p></li><li id="fn-6"><p><code>WatchEvent</code>ç”±äºæ˜¯Kubernetes APIè¿”å›ä½“çš„è§£ç åçš„Goç±»å‹ï¼Œæ‰€ä»¥æ ¹æ®å®šä¹‰ï¼Œå®ƒä»ç„¶æ˜¯kindï¼Œå¹¶ä¸”å±äºkindçš„ç¬¬ä¸‰ç§ç±»ã€‚<a href="#fnref-6" class="footnote-backref">â†©</a></p></li><li id="fn-7"><p>å¯¹äºå¤æ‚çš„æ§åˆ¶å™¨å¯èƒ½éœ€è¦åŒæ—¶ç®¡ç†<code>pods</code>, <code>services</code>ï¼Œ<code>configmaps</code>ç­‰å¤šç§èµ„æºç±»å‹ã€‚<a href="#fnref-7" class="footnote-backref">â†©</a></p></li><li id="fn-8"><p><a href="https://kubernetes.io/docs/reference/using-api/api-concepts" target="_blank" rel="noopener noreferrer">Kubernetes API Concepts <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15"><path style="stroke:none;fill-rule:nonzero;fill:#326ce5;fill-opacity:1" d="M7.945 0c-.14.008-.28.043-.41.102L1.973 2.668c-.29.137-.5.39-.575.691L.028 9.13a.976.976 0 0 0 .202.86l3.852 4.624c.203.242.508.387.832.387l6.172-.004c.324 0 .633-.14.832-.383l3.852-4.625a.987.987 0 0 0 .203-.863l-1.375-5.766a1.01 1.01 0 0 0-.575-.691L8.461.102C8.3.027 8.12-.008 7.945 0Zm0 0"></path><path style="stroke:none;fill-rule:nonzero;fill:#fff;fill-opacity:1" d="M8 1.965c-.184 0-.332.16-.332.355v.012c0 .023-.004.059 0 .082.004.113.027.2.043.305.031.222.055.41.039.582a.382.382 0 0 1-.11.168l-.007.136c-.2.016-.403.043-.602.09a4.299 4.299 0 0 0-2.176 1.2l-.12-.082c-.06.007-.118.023-.196-.02a3.193 3.193 0 0 1-.45-.39c-.073-.079-.128-.153-.218-.227-.02-.016-.05-.04-.074-.055a.411.411 0 0 0-.235-.086.328.328 0 0 0-.265.113c-.113.141-.074.352.082.477h.008c.02.02.047.04.066.055.098.066.184.101.277.156.2.117.364.219.497.336.05.055.058.144.066.187l.105.09a4.057 4.057 0 0 0-.68 2.903l-.136.039c-.039.046-.09.117-.144.14-.172.051-.364.07-.598.094-.11.008-.203.004-.32.023a.554.554 0 0 1-.086.02l-.004.004h-.004c-.2.047-.324.219-.281.39.039.172.23.278.43.235h.007c.031-.008.063-.012.086-.02.117-.03.2-.074.3-.109.22-.078.403-.14.583-.168.074-.004.152.047.191.066l.145-.023a4.207 4.207 0 0 0 1.918 2.316l-.059.141c.02.055.047.129.027.18-.062.164-.175.336-.3.523-.059.09-.121.156-.176.258-.016.023-.031.062-.043.086-.086.18-.024.383.14.457.165.078.372-.004.458-.18h.003c.012-.027.028-.058.04-.082.046-.105.062-.195.097-.297.086-.215.137-.437.258-.578.031-.039.086-.05.145-.066l.074-.133a4.385 4.385 0 0 0 3.07.008c.024.035.063.105.074.125.055.015.117.027.168.097.09.153.153.329.23.543.032.102.048.188.094.293l.043.082c.09.18.293.262.461.184.164-.078.227-.281.141-.457-.012-.027-.031-.063-.043-.086-.055-.102-.117-.168-.18-.258-.125-.191-.23-.347-.293-.511-.027-.083.004-.133.024-.188-.012-.016-.04-.094-.055-.129a4.21 4.21 0 0 0 1.918-2.336c.043.008.117.02.145.027.05-.035.093-.074.183-.066.18.024.364.086.582.164.102.035.184.082.301.11.023.007.059.011.086.02h.004c.004 0 .004 0 .004.003.199.039.39-.066.43-.238.042-.172-.083-.344-.282-.39-.027-.009-.066-.017-.094-.024-.117-.02-.21-.016-.32-.024a3.314 3.314 0 0 1-.598-.094c-.07-.027-.12-.105-.144-.14l-.133-.04a4.065 4.065 0 0 0-.695-2.895c.035-.026.101-.085.117-.1.008-.059.004-.118.063-.18.132-.121.296-.219.496-.34.093-.05.183-.086.277-.152.023-.016.05-.043.074-.059.16-.125.195-.336.082-.472-.117-.141-.336-.153-.496-.032-.023.02-.055.04-.074.059-.09.074-.145.148-.223.223a2.991 2.991 0 0 1-.445.394c-.066.035-.16.024-.203.02l-.13.09a4.415 4.415 0 0 0-2.76-1.294 2.321 2.321 0 0 1-.009-.14c-.043-.043-.097-.074-.109-.164-.016-.172.008-.36.04-.582.015-.106.038-.192.042-.305.004-.027 0-.066 0-.094 0-.195-.148-.355-.332-.355Zm-.418 2.492-.098 1.688-.007.003a.292.292 0 0 1-.293.274.282.282 0 0 1-.172-.055h-.004l-1.434-.98a3.459 3.459 0 0 1 1.653-.867c.12-.028.238-.047.355-.063Zm.836 0a3.52 3.52 0 0 1 1.992.93l-1.422.976-.004-.004a.302.302 0 0 1-.402-.05.3.3 0 0 1-.066-.164ZM5.055 6.02l1.308 1.128v.008a.27.27 0 0 1 .035.387.28.28 0 0 1-.152.098v.007l-1.676.465a3.214 3.214 0 0 1 .485-2.093Zm5.879 0a3.262 3.262 0 0 1 .5 2.09L9.75 7.64v-.007a.282.282 0 0 1-.21-.336.306.306 0 0 1 .093-.152ZM7.73 7.234h.536l.336.403-.122.5-.48.226-.484-.226-.118-.5ZM9.45 8.61c.023 0 .046.004.066.008l.004-.004 1.734.282a3.347 3.347 0 0 1-1.39 1.683l-.673-1.57h.004c-.062-.14 0-.301.14-.367a.289.289 0 0 1 .114-.032Zm-2.915.008c.133.004.254.09.285.223a.285.285 0 0 1-.02.172l.009.008-.668 1.554a3.372 3.372 0 0 1-1.383-1.672l1.719-.285.003.004c.02-.004.04-.004.055-.004Zm1.453.68a.28.28 0 0 1 .137.031c.059.027.105.07.133.121h.008l.847 1.477a3.586 3.586 0 0 1-2.219 0l.844-1.477h.004a.29.29 0 0 1 .246-.152Zm0 0"></path></svg></a></p><blockquote><p><a href="https://kubernetes.io/docs/reference/using-api/api-concepts/#retrieving-large-results-sets-in-chunks" target="_blank" rel="noopener noreferrer">Retrieving large results sets in chunks</a></p><p>On large clusters, retrieving the collection of some resource types may result in very large responses that can impact the server and client.
For instance, a cluster may have tens of thousands of Pods, each of which is equivalent to roughly 2 KiB of encoded JSON. Retrieving all pods across all namespaces may result in a very large response (10-20MB) and consume a large amount of server resources.</p></blockquote><p><a href="#fnref-8" class="footnote-backref">â†©</a></p></li></ol></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/crd-controller-from-scratch/docs/client-go/restclient"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">RESTClient</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/crd-controller-from-scratch/docs/client-go/informer-is-all-you-need"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">informer is all you need</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#å¯¹è±¡çš„çŠ¶æ€ä¸åè°ƒ" class="table-of-contents__link toc-highlight">å¯¹è±¡çš„çŠ¶æ€ä¸åè°ƒ</a></li><li><a href="#æ§åˆ¶å™¨controller" class="table-of-contents__link toc-highlight">æ§åˆ¶å™¨ï¼ˆControllerï¼‰</a></li><li><a href="#æ§åˆ¶å™¨ä¸å­èµ„æºstatus" class="table-of-contents__link toc-highlight">æ§åˆ¶å™¨ä¸å­èµ„æºstatus</a><ul><li><a href="#ä½¿ç”¨restclientæ›´æ–°kuberneteså¯¹è±¡çŠ¶æ€" class="table-of-contents__link toc-highlight">ä½¿ç”¨RESTClientæ›´æ–°Kuberneteså¯¹è±¡çŠ¶æ€</a></li></ul></li><li><a href="#æ§åˆ¶å™¨æ¨¡å¼" class="table-of-contents__link toc-highlight">æ§åˆ¶å™¨æ¨¡å¼</a></li><li><a href="#è¢«é—å¿˜çš„ç›‘å¬watchæœºåˆ¶" class="table-of-contents__link toc-highlight">è¢«é—å¿˜çš„ç›‘å¬ï¼ˆwatchï¼‰æœºåˆ¶</a><ul><li><a href="#ä½¿ç”¨restclientç›‘å¬èµ„æº" class="table-of-contents__link toc-highlight">ä½¿ç”¨RESTClientç›‘å¬èµ„æº</a></li><li><a href="#ä»watchæœºåˆ¶åˆ°informer" class="table-of-contents__link toc-highlight">ä»watchæœºåˆ¶åˆ°Informer</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 Xudong Wang, Under license <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/">CC BY-NC-ND 4.0</a>, Built with Docusaurus.ğŸˆ</div></div></div></footer></div>
<script src="/crd-controller-from-scratch/assets/js/runtime~main.56e28771.js"></script>
<script src="/crd-controller-from-scratch/assets/js/main.66bc2718.js"></script>
</body>
</html>