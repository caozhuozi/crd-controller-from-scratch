---
sidebar_position: 2
---
import KubernetesSVG from '@site/static/img/kubernetes-mark.svg';
import GitHubSVG from '@site/static/img/github-mark.svg';
import GVRSVG from '@site/static/img/gvr.svg';
import Kind3PNG from '@site/static/img/kind3.png';

# GVK
åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»*GVK*çš„æ¦‚å¿µï¼ŒåŒæ—¶ä¼šè¿›ä¸€æ­¥æ‰©å……å‰é¢[åˆè¯†kind](./kubernetes-api#åˆè¯†kind)å°èŠ‚å¼•å…¥çš„*kind*æ¦‚å¿µã€‚

## GVR

é€šå¸¸ï¼Œå¯¹äºä¸€ä¸ªKubernetes API URLï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­æå–å‡ºå®ƒçš„groupï¼Œversionï¼Œä»¥åŠresource typeä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š
<GVRSVG style={{height: "120px"}}/>


æˆ‘ä»¬ä¹Ÿå¯ä»¥è®¤ä¸º**èµ„æºç±»å‹ä¾å±äºAPIåˆ†ç»„å’Œç‰ˆæœ¬è€Œå­˜åœ¨**ã€‚
ç”±groupï¼Œversionï¼Œä»¥åŠresource typeè¿™ä¸‰ä¸ªä¿¡æ¯ï¼ˆå­—ç¬¦ä¸²ï¼‰ç»„æˆçš„ä¸‰å…ƒç»„è¢«ç§°ä¸º*GroupVersionResource*ï¼Œç®€ç§°*GVR*[^1]ã€‚

å®é™…ä¸Š*GVR*çš„æ¦‚å¿µæ¥æºäº`apimachinery`åº“ä¸­ä¸€ä¸ªç®€å•çš„ç»“æ„ä½“ï¼š
```go title="k8s.io/apimachinery/runtime/schema/group_version.go"
type GroupVersionResource struct {
	Group    string
	Version  string
	Resource string
}
```
æˆ‘ä»¬å…¶å®ç”šè‡³å¯ä»¥è¿™æ ·ç†è§£ï¼Œå…ˆæœ‰äº†æºç å®šä¹‰çš„ç»“æ„ä½“ï¼Œå†è¡ç”Ÿå‡ºäº†ç›¸å…³æœ¯è¯­å’Œæ¦‚å¿µã€‚[ğŸŒ§ï¸ï¸](../intro#çº¦å®š)

## GVK
åœ¨ä¹‹å‰çš„å°ç»“ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†æ¯ç§èµ„æºç±»å‹éƒ½å¯¹åº”ä¸€ä¸ªGoç±»å‹â€”â€”*kind*ï¼Œè€Œèµ„æºç±»å‹åˆä¾å±äºAPIåˆ†ç»„å’Œç‰ˆæœ¬è€Œå­˜åœ¨ã€‚ç›¸åº”åœ°ï¼Œkindä¹Ÿæœ‰åˆ†ç»„å’Œç‰ˆæœ¬çš„æ¦‚å¿µã€‚
èµ„æºç±»å‹æ˜¯Kubernetes API URLä¸­ç‰¹å®šä½ç½®çš„ä¸€ä¸ªæ ‡è¯†ï¼Œä¸åŒäºåˆ†ç»„å’Œç‰ˆæœ¬åœ¨URLä¸Šçš„è¡¨ç°å½¢å¼ï¼Œåœ¨Kubernetesæºç ä¸­ï¼ˆ`k8s.io/api`ï¼‰ï¼Œ
kindçš„ä¸åŒç‰ˆæœ¬ï¼ˆæˆ–åˆ†ç»„ï¼‰è¢«å®šä¹‰åœ¨ä¸åŒçš„ç›®å½•ï¼ˆåŒ…ï¼‰ä¸‹ä»¥ä½œåŒºåˆ†ã€‚
ä¾‹å¦‚ï¼Œ`horizontalpodautoscaler`åœ¨Kubernetesç³»ç»Ÿä¸­åŒæ—¶å­˜åœ¨å¤šä¸ªç‰ˆæœ¬ï¼Œ`v1`ï¼Œ`v2`ç­‰[^2]ã€‚
`HorizontalPodAutoscaler`ç±»å‹åˆ™åˆ†åˆ«å®šä¹‰åœ¨`k8s.io/api`åº“çš„`autoscaling/`åŒ…ä¸­çš„å­åŒ…`v1`ï¼Œ`v2`ä¸­ã€‚
```text title="k8s.io/api"
autoscaling/
|-- v1
|   `-- types.go
|-- v2
|   `-- types.go
|-- v2beta1
|   `-- types.go
`-- v2beta2
    `-- types.go
```
ä¸*GroupVersionResource*æ¦‚å¿µç±»ä¼¼ï¼Œkindä¹Ÿæœ‰ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„æ¦‚å¿µ*GroupVersionKind*ã€‚
åœ¨Kubernetesä¸­ï¼Œç”±Goç±»å‹**æœ¬èº«çš„åç§°**å’Œæ­¤ç±»å‹å¯¹åº”çš„Groupï¼ŒVersionä¸‰ä¸ªå­—ç¬¦ä¸²ç»„æˆçš„ä¸‰å…ƒç»„è¢«æˆä¸º*GroupVersionKind*ï¼Œç®€ç§°*GVK*ã€‚
å®ƒåœ¨`apimachinery`åº“ä¸­å¯¹åº”çš„æ•°æ®ç»“æ„ä¸ºï¼š
```Go title="k8s.io/apimachinery/runtime/schema/group_version.go"
type GroupVersionKind struct {
	Group    string
	Version  string
	Kind     string
}
```

ä¾‹å¦‚ï¼Œ`Job`ç±»çš„åå­—ä¸º`Job`ï¼Œç”±`Job`ï¼Œ`batch`ï¼ˆåˆ†ç»„ï¼‰ï¼Œ`v1`ï¼ˆç‰ˆæœ¬ï¼‰ ä¸‰ä¸ª**å­—ç¬¦ä¸²**ç»„æˆçš„ä¸‰å…ƒç»„å³ä¸º*GVK*ã€‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡`kubectl api-resources`å‘½ä»¤æŸ¥çœ‹é›†ç¾¤ä¸­çš„ï¼š

[comment]: # (TODO: è¿™é‡Œéœ€è¦è§£é‡Šä¸ºä»€ä¹ˆä¼šåŒæ—¶å­˜åœ¨ä¸¤ä¸ªç±»ä¼¼çš„æ¦‚å¿µï¼Ÿå®ƒä»¬çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ)

## å†è¯†kind
åœ¨ä¹‹å‰çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä»*èµ„æºç±»å‹ï¼ˆresource typeï¼‰*çš„è§’åº¦å¼•å…¥äº†kindï¼Œå…¶å®kindçš„æ¦‚å¿µå´è¦æ›´å¹¿ã€‚
åœ¨Kubernetesç³»ç»Ÿä¸­ï¼Œ**ä»»ä½•éœ€è¦è¢«åºåˆ—åŒ–/ååºåˆ—åŒ–ï¼ˆä»¥ç”¨äºåœ¨ç½‘ç»œä¸­ä¼ è¾“æˆ–è€…è½ç›˜ï¼‰çš„Goç±»å‹éƒ½è¢«ç§°ä¸º*kind***[^3]ã€‚

ä¾‹å¦‚ï¼Œæ ¹æ®[Kubernetes API Reference Doc <KubernetesSVG />](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.27/#job-v1-batch)ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹RESTfulè¯·æ±‚ï¼š
```
GET /apis/batch/v1/namespaces/{namespace}/jobs
```
æ¥è·å–æŸä¸ª`namespace`ä¸‹é¢æ‰€æœ‰çš„jobèµ„æºã€‚
ä¸‹é¢æ˜¯ä¸€ä¸ªä¸Šè¿°è¯·æ±‚è¿”å›ä½“ï¼ˆJSONæ ¼å¼ï¼‰[^4]çš„ä¾‹å­ï¼š
```json
{
    "apiVersion": "batch/v1",
    "kind": "JobList",
    "metadata": {
        "resourceVersion": ""
    }
    "items": [
        {
            "apiVersion": "batch/v1",
            "kind": "Job",
            "metadata": {
                "creationTimestamp": "2021-11-02T09:06:03Z",
                "name": "debug-b392ad51-b656-3af0-8718-0f96d09a92cf",
                "namespace": "default",
                "resourceVersion": "223357957",
                "uid": "28b061c5-d1ba-4a2e-8aa8-88bf216c2b2f"
            },
            "spec": {
                "backoffLimit": 0,
                "completions": 1,
                "parallelism": 1,
                "selector": {
                    "matchLabels": {
                        "controller-uid": "28b061c5-d1ba-4a2e-8aa8-88bf216c2b2f"
                    }
                },
                "template": {
                    "metadata": {
                        "creationTimestamp": null,
                        "labels": {
                            "controller-uid": "28b061c5-d1ba-4a2e-8aa8-88bf216c2b2f",
                            "job-name": "debug-b392ad51-b656-3af0-8718-0f96d09a92cf"
                        }
                    },
                    "spec": {
                        "containers": [
                            {
                                "image": "busybox",
                                "imagePullPolicy": "IfNotPresent",
                                "name": "debug-pod"
                            }
                        ],
                        "restartPolicy": "Never"
                    }
                }
            },
            "status": {
                "active": 1,
                "startTime": "2021-11-02T09:06:03Z"
            }
        }
    ]
}
```
æ ¹æ®æ–‡æ¡£è¯´æ˜ï¼Œè¯·æ±‚è¿”å›ä½“ï¼ˆè¢«ç¼–ç å‰ï¼‰å¯¹åº”çš„Goç±»å‹ä¸º`JobList`ï¼š
```go title="k8s.io/batch/v1/types.go"
type JobList struct {
	metav1.TypeMeta
	metav1.ListMeta

	Items []Job
}
```
æ˜¾ç„¶è¿™ä¸ªç±»å‹å¹¶ä¸**ç›´æ¥**å¯¹åº”ä»»ä½•*èµ„æºç±»å‹*ï¼Œå®ƒè¡¨ç¤ºçš„æ˜¯`jobs`èµ„æºçš„**é›†åˆ**ï¼Œå…¶ä¸­`Items`å­—æ®µæ­£æ˜¯`Job`ç±»å‹çš„åˆ‡ç‰‡ã€‚

å†æ¯”å¦‚ï¼Œå½“æˆ‘ä»¬æƒ³è¦åˆ é™¤ä¸€ä¸ªjobèµ„æºçš„æ—¶å€™ï¼Œæ ¹æ®æ–‡æ¡£ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹RESTfulè¯·æ±‚ï¼š
```
DELETE /apis/batch/v1/namespaces/{namespace}/jobs/{name}
```
ä¸€ä¸ªè¯·æ±‚ä½“[^4]æ ·ä¾‹ä¸ºï¼š
```json
{
  "kind": "DeleteOptions",
  "apiVersion": "meta.k8s.io/v1",
  "gracePeriodSeconds": 1,
  "preconditions": {
    "uid": "uidValue",
    "resourceVersion": "resourceVersionValue"
  },
  "orphanDependents": true,
  "propagationPolicy": "propagationPolicyValue",
  "dryRun": [
    "dryRunValue"
  ]
}
```
è¯¥è¯·æ±‚ä½“å¯¹åº”çš„Goç±»å‹ä¸º`DeleteOptions`ï¼š
```go title=â€œk8s.io/apimachinery/pkg/apis/meta/v1/types.goâ€
type DeleteOptions struct {
	TypeMeta

	GracePeriodSeconds *int64

	Preconditions *Preconditions

	OrphanDependents *bool

	PropagationPolicy *DeletionPropagation

	DryRun []string
}
```
è¯¥è¯·æ±‚å¯¹åº”çš„ä¸€ä¸ªè¿”å›æ ·ä¾‹ä¸ºï¼š
```json
{
  "kind": "Status",
  "apiVersion": "v1",
  "metadata": {},
  "status": "Success",
  "details": {
    "name": "my-job",
    "kind": "jobs"
  },
  "code": 200
}
```
è¯¥è¯·æ±‚çš„è¿”å›ä½“ï¼ˆè¢«ç¼–ç å‰ï¼‰å¯¹åº”çš„Goç±»å‹ä¸º`Status`ï¼š
```go title="k8s.io/apimachinery/pkg/apis/meta/v1/types.go"
type Status struct {
	ListMeta

	Status string

	Message string

	Reason StatusReason

	Details *StatusDetails

	Code int32
}
```
æ­¤ç±»å‹ä¸­`Status`å­—æ®µï¼ˆå­—ç¬¦ä¸²ï¼‰è¡¨ç¤ºåˆ é™¤æ“ä½œçš„ç»“æœï¼š`Success`æˆ–è€…`Failure`ï¼Œ `Code`å­—æ®µï¼ˆæ•´å‹ï¼‰ä¸HTTPçš„çŠ¶æ€ç ç›¸å¯¹åº”ã€‚
é™¤æ­¤ä»¥å¤–ï¼Œ**å¯¹äºä»»ä½•è¯·æ±‚ï¼Œ`kube-apiserver`å¦‚æœå¤„ç†å¼‚å¸¸æˆ–è€…å¤±è´¥ï¼ˆHTTPçŠ¶æ€ç é`2xx`æ—¶ï¼‰ï¼Œéƒ½ä¼šè¿”å›è¿™ä¸ª`Status`ç±»å‹ç¼–ç åçš„JSONæ ¼å¼æ•°æ®**ã€‚ä¾‹å¦‚ï¼š
```bash
$ curl -v -k -H "Authorization: Bearer WhCDvq4VPpYhrcfmF6ei7V9qlbqTubUc" https://10.240.122.184:443/api/v1/namespaces/default/pods/grafana

> GET /api/v1/namespaces/default/pods/grafana HTTP/1.1
> User-Agent: curl/7.26.0
> Host: 10.240.122.184
> Accept: */*
> Authorization: Bearer WhCDvq4VPpYhrcfmF6ei7V9qlbqTubUc
>

< HTTP/1.1 404 Not Found
< Content-Type: application/json
< Date: Wed, 20 May 2015 18:10:42 GMT
< Content-Length: 232
<
{
  "kind": "Status",
  "apiVersion": "v1",
  "metadata": {},
  "status": "Failure",
  "message": "pods \"grafana\" not found",
  "reason": "NotFound",
  "details": {
    "name": "grafana",
    "kind": "pods"
  },
  "code": 404
}
```
æ˜¾ç„¶`DeleteOptions`å’Œ`Status`éƒ½ä¸å¯¹åº”ä»»ä½•*Kubernetesèµ„æºç±»å‹*ã€‚

è¿™äº›ç‰¹æ®Šçš„kindæœ‰äº›ä¾‹å¦‚`DeleteOptions`è¢«æ”¾ç½®åœ¨â€œmeta.k8s.ioâ€è¿™ä¸ªç‰¹æ®Šçš„åˆ†ç»„ä¸­ï¼ˆä¹Ÿå°±æ˜¯å®ƒå¯¹åº”çš„GVKä¿¡æ¯ä¸­ä¸­Groupå­—æ®µä¸ºâ€œmeta.k8s.ioâ€ï¼‰ï¼Œå®ƒçš„ç‰ˆæœ¬åˆ™è¢«ç½®ä¸º`v1`ã€‚
æœ‰çš„ï¼ˆä¾‹å¦‚`Status`ï¼‰å¯ä»¥è¢«è®¤ä¸ºæ‰€å±äº*å†å²é—ç•™ç»„ï¼ˆlegacy groupï¼‰*ï¼Œå®ƒå¯¹åº”çš„GVKä¿¡æ¯ä¸­Groupç”¨ä¸€ä¸ªç©ºå­—ç¬¦ä¸²è¡¨ç¤ºï¼Œå®ƒçš„ç‰ˆæœ¬åˆ™è¢«ç½®ä¸º`v1`ã€‚

åŸºäº[Kubernetes API Reference Doc <KubernetesSVG />](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.27/)ï¼Œæˆ‘ä»¬å¯ä»¥å°†kindæ€»ç»“ä¸ºä¸‰ç±»ï¼š
* *Kubernetesèµ„æºç±»å‹*å¯¹åº”çš„Goç±»å‹ï¼šå¦‚`Pod`ï¼Œ`Job`ã€‚ï¼ˆåœ¨åç»­ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¼šç®€ç§°æ­¤ç±»å‹ä¸º*å•ä½“ç±»å‹*ï¼‰
* é›†åˆç±»å‹ï¼š*Kubernetesèµ„æº*[^5]å¯¹åº”çš„é›†åˆç±»å‹ï¼Œå¦‚`PodList`ï¼Œ`JobList`ã€‚
* å…¶ä»–ç‰¹æ®Šæˆ–å…ƒç±»å‹ï¼š å¦‚`DeleteOptions`ï¼Œ`Status`ï¼Œ`WatchEvent`ç­‰[^6]ã€‚

è¿™ä¸‰ç§ç±»å‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src={Kind3PNG} style= {{width: "95%"}}/>


å¦å¤–ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯KubernetesåŸç”Ÿèµ„æºçš„kindï¼ˆå•ä½“ç§ç±»å’Œé›†åˆç§ç±»ï¼‰è¢«å®šä¹‰åœ¨`k8s.io/api`åº“ä¸­ï¼Œé€šç”¨æˆ–è€…ç‰¹æ®Šçš„kindåˆ™è¢«å®šä¹‰åœ¨`k8s.io/apimachiery`åº“ä¸­ã€‚


## å°ç»“

:::tip
æœ¬å°èŠ‚ä¸­æˆ‘ä»¬ä»*GVR*å¼•å…¥äº†*GVK*ï¼Œæ„åœ¨æŒ‡å‡ºï¼š*kind*å’Œ*èµ„æºç±»å‹*ä¸€æ ·å¿…é¡»ä¾èµ–äºAPIåˆ†ç»„åŠç‰ˆæœ¬è€Œå­˜åœ¨ã€‚

åŒæ—¶æˆ‘ä»¬åˆä»åºåˆ—åŒ–/ååºåˆ—åŒ–çš„è§’åº¦è¿›ä¸€æ­¥æ‰©å……äº†Kubernetes *kind*çš„æ¦‚å¿µå¹¶ä¸”æ ¹æ®[Kubernetes API Reference Doc <KubernetesSVG />](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.27/#job-v1-batch)æ€»ç»“äº†
kindçš„ä¸‰ç§ç±»å‹ã€‚å…¶ä¸­ç¬¬ä¸‰ä¸ªç§ç±»æ¯”è¾ƒç‰¹æ®Šï¼Œç±»å‹ä¹‹é—´å¹¶æ²¡æœ‰å…±åŒçš„è§„èŒƒæˆ–è€…çº¦å®šã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ**å®ƒä»¬ä»è¦ä¾èµ–äºAPIåˆ†ç»„åŠç‰ˆæœ¬è€Œå­˜åœ¨**ã€‚è¿™äº›çŸ¥è¯†åœ¨åç»­ç« èŠ‚ä¸­æœ‰é‡è¦åº”ç”¨ã€‚

å¦å¤–ï¼Œå¯¹äºkindå‰ä¸¤ä¸ªç§ç±»ï¼Œå®ƒä»¬åœ¨æºç å®ç°ä¸Šè¿˜éœ€è¦éµå¾ªå…·ä½“çš„çº¦å®šï¼Œåœ¨åç»­[kindçš„ä¸‰ç±»](./runtime.Object#kindçš„ä¸‰ç±»)å°èŠ‚æˆ‘ä»¬è¿˜ä¼šç»§ç»­ä»‹ç»å®ƒä»¬ã€‚
:::



[comment]: # (TODO[correctness]: ç¬¬ä¸‰ç§åº”è¯¥è¿˜åŒ…æ‹¬subresource)


[//]: # (å› æ­¤ï¼Œæƒ³è¦å”¯ä¸€ç¡®å®šä¸€ç§èµ„æºç±»å‹ï¼Œæˆ‘ä»¬è¿˜éœ€è¦APIç»„å’Œç‰ˆæœ¬çš„ä¿¡æ¯ã€‚groupï¼Œversionï¼Œresource typeç»„æˆçš„ä¸‰å…ƒç»„è¢«ç§°ä¸ºGroupVersionResourceã€‚)



[^1]: åœ¨æœ¬å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»*GVR*çš„ç›®çš„ä»…ä»…æ˜¯ä¸ºäº†å¼•å‡º*GVK*çš„æ¦‚å¿µã€‚æœ¬ä¹¦æ‰€è®¨è®ºçš„å†…å®¹å¹¶ä¸ä¾èµ–äº*GVR*ã€‚
    GVRæ¦‚å¿µåœ¨`kube-apiserver`ç»„ä»¶ä»¥åŠ`kubectl`å‘½ä»¤è¡Œå·¥å…·ä¸­æœ‰é‡è¦åº”ç”¨ã€‚å¯¹äº`kube-apiserver`æ¥è¯´ï¼Œå®ƒéœ€è¦å®Œæˆä»HTTP Pathä¸­åŒ…å«çš„GVRä¿¡æ¯åˆ°å…·ä½“Goç±»å‹çš„æ˜ å°„å’Œè½¬æ¢ã€‚
    è€Œå¯¹äº`kubectl`å·¥å…·, æˆ‘ä»¬ä½¿ç”¨çš„å‘½ä»¤ä¾‹å¦‚ï¼š
    ```bash
    $ kubectl get pods {pod}
    ```
    å…¶ä¸­`pods`æ­£æ˜¯*èµ„æºç±»å‹*çš„æ¦‚å¿µã€‚å› æ­¤ï¼Œ`kubectl`åº“ä¸­ä¹Ÿéœ€è¦å®ŒæˆGVRåˆ°å…·ä½“Goç±»å‹çš„è½¬æ¢ã€‚
    ä¸è¿™ç§æ˜ å°„å’Œè½¬æ¢ç›¸å…³çš„é‡è¦æ•°æ®ç±»å‹æ˜¯`RESTMapper`ï¼Œå®ƒè¢«å®šä¹‰åœ¨`apimachinery`åº“ä¸­ï¼Œä½†è¿™ä¸åœ¨æœ¬ä¹¦çš„è®¨è®ºèŒƒå›´ä¹‹å†…ï¼Œè¯·å‚è€ƒ[Kubernetes APIè¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸ](../intro#æ‰©å±•é˜…è¯»)ã€‚
[^2]: `autoscaling/v2beta1`APIç‰ˆæœ¬åœ¨Kubernetes v1.8ä¸­å¼•å…¥ï¼Œ`autoscaling/v2beta2`APIç‰ˆæœ¬åœ¨Kubernetes v1.12ä¸­å¼•å…¥ï¼Œåœ¨Kubernetes v1.23å·²ç»æ­£å¼å‡çº§æˆç¨³å®šç‰ˆï¼ˆstableæˆ–è€…ä¹Ÿè¢«æˆä¸ºgeneral availability(GA)ï¼‰ï¼š`autoscaling/v2`ã€‚
      åŒæ—¶ï¼Œ`autoscaling/v2beta1`åœ¨Kubernetes v1.24ä¸­åœæ­¢ç»´æŠ¤ï¼Œ`autoscaling/v2beta2`åœ¨Kubernetes v1.25ä¸­åœæ­¢ç»´æŠ¤ã€‚
      ä¸åŒçš„ç‰ˆæœ¬ä»£è¡¨ä¸åŒçº§åˆ«çš„ç¨³å®šæ€§ä»¥åŠä¸åŒç¨‹åº¦çš„å®˜æ–¹ç»´æŠ¤å’Œæ”¯æŒã€‚å…·ä½“è¯·å‚è€ƒ[API versioning <KubernetesSVG />](https://kubernetes.io/docs/reference/using-api/#api-versioning)æˆ–è€…[API Changes <GitHubSVG />](https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api_changes.md#alpha-beta-and-stable-versions)ã€‚
[^3]: æœ¬ä¹¦æ‰€æåŠçš„åºåˆ—åŒ–ç‰¹æŒ‡**åœ¨KubernetesåŸºç¡€åº“ï¼ˆ`apimachinery`, `client-go`, `api-server`ï¼‰ä¸Šä¸‹æ–‡ä¸­**ã€‚åœ¨Kubernetesä¸­ï¼Œåºåˆ—åŒ–é™¤äº†åŸºæœ¬çš„åºåˆ—åŒ–æ“ä½œå¤–ï¼Œè¿˜åŒ…æ‹¬ä¸€äº›ç‰¹æ®Šçš„æœºåˆ¶ã€‚

      ç†è®ºä¸Šï¼Œæˆ‘ä»¬å½“ç„¶ä¹Ÿå¯ä»¥ä¸å€ŸåŠ©`apimachinery`åº“æä¾›çš„åºåˆ—åŒ–å·¥å…·ï¼Œç”¨Goçš„`net/http`ï¼Œ`json.Unmarshal`å’Œ`json.Marshal`å°±å¯ä»¥å®Œæˆå‘Kubernetes APIå‘èµ·è¯·æ±‚ä»¥åŠå¯¹Kubernetes kindçš„ç¼–è§£ç ï¼Œ
      ä¾‹å¦‚ï¼š
      ```bash
      # Extract the Cluster Certificate Authorithy ï¼ˆPEMï¼‰
      $ kubectl config view --minify --raw --output 'jsonpath={..cluster.certificate-authority-data}' | base64 -d
      ...

      # Extract the Client Certificate ï¼ˆPEMï¼‰
      $kubectl config view --minify --raw --output 'jsonpath={..user.client-certificate-data}' | base64 -d
      ...
      æˆ‘ä»¬å…ˆè·å–ä¸Kubernetes API TLSé€šä¿¡çš„è¯ä¹¦å’Œå¯†é’¥ã€‚

      # Extract the Client Private Key ï¼ˆPEMï¼‰
      $ kubectl config view --minify --raw --output 'jsonpath={..user.client-key-data}' | base64 -d
      ```
      ```go
      package main

      import (
      	"crypto/tls"
      	"crypto/x509"
      	"encoding/json"
      	"flag"
      	"io"
      	v1 "k8s.io/api/batch/v1"
      	"net/http"
      	"os"
      )

      var (
      	certFile = flag.String("cert", "client.crt", "A PEM encoded certificate file.")
      	keyFile  = flag.String("key", "client.key", "A PEM encoded private key file.")
      	caFile   = flag.String("ca-cert", "ca.crt", "A PEM encoded CA's certificate file.")
      	kubeAPI  = flag.String("kube-api", "https://127.0.0.1:6443", "Kubernetes API prefix.")
      )

      func main() {

      	flag.Parse()

      	caCert, _ := os.ReadFile(*caFile)
      	caCertPool := x509.NewCertPool()
      	caCertPool.AppendCertsFromPEM(caCert)
      	cert, _ := tls.LoadX509KeyPair(*certFile, *keyFile)

      	client := &http.Client{
      		Transport: &http.Transport{
      			TLSClientConfig: &tls.Config{
      				RootCAs:      caCertPool,
      				Certificates: []tls.Certificate{cert},
      			},
      		},
      	}

      	r, _ := client.Get(*kubeAPI + "/apis/batch/v1/namespaces/default/jobs/my-job")
      	bytes, _ := io.ReadAll(r.Body)

      	_ = json.Unmarshal(bytes, &v1.Job{})

      }
      ```
      æˆ‘ä»¬ä½¿ç”¨`net/http`åº“ç›´æ¥å‘Kubernetes APIå‘èµ·è¯·æ±‚ï¼Œå¹¶ç”¨`json.Unmarshal`å®Œæˆå¯¹è¿”å›ä½“çš„è§£ç ã€‚

      ç†è®ºä¸Šç”šè‡³æˆ‘ä»¬å¯ä»¥ç”¨ä»»æ„è¯­è¨€å®ç°ä¸€ä¸ªè‡ªå®šä¹‰æ§åˆ¶å™¨ï¼ˆåªè¦å¯ä»¥ä½¿ç”¨HTTPå’ŒKubernetes APIäº¤äº’ï¼‰ã€‚
      åœ¨æœ¬ä¹¦ä¸­ï¼Œä¸ºäº†å……åˆ†åˆ©ç”¨KubernetesåŸºç¡€åº“æœ¬èº«æä¾›çš„ç»„ä»¶æ¥å‡å°‘ä»£ç é‡ï¼Œæˆ‘ä»¬å°†è¦å®ç°çš„æç®€ç‰ˆè‡ªå®šä¹‰æ§åˆ¶å™¨ä»ç„¶åŸºäº`client-go`å’Œ`apimachinery`ã€‚

[^4]: æœ¬å°èŠ‚ä¸­*è¯·æ±‚ä½“*æˆ–è€…*è¿”å›ä½“*éƒ½æ˜¯æŒ‡JSONæ•°æ®æ ¼å¼ã€‚
[^5]: æ³¨æ„æ­¤å¤„ä¸º*Kubernetesèµ„æº*è€Œé*Kuberneteså¯¹è±¡*ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹äº*è™šæ‹Ÿèµ„æº*ï¼Œå®ƒä»¬åŒæ ·æœ‰ç›¸åº”çš„é›†åˆç±»å‹ã€‚
[^6]: åœ¨Kubernetesä¸­ï¼Œç¬¬ä¸‰ç§ç‰¹æ®Šç±»å‹å…±åŒ…æ‹¬ï¼š`ListOptions`ï¼Œ`GetOptions`ï¼Œ`DeleteOptions`ï¼Œ`CreateOptions`ï¼Œ`UpdateOptions`ï¼Œ`PatchOptions`ï¼Œ`Status`ï¼Œ`WatchEvent`ï¼Œ`InternalEvent`ï¼Œ`APIVersions`ï¼Œ`APIGroupList`ï¼Œ`APIGroup`ï¼Œ`APIResourceList`ã€‚

