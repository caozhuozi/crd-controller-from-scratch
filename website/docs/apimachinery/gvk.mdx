---
sidebar_position: 2
---
import KubernetesSVG from '@site/static/img/kubernetes-mark.svg';
import GitHubSVG from '@site/static/img/github-mark.svg';
import GVRSVG from '@site/static/img/gvr.svg';
import Kind3PNG from '@site/static/img/kind3.png';

# GVK
åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»*GVK*çš„æ¦‚å¿µï¼ŒåŒæ—¶ä¼šè¿›ä¸€æ­¥æ‰©å……å‰é¢[åˆè¯†kind](./kubernetes-api#åˆè¯†kind)å°èŠ‚å¼•å…¥çš„*kind*æ¦‚å¿µã€‚

## ä»GVRè¯´èµ·
:::tip æ³¨
åœ¨æ­£å¼ä»‹ç»*GVK*ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ä»ä¸€ä¸ªè¿‘ä¼¼çš„æœ¯è¯­*GVR*è¯´èµ·ï¼›
:::

é€šå¸¸ï¼Œå¯¹äºä¸€ä¸ªKubernetes API URLï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­æå–å‡ºå®ƒçš„APIåˆ†ç»„ï¼ˆgroupï¼‰ï¼Œç‰ˆæœ¬ï¼ˆversionï¼‰ï¼Œä»¥åŠèµ„æºç±»å‹ï¼ˆresource typeï¼‰ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š
<GVRSVG style={{height: "120px"}}/>

æ¢ä¸ªè§’åº¦æ¥è¯´ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®¤ä¸º**èµ„æºç±»å‹ä¾å±äºAPIåˆ†ç»„å’Œç‰ˆæœ¬è€Œå­˜åœ¨**â€”â€”æƒ³è¦å”¯ä¸€ç¡®å®šä¸€ç§èµ„æºç±»å‹ï¼Œæˆ‘ä»¬è¿˜éœ€è¦APIåˆ†ç»„å’Œç‰ˆæœ¬ä¿¡æ¯ï¼ˆä¸ºäº†å™è¿°ä¸Šçš„æ–¹ä¾¿ï¼Œåœ¨åç»­ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ç®€ç§°APIåˆ†ç»„å’Œç‰ˆæœ¬ä¸º**GV**ï¼‰ã€‚
ç”±groupï¼Œversionï¼Œä»¥åŠresource typeè¿™ä¸‰ä¸ª**å­—ç¬¦ä¸²**ç»„æˆçš„ä¸‰å…ƒç»„è¢«ç§°ä¸º*GroupVersionResource*ï¼Œç®€ç§°*GVR*ã€‚

å®é™…ä¸Š*GVR*çš„æ¦‚å¿µæ¥æºäº`apimachinery`åº“ä¸­ä¸€ä¸ªç®€å•å´åˆåŸºç¡€çš„ç»“æ„ä½“ï¼Œå®ƒè¢«å®šä¹‰åœ¨`runtime`åŒ…çš„`schema`ä¸‹ï¼š
```go title="k8s.io/apimachinery/runtime/schema/group_version.go"
type GroupVersionResource struct {
	Group    string
	Version  string
	Resource string
}
```
æˆ‘ä»¬å…¶å®å¯ä»¥è¿™æ ·è®¤ä¸ºï¼Œå…ˆæœ‰äº†æºç ä¸Šå®šä¹‰çš„ç»“æ„ä½“ï¼Œå†è¡ç”Ÿå‡ºäº†ç›¸å…³æœ¯è¯­å’Œæ¦‚å¿µã€‚[ğŸŒ§ï¸ï¸](../intro#çº¦å®š)

:::tip æ³¨
è¿™æ˜¯æœ¬ä¹¦ç¬¬ä¸€æ¬¡å…·ä½“å¼•ç”¨`apimachinery`åº“ä¸­çš„ä»£ç ã€‚
`apimachinery`åº“æ˜¯**Kubernetes APIç±»å‹ç³»ç»Ÿçš„åŸºçŸ³**ã€‚åœ¨`apimachinery`åº“ä¸­ï¼Œå®šä¹‰äº†è®¸å¤šåŸºç¡€æ¥å£å’Œå…ƒç±»å‹ã€‚
åœ¨åç»­çš„[runtime.Object](./runtime.object)å°èŠ‚ï¼Œæˆ‘ä»¬è¿˜ä¼šä»‹ç»è¿™äº›åŸºç¡€æ¥å£å’Œå…ƒç±»å‹ã€‚
:::


:::tip æ³¨
æˆ‘ä»¬ä»‹ç»*GVR*çš„ç›®çš„ä»…ä»…æ˜¯ä¸ºäº†å¼•å‡º*GVK*çš„æ¦‚å¿µã€‚æœ¬ä¹¦æ‰€è®¨è®ºçš„å†…å®¹å¹¶ä¸ä¾èµ–äº*GVR*ã€‚GVRæ¦‚å¿µåœ¨`kube-apiserver`ç»„ä»¶ä»¥åŠ`kubectl`å‘½ä»¤è¡Œå·¥å…·ä¸­æœ‰é‡è¦åº”ç”¨ã€‚
å¯¹äº`kube-apiserver`æ¥è¯´ï¼Œä½œä¸ºæœåŠ¡ç«¯ï¼Œå®ƒéœ€è¦å®Œæˆä»HTTP Pathä¸­åŒ…å«çš„*GVR*ä¿¡æ¯åˆ°å…·ä½“Goç±»å‹çš„æ˜ å°„å’Œè½¬æ¢ã€‚
å¯¹äº`kubectl`å·¥å…·, å®ƒéœ€è¦å®Œæˆä»å‘½ä»¤åŒ…å«çš„*GVR*ä¿¡æ¯åˆ°å…·ä½“Goç±»å‹çš„æ˜ å°„å’Œè½¬æ¢ã€‚
ä¾‹å¦‚ï¼š
```bash
$ kubectl get deployments {deploy} -n default
```
å…¶ä¸­`deployments`æ­£æ˜¯*èµ„æºç±»å‹*ã€‚`kubectl`å·¥å…·å…¶å®åœ¨èƒŒåé»˜é»˜åœ°ä¸ºèµ„æºç±»å‹è¡¥å…¨äº†APIåˆ†ç»„å’Œç‰ˆæœ¬ä¿¡æ¯ï¼Œæœ€åç»„è£…æˆå‘é€åˆ°Kubernetes APIçš„RESTè¯·æ±‚ã€‚

å¦å¤–ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼šä¸Šè¿°`kubectl`ç”¨æ³•è™½ç„¶å¸¸è§ï¼Œä½†æ˜¯å®ƒå…¶å®æ˜¯ä¸€ä¸ªä¼š"äº§ç”Ÿæ­§ä¹‰"çš„ç”¨æ³•ï¼Œç‰¹åˆ«æ˜¯å½“ä¸€ä¸ªèµ„æºç±»å‹åŒæ—¶å­˜åœ¨äºå¤šä¸ªç‰ˆæœ¬æ—¶æˆ–åˆ†ç»„æ—¶ã€‚
ä¾‹å¦‚ï¼Œä»¥`horizontalpodautoscalers`(hpa)ä¸ºä¾‹ï¼Œåœ¨[Kubernetes v1.25](https://github.com/kubernetes/kubernetes/tree/release-1.25)ä¸­åŒæ—¶å­˜åœ¨ï¼š`v1`ä»¥åŠ`v2beta2`ä¸¤ä¸ªç‰ˆæœ¬ã€‚
é€šè¿‡å‘½ä»¤ï¼š
```bash
$ kubectl get horizontalpodautoscalers {hpa} -n default
```
åªèƒ½é»˜è®¤è·å¾—`v1`ç‰ˆæœ¬çš„èµ„æºã€‚å°†èµ„æºç±»å‹å¸¦ä¸Šåˆ†ç»„å’Œç‰ˆæœ¬ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹å½¢å¼çš„å‘½ä»¤è·å–æŸä¸€ä¸ªç‰¹å®šåˆ†ç»„åŠç‰ˆæœ¬çš„èµ„æºï¼š
```bash
kubectl get horizontalpodautoscalers.v2beta2.autoscaling {hpa} -n default
```
ä»*GVR*åˆ°å…·ä½“Goç±»å‹çš„æ˜ å°„ç›¸å…³çš„é‡è¦æ•°æ®ç±»å‹æ˜¯`RESTMapper`ï¼Œå®ƒä¹Ÿè¢«å®šä¹‰åœ¨`apimachinery`åº“ä¸­ï¼Œä½†è¿™ä¸åœ¨æœ¬ä¹¦çš„è®¨è®ºèŒƒå›´ä¹‹å†…ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…è¯·å‚è€ƒæ‰©å±•é˜…è¯»[Kubernetes APIè¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸ](../intro#æ‰©å±•é˜…è¯»)ã€‚
:::

## ä»GVRåˆ°GVK
åœ¨ä¹‹å‰çš„[åˆè¯†kind](./kubernetes-api#åˆè¯†kind)å°ç»“ï¼Œæˆ‘ä»¬ä»‹ç»äº†æ¯ç§èµ„æºç±»å‹éƒ½å¯¹åº”ä¸€ä¸ªGoç±»å‹â€”â€”*kind*ã€‚
ç›¸åº”åœ°ï¼Œä¸*GroupVersionResource*ç±»ä¼¼ï¼Œkindä¹Ÿæœ‰ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„ç»“æ„ä½“*GroupVersionKind*ã€‚
åœ¨Kubernetesä¸­ï¼Œç”±Goç±»å‹**æœ¬èº«çš„åç§°**å’Œæ­¤ç±»å‹æ‰€åœ¨çš„åˆ†ç»„å’Œç‰ˆæœ¬ä¸‰ä¸ªå­—ç¬¦ä¸²ç»„æˆçš„ä¸‰å…ƒç»„è¢«æˆä¸º*GroupVersionKind*ï¼Œç®€ç§°*GVK*ã€‚
å®ƒåœ¨`apimachinery`åº“ä¸­å¯¹åº”çš„æ•°æ®ç»“æ„ä¸ºï¼š
```Go title="k8s.io/apimachinery/runtime/schema/group_version.go"
type GroupVersionKind struct {
	Group    string
	Version  string
	Kind     string
}
```
ä¾‹å¦‚ï¼Œ`Job`ç±»å‹çš„åå­—ä¸º`Job`ï¼Œç”±`Job`ï¼Œ`batch`ï¼ˆAPIåˆ†ç»„ï¼‰ï¼Œ`v1`ï¼ˆç‰ˆæœ¬ï¼‰ä¸‰ä¸ª**å­—ç¬¦ä¸²**ç»„æˆçš„ä¸‰å…ƒç»„å³ä¸º*GVK*ã€‚
ä¸èµ„æºç±»å‹ä¸€æ ·ï¼Œ**æƒ³è¦å”¯ä¸€ç¡®å®šä¸€ç§*kind*ï¼Œæˆ‘ä»¬è¿˜éœ€è¦GVçš„ä¿¡æ¯**ã€‚
:::tip æ³¨
å…¶å®ï¼Œ*kind*/*èµ„æºç±»å‹*ä¸ä»…å¯ä»¥æ‹¥æœ‰ä¸åŒç‰ˆæœ¬ï¼Œå®ƒä»¬ç”šè‡³å¯ä»¥åŒæ—¶å­˜åœ¨äºä¸åŒåˆ†ç»„ä¸­ï¼›
ä¾‹å¦‚åœ¨[Kubernetes v1.6](https://github.com/kubernetes/kubernetes/tree/release-1.6)ä¹‹å‰ï¼Œ`Deployment`/`deployments`å°±åŒæ—¶å­˜åœ¨äº`apps`å’Œ`extensions`ä¸¤ä¸ªAPIåˆ†ç»„ä¸­ã€‚

ä½ å¯ä»¥ä½¿ç”¨`kubectl api-resources`å‘½ä»¤è·å–å½“å‰Kubernetesé›†ç¾¤æ‰€æœ‰ä¸åŒç‰ˆæœ¬å’Œåˆ†ç»„çš„*èµ„æºç±»å‹*ä»¥åŠå¯¹åº”*kind*ã€‚
<details>
<summary>kubectl api-resourceså‘½ä»¤è¾“å‡ºæ ·ä¾‹</summary>

```bash
$ kubectl api-resources
NAME                              SHORTNAMES               APIVERSION                                  NAMESPACED   KIND
bindings                                                   v1                                          true         Binding
componentstatuses                 cs                       v1                                          false        ComponentStatus
configmaps                        cm                       v1                                          true         ConfigMap
endpoints                         ep                       v1                                          true         Endpoints
events                            ev                       v1                                          true         Event
limitranges                       limits                   v1                                          true         LimitRange
namespaces                        ns                       v1                                          false        Namespace
nodes                             no                       v1                                          false        Node
persistentvolumeclaims            pvc                      v1                                          true         PersistentVolumeClaim
persistentvolumes                 pv                       v1                                          false        PersistentVolume
pods                              po                       v1                                          true         Pod
podtemplates                                               v1                                          true         PodTemplate
replicationcontrollers            rc                       v1                                          true         ReplicationController
resourcequotas                    quota                    v1                                          true         ResourceQuota
secrets                                                    v1                                          true         Secret
serviceaccounts                   sa                       v1                                          true         ServiceAccount
services                          svc                      v1                                          true         Service
mutatingwebhookconfigurations                              admissionregistration.k8s.io/v1             false        MutatingWebhookConfiguration
validatingwebhookconfigurations                            admissionregistration.k8s.io/v1             false        ValidatingWebhookConfiguration
canonicalservices                                          anthos.cloud.google.com/v1beta1             true         CanonicalService
entitlements                                               anthos.gke.io/v1alpha1                      false        Entitlement
customresourcedefinitions         crd,crds                 apiextensions.k8s.io/v1                     false        CustomResourceDefinition
apiservices                                                apiregistration.k8s.io/v1                   false        APIService
controllerrevisions                                        apps/v1                                     true         ControllerRevision
daemonsets                        ds                       apps/v1                                     true         DaemonSet
deployments                       deploy                   apps/v1                                     true         Deployment
replicasets                       rs                       apps/v1                                     true         ReplicaSet
statefulsets                      sts                      apps/v1                                     true         StatefulSet
meshpolicies                                               authentication.istio.io/v1alpha1            false        MeshPolicy
policies                                                   authentication.istio.io/v1alpha1            true         Policy
tokenreviews                                               authentication.k8s.io/v1                    false        TokenReview
localsubjectaccessreviews                                  authorization.k8s.io/v1                     true         LocalSubjectAccessReview
selfsubjectaccessreviews                                   authorization.k8s.io/v1                     false        SelfSubjectAccessReview
selfsubjectrulesreviews                                    authorization.k8s.io/v1                     false        SelfSubjectRulesReview
subjectaccessreviews                                       authorization.k8s.io/v1                     false        SubjectAccessReview
horizontalpodautoscalers          hpa                      autoscaling/v2                              true         HorizontalPodAutoscaler
metrics                                                    autoscaling.internal.knative.dev/v1alpha1   true         Metric
podautoscalers                    kpa,pa                   autoscaling.internal.knative.dev/v1alpha1   true         PodAutoscaler
cronjobs                          cj                       batch/v1                                    true         CronJob
jobs                                                       batch/v1                                    true         Job
images                            img                      caching.internal.knative.dev/v1alpha1       true         Image
certificatesigningrequests        csr                      certificates.k8s.io/v1                      false        CertificateSigningRequest
backendconfigs                    bc                       cloud.google.com/v1                         true         BackendConfig
adapters                                                   config.istio.io/v1alpha2                    true         adapter
attributemanifests                                         config.istio.io/v1alpha2                    true         attributemanifest
handlers                                                   config.istio.io/v1alpha2                    true         handler
httpapispecbindings                                        config.istio.io/v1alpha2                    true         HTTPAPISpecBinding
httpapispecs                                               config.istio.io/v1alpha2                    true         HTTPAPISpec
instances                                                  config.istio.io/v1alpha2                    true         instance
quotaspecbindings                                          config.istio.io/v1alpha2                    true         QuotaSpecBinding
quotaspecs                                                 config.istio.io/v1alpha2                    true         QuotaSpec
rules                                                      config.istio.io/v1alpha2                    true         rule
templates                                                  config.istio.io/v1alpha2                    true         template
leases                                                     coordination.k8s.io/v1                      true         Lease
bgpconfigurations                                          crd.projectcalico.org/v1                    false        BGPConfiguration
bgppeers                                                   crd.projectcalico.org/v1                    false        BGPPeer
blockaffinities                                            crd.projectcalico.org/v1                    false        BlockAffinity
caliconodestatuses                                         crd.projectcalico.org/v1                    false        CalicoNodeStatus
clusterinformations                                        crd.projectcalico.org/v1                    false        ClusterInformation
felixconfigurations                                        crd.projectcalico.org/v1                    false        FelixConfiguration
globalnetworkpolicies                                      crd.projectcalico.org/v1                    false        GlobalNetworkPolicy
globalnetworksets                                          crd.projectcalico.org/v1                    false        GlobalNetworkSet
hostendpoints                                              crd.projectcalico.org/v1                    false        HostEndpoint
ipamblocks                                                 crd.projectcalico.org/v1                    false        IPAMBlock
ipamconfigs                                                crd.projectcalico.org/v1                    false        IPAMConfig
ipamhandles                                                crd.projectcalico.org/v1                    false        IPAMHandle
ippools                                                    crd.projectcalico.org/v1                    false        IPPool
ipreservations                                             crd.projectcalico.org/v1                    false        IPReservation
kubecontrollersconfigurations                              crd.projectcalico.org/v1                    false        KubeControllersConfiguration
networkpolicies                                            crd.projectcalico.org/v1                    true         NetworkPolicy
networksets                                                crd.projectcalico.org/v1                    true         NetworkSet
endpointslices                                             discovery.k8s.io/v1                         true         EndpointSlice
domainmappings                                             domains.cloudrun.com/v1alpha1               true         DomainMapping
brokers                                                    eventing.knative.dev/v1                     true         Broker
triggers                                                   eventing.knative.dev/v1                     true         Trigger
cloudauditlogssources                                      events.cloud.google.com/v1                  true         CloudAuditLogsSource
cloudpubsubsources                                         events.cloud.google.com/v1                  true         CloudPubSubSource
cloudschedulersources                                      events.cloud.google.com/v1                  true         CloudSchedulerSource
cloudstoragesources                                        events.cloud.google.com/v1                  true         CloudStorageSource
events                            ev                       events.k8s.io/v1                            true         Event
wasmplugins                                                extensions.istio.io/v1alpha1                true         WasmPlugin
s0-prometheus-access_frequency                             external.metrics.k8s.io/v1beta1             true         ExternalMetricValueList
flowschemas                                                flowcontrol.apiserver.k8s.io/v1beta2        false        FlowSchema
prioritylevelconfigurations                                flowcontrol.apiserver.k8s.io/v1beta2        false        PriorityLevelConfiguration
memberships                                                hub.gke.io/v1                               false        Membership
istiooperators                    iop,io                   install.istio.io/v1alpha1                   true         IstioOperator
capacityrequests                  capreq                   internal.autoscaling.gke.io/v1alpha1        true         CapacityRequest
capacityrequests                  capreq                   internal.autoscaling.k8s.io/v1alpha1        true         CapacityRequest
brokercells                                                internal.events.cloud.google.com/v1alpha1   true         BrokerCell
pullsubscriptions                                          internal.events.cloud.google.com/v1         true         PullSubscription
topics                                                     internal.events.cloud.google.com/v1         true         Topic
clustertriggerauthentications     cta,clustertriggerauth   keda.sh/v1alpha1                            false        ClusterTriggerAuthentication
scaledjobs                        sj                       keda.sh/v1alpha1                            true         ScaledJob
scaledobjects                     so                       keda.sh/v1alpha1                            true         ScaledObject
triggerauthentications            ta,triggerauth           keda.sh/v1alpha1                            true         TriggerAuthentication
seldondeployments                 sdep                     machinelearning.seldon.io/v1                true         SeldonDeployment
controlplanerevisions             cpr,cprs                 mesh.cloud.google.com/v1beta1               true         ControlPlaneRevision
dataplanecontrols                                          mesh.cloud.google.com/v1alpha1              false        DataPlaneControl
dataplanerevisions                                         mesh.cloud.google.com/v1alpha1              true         DataPlaneRevision
nodes                                                      metrics.k8s.io/v1beta1                      false        NodeMetrics
pods                                                       metrics.k8s.io/v1beta1                      true         PodMetrics
frontendconfigs                                            networking.gke.io/v1beta1                   true         FrontendConfig
managedcertificates               mcrt                     networking.gke.io/v1                        true         ManagedCertificate
serviceattachments                                         networking.gke.io/v1                        true         ServiceAttachment
servicenetworkendpointgroups      svcneg                   networking.gke.io/v1beta1                   true         ServiceNetworkEndpointGroup
certificates                      kcert                    networking.internal.knative.dev/v1alpha1    true         Certificate
clusterdomainclaims               cdc                      networking.internal.knative.dev/v1alpha1    false        ClusterDomainClaim
ingresses                         kingress,king            networking.internal.knative.dev/v1alpha1    true         Ingress
serverlessservices                sks                      networking.internal.knative.dev/v1alpha1    true         ServerlessService
destinationrules                  dr                       networking.istio.io/v1alpha3                true         DestinationRule
envoyfilters                                               networking.istio.io/v1alpha3                true         EnvoyFilter
gateways                          gw                       networking.istio.io/v1alpha3                true         Gateway
proxyconfigs                                               networking.istio.io/v1beta1                 true         ProxyConfig
serviceentries                    se                       networking.istio.io/v1alpha3                true         ServiceEntry
sidecars                                                   networking.istio.io/v1alpha3                true         Sidecar
virtualservices                   vs                       networking.istio.io/v1alpha3                true         VirtualService
workloadentries                   we                       networking.istio.io/v1beta1                 true         WorkloadEntry
workloadgroups                    wg                       networking.istio.io/v1beta1                 true         WorkloadGroup
ingressclasses                                             networking.k8s.io/v1                        false        IngressClass
ingresses                         ing                      networking.k8s.io/v1                        true         Ingress
networkpolicies                   netpol                   networking.k8s.io/v1                        true         NetworkPolicy
runtimeclasses                                             node.k8s.io/v1                              false        RuntimeClass
updateinfos                       updinf                   nodemanagement.gke.io/v1alpha1              true         UpdateInfo
activeoperands                    ao,aos                   operand.run.cloud.google.com/v1alpha1       true         ActiveOperand
clusteractiveoperands             cao,caos                 operand.run.cloud.google.com/v1alpha1       false        ClusterActiveOperand
operands                          op,ops                   operand.run.cloud.google.com/v1alpha1       false        Operand
cloudruns                         run,runs                 operator.run.cloud.google.com/v1alpha1      true         CloudRun
poddisruptionbudgets              pdb                      policy/v1                                   true         PodDisruptionBudget
podsecuritypolicies               psp                      policy/v1beta1                              false        PodSecurityPolicy
clusterrolebindings                                        rbac.authorization.k8s.io/v1                false        ClusterRoleBinding
clusterroles                                               rbac.authorization.k8s.io/v1                false        ClusterRole
rolebindings                                               rbac.authorization.k8s.io/v1                true         RoleBinding
roles                                                      rbac.authorization.k8s.io/v1                true         Role
clusterrbacconfigs                                         rbac.istio.io/v1alpha1                      false        ClusterRbacConfig
rbacconfigs                                                rbac.istio.io/v1alpha1                      true         RbacConfig
servicerolebindings                                        rbac.istio.io/v1alpha1                      true         ServiceRoleBinding
serviceroles                                               rbac.istio.io/v1alpha1                      true         ServiceRole
priorityclasses                   pc                       scheduling.k8s.io/v1                        false        PriorityClass
authorizationpolicies                                      security.istio.io/v1beta1                   true         AuthorizationPolicy
peerauthentications               pa                       security.istio.io/v1beta1                   true         PeerAuthentication
requestauthentications            ra                       security.istio.io/v1beta1                   true         RequestAuthentication
configurations                    config,cfg               serving.knative.dev/v1                      true         Configuration
revisions                         rev                      serving.knative.dev/v1                      true         Revision
routes                            rt                       serving.knative.dev/v1                      true         Route
services                          kservice,ksvc            serving.knative.dev/v1                      true         Service
volumesnapshotclasses                                      snapshot.storage.k8s.io/v1                  false        VolumeSnapshotClass
volumesnapshotcontents                                     snapshot.storage.k8s.io/v1                  false        VolumeSnapshotContent
volumesnapshots                                            snapshot.storage.k8s.io/v1                  true         VolumeSnapshot
csidrivers                                                 storage.k8s.io/v1                           false        CSIDriver
csinodes                                                   storage.k8s.io/v1                           false        CSINode
csistoragecapacities                                       storage.k8s.io/v1beta1                      true         CSIStorageCapacity
storageclasses                    sc                       storage.k8s.io/v1                           false        StorageClass
volumeattachments                                          storage.k8s.io/v1                           false        VolumeAttachment
telemetries                       telemetry                telemetry.istio.io/v1alpha1                 true         Telemetry
orders                                                     tls.cloudrun.com/v1alpha1                   true         Order
```
</details>

å…³äºKubernetesAPI/èµ„æºçš„ç‰ˆæœ¬å‘½åè§„åˆ™ä»¥åŠå¦‚ä½•è¿›è¡Œè¿­ä»£çš„å…·ä½“ç»†èŠ‚å¯ä»¥å‚è€ƒæ–‡æ¡£[Changing the API <GitHubSVG />](https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api_changes.md#alpha-beta-and-stable-versions).
:::


## å†è¯†kind
åœ¨ä¹‹å‰çš„[åˆè¯†kind](./kubernetes-api#åˆè¯†kind)å°èŠ‚ï¼Œæˆ‘ä»¬ä»*èµ„æºç±»å‹ï¼ˆresource typeï¼‰*çš„è§’åº¦å¼•å…¥äº†*kind*ï¼Œå…¶å®*kind*çš„æ¦‚å¿µå´è¦æ›´å¹¿ã€‚
åœ¨Kubernetesç³»ç»Ÿä¸­ï¼Œ**ä»»ä½•éœ€è¦è¢«åºåˆ—åŒ–/ååºåˆ—åŒ–ï¼ˆä»¥ç”¨äºåœ¨ç½‘ç»œä¸­ä¼ è¾“æˆ–è€…è½ç›˜ï¼‰çš„Goç±»å‹éƒ½è¢«ç§°ä¸º*kind***ã€‚

:::tip æ³¨
æ³¨æ„ï¼Œå‡¡æ˜¯æœ¬ä¹¦ä¸­æ‰€æåŠçš„åºåˆ—åŒ–/ååºåˆ—åŒ–ç‰¹æŒ‡**åœ¨KubernetesåŸºç¡€åº“ï¼ˆ`apimachinery`, `client-go`, `api-server`ï¼‰ä¸Šä¸‹æ–‡ä¸­**ã€‚
åœ¨Kubernetesä¸­ï¼Œåºåˆ—åŒ–é™¤äº†åŸºæœ¬çš„åºåˆ—åŒ–æ“ä½œå¤–ï¼Œè¿˜åŒ…æ‹¬ä¸€äº›ç‰¹æ®Šçš„æœºåˆ¶ï¼Œè¿™äº›ç‰¹æ®Šæœºåˆ¶æˆ‘ä»¬å°†åœ¨åç»­ç« èŠ‚ä¸­è¯¦ç»†ä»‹ç»ï¼›
æˆ‘ä»¬å½“ç„¶ä¹Ÿå¯ä»¥ä¸å€ŸåŠ©`apimachinery`åº“æä¾›çš„åºåˆ—åŒ–å·¥å…·ï¼Œç”¨Goçš„`net/http`ï¼Œ`json.Unmarshal`å’Œ`json.Marshal`åŸºç¡€åº“å°±å¯ä»¥å®Œæˆå‘Kubernetes APIå‘èµ·è¯·æ±‚ä»¥åŠå¯¹Kubernetes *kind*çš„ç¼–/è§£ç ã€‚

ä¾‹å¦‚æˆ‘ä»¬å¯ä»¥å…ˆé€šè¿‡å¦‚ä¸‹å‘½ä»¤è·å–ä¸Kubernetes API Serverè¿›è¡ŒTLSé€šä¿¡çš„è¯ä¹¦å’Œå¯†é’¥ï¼š

<details>
<summary>è·å–ä¸Kubernetes API Serveré€šä¿¡çš„è¯ä¹¦å’Œå¯†é’¥</summary>

```bash
# Extract the Cluster Certificate Authorithy ï¼ˆPEMï¼‰
$ kubectl config view --minify --raw --output 'jsonpath={..cluster.certificate-authority-data}' | base64 -d
...

# Extract the Client Certificate ï¼ˆPEMï¼‰
$kubectl config view --minify --raw --output 'jsonpath={..user.client-certificate-data}' | base64 -d
...

# Extract the Client Private Key ï¼ˆPEMï¼‰
$ kubectl config view --minify --raw --output 'jsonpath={..user.client-key-data}' | base64 -d
```
</details>

æ¥ä¸‹æ¥æˆ‘ä»¬åˆ©ç”¨è·å–çš„è¯ä¹¦å’Œå¯†é’¥ç›´æ¥åŸºäºGoçš„ç½‘ç»œå’Œåºåˆ—åŒ–åŸºç¡€åº“ç›´æ¥ä¸Kubernetes APIäº¤äº’ã€‚
<details>
<summary>åŸºäºGoåŸºç¡€åº“ä¸Kubernetes APIç›´æ¥é€šä¿¡</summary>

```go
package main

import (
  "crypto/tls"
  "crypto/x509"
  "encoding/json"
  "flag"
  "io"
  v1 "k8s.io/api/batch/v1"
  "net/http"
  "os"
)

var (
  certFile = flag.String("cert", "client.crt", "A PEM encoded certificate file.")
  keyFile  = flag.String("key", "client.key", "A PEM encoded private key file.")
  caFile   = flag.String("ca-cert", "ca.crt", "A PEM encoded CA's certificate file.")
  kubeAPI  = flag.String("kube-api", "https://127.0.0.1:6443", "Kubernetes API prefix.")
)

func main() {

  flag.Parse()

  caCert, _ := os.ReadFile(*caFile)
  caCertPool := x509.NewCertPool()
  caCertPool.AppendCertsFromPEM(caCert)
  cert, _ := tls.LoadX509KeyPair(*certFile, *keyFile)

  client := &http.Client{
      Transport: &http.Transport{
          TLSClientConfig: &tls.Config{
              RootCAs:      caCertPool,
              Certificates: []tls.Certificate{cert},
          },
      },
  }

  r, _ := client.Get(*kubeAPI + "/apis/batch/v1/namespaces/default/jobs/my-job")
  bytes, _ := io.ReadAll(r.Body)

  _ = json.Unmarshal(bytes, &v1.Job{})

}
```

æˆ‘ä»¬ä½¿ç”¨`net/http`åº“ç›´æ¥å‘Kubernetes APIå‘èµ·è¯·æ±‚ï¼Œå¹¶ç”¨`json.Unmarshal`å®Œæˆå¯¹è¿”å›ä½“çš„è§£ç ã€‚
</details>

åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä»…ä½¿ç”¨äº†Goçš„åŸºç¡€åº“å°±å®Œæˆäº†ä¸Kubernetes APIçš„äº¤äº’ï¼Œç†è®ºä¸Šæˆ‘ä»¬å¯ä»¥ç”¨ä»»æ„è¯­è¨€ï¼ˆç”šè‡³æ˜¯`curl`å·¥å…·ï¼‰è¾¾åˆ°åŒæ ·çš„æ•ˆæœã€‚
:::

ä¾‹å¦‚ï¼Œæ ¹æ®[Kubernetes API Reference Doc <KubernetesSVG />](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.27/#job-v1-batch)ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹RESTè¯·æ±‚ï¼š
```
GET /apis/batch/v1/namespaces/{namespace}/jobs
```
æ¥è·å–æŸä¸ª`namespace`ä¸‹é¢æ‰€æœ‰çš„`job`èµ„æºã€‚
ä¸‹é¢æ˜¯ä¸€ä¸ªä¸Šè¿°è¯·æ±‚è¿”å›ä½“ï¼ˆJSONæ ¼å¼ï¼‰[^1]çš„ä¾‹å­ï¼š

<details>
<summary>è·å–ä¸€ä¸ªnamespaceä¸‹æ‰€æœ‰jobèµ„æºAPIçš„è¿”å›ä½“</summary>

```json
{
    "apiVersion": "batch/v1",
    "kind": "JobList",
    "metadata": {
        "resourceVersion": ""
    }
    "items": [
        {
            "apiVersion": "batch/v1",
            "kind": "Job",
            "metadata": {
                "creationTimestamp": "2021-11-02T09:06:03Z",
                "name": "debug-b392ad51-b656-3af0-8718-0f96d09a92cf",
                "namespace": "default",
                "resourceVersion": "223357957",
                "uid": "28b061c5-d1ba-4a2e-8aa8-88bf216c2b2f"
            },
            "spec": {
                "backoffLimit": 0,
                "completions": 1,
                "parallelism": 1,
                "selector": {
                    "matchLabels": {
                        "controller-uid": "28b061c5-d1ba-4a2e-8aa8-88bf216c2b2f"
                    }
                },
                "template": {
                    "metadata": {
                        "creationTimestamp": null,
                        "labels": {
                            "controller-uid": "28b061c5-d1ba-4a2e-8aa8-88bf216c2b2f",
                            "job-name": "debug-b392ad51-b656-3af0-8718-0f96d09a92cf"
                        }
                    },
                    "spec": {
                        "containers": [
                            {
                                "image": "busybox",
                                "imagePullPolicy": "IfNotPresent",
                                "name": "debug-pod"
                            }
                        ],
                        "restartPolicy": "Never"
                    }
                }
            },
            "status": {
                "active": 1,
                "startTime": "2021-11-02T09:06:03Z"
            }
        }
    ]
}
```
</details>

æ ¹æ®æ–‡æ¡£è¯´æ˜ï¼Œè¯·æ±‚è¿”å›ä½“ï¼ˆè¢«ç¼–ç å‰ï¼‰å¯¹åº”çš„Goç±»å‹ä¸º`JobList`ï¼š
```go title="k8s.io/batch/v1/types.go"
type JobList struct {
	metav1.TypeMeta
	metav1.ListMeta

	Items []Job
}
```
æ˜¾ç„¶è¿™ä¸ªç±»å‹å¹¶ä¸**ç›´æ¥**å¯¹åº”ä»»ä½•*èµ„æºç±»å‹*ï¼Œå®ƒè¡¨ç¤ºçš„æ˜¯`job`èµ„æºçš„**é›†åˆ**ï¼Œå…¶ä¸­`Items`å­—æ®µæ­£æ˜¯`Job`ç±»å‹çš„åˆ‡ç‰‡ï¼Œä»¥ç”¨äºå­˜æ”¾`job`èµ„æºçš„é›†åˆã€‚

å†æ¯”å¦‚ï¼Œå½“æˆ‘ä»¬æƒ³è¦åˆ é™¤ä¸€ä¸ª`job`èµ„æºçš„æ—¶å€™ï¼Œæ ¹æ®[Kubernetes API Reference Doc <KubernetesSVG />](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.27/#job-v1-batch)ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹RESTè¯·æ±‚ï¼š
```
DELETE /apis/batch/v1/namespaces/{namespace}/jobs/{name}
```
ä¸€ä¸ªè¯·æ±‚ä½“[^4]æ ·ä¾‹ä¸ºï¼š
```json
{
  "kind": "DeleteOptions",
  "apiVersion": "meta.k8s.io/v1",
  "gracePeriodSeconds": 1,
  "preconditions": {
    "uid": "uidValue",
    "resourceVersion": "resourceVersionValue"
  },
  "orphanDependents": true,
  "propagationPolicy": "propagationPolicyValue",
  "dryRun": [
    "dryRunValue"
  ]
}
```
è¯¥è¯·æ±‚ä½“åœ¨è¢«`kube-apiserver`æ¥å—å¹¶**è§£ç å**å¯¹åº”çš„Goç±»å‹ä¸º`DeleteOptions`ï¼š
```go title=â€œk8s.io/apimachinery/pkg/apis/meta/v1/types.goâ€
type DeleteOptions struct {
	TypeMeta

	GracePeriodSeconds *int64

	Preconditions *Preconditions

	OrphanDependents *bool

	PropagationPolicy *DeletionPropagation

	DryRun []string
}
```
è¯¥è¯·æ±‚å¯¹åº”çš„ä¸€ä¸ªè¿”å›ä½“æ ·ä¾‹ä¸ºï¼š
```json
{
  "kind": "Status",
  "apiVersion": "v1",
  "metadata": {},
  "status": "Success",
  "details": {
    "name": "my-job",
    "kind": "jobs"
  },
  "code": 200
}
```
è¯¥è¯·æ±‚çš„è¿”å›ä½“ï¼ˆè¢«ç¼–ç å‰ï¼‰å¯¹åº”çš„Goç±»å‹ä¸º`Status`ï¼š
```go title="k8s.io/apimachinery/pkg/apis/meta/v1/types.go"
type Status struct {
	ListMeta
	Status string
	Message string
	Reason StatusReason
	Details *StatusDetails
	Code int32
}
```
æ­¤ç±»å‹ä¸­`Status`å­—æ®µï¼ˆå­—ç¬¦ä¸²ï¼‰è¡¨ç¤ºåˆ é™¤æ“ä½œçš„ç»“æœï¼š`Success`æˆ–è€…`Failure`ï¼Œ `Code`å­—æ®µï¼ˆæ•´å‹ï¼‰ä¸HTTPçš„çŠ¶æ€ç ç›¸å¯¹åº”ã€‚
é™¤æ­¤ä»¥å¤–ï¼Œ**å¯¹äºä»»ä½•è¯·æ±‚ï¼Œ`kube-apiserver`å¦‚æœå¤„ç†å¼‚å¸¸æˆ–è€…å¤±è´¥ï¼ˆHTTPçŠ¶æ€ç é`2xx`æ—¶ï¼‰ï¼Œéƒ½ä¼šè¿”å›è¿™ä¸ª`Status`ç±»å‹ç¼–ç åçš„JSONæ•°æ®**ã€‚
ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬å°è¯•é€šè¿‡Kubernetes APIè·å–ä¸€ä¸ªä¸å­˜åœ¨çš„èµ„æºæ—¶ï¼š
```bash
> GET /api/v1/namespaces/default/pods/grafana

< HTTP/1.1 404 Not Found
< Content-Type: application/json
< Date: Wed, 20 May 2015 18:10:42 GMT
< Content-Length: 232
<
{
  "kind": "Status",
  "apiVersion": "v1",
  "metadata": {},
  "status": "Failure",
  "message": "pods \"grafana\" not found",
  "reason": "NotFound",
  "details": {
    "name": "grafana",
    "kind": "pods"
  },
  "code": 404
}
```
æ˜¾ç„¶ï¼Œä¸Šè¿°çš„ä¾‹å­ä¸­`DeleteOptions`å’Œ`Status`éƒ½ä¸å¯¹åº”ä»»ä½•*Kubernetesèµ„æºç±»å‹*ã€‚

è¿™äº›ç‰¹æ®Šçš„*kind*æœ‰äº›ä¾‹å¦‚`DeleteOptions`è¢«æ”¾ç½®åœ¨`meta.k8s.io`è¿™ä¸ªç‰¹æ®Šçš„åˆ†ç»„ä¸­ï¼ˆä¹Ÿå°±æ˜¯å®ƒå¯¹åº”çš„GVKä¿¡æ¯ä¸­Groupå­—æ®µä¸º`meta.k8s.io`ï¼Œ`apiVersion`å­—æ®µä¸º`meta.k8s.io/v1`ï¼‰ï¼Œå®ƒçš„ç‰ˆæœ¬åˆ™è¢«å®šä¸º`v1`ã€‚
æœ‰çš„*kind*ï¼ˆä¾‹å¦‚`Status`ï¼‰åœ¨Kuberneteså¼•å…¥APIåˆ†ç»„ä¹‹å‰å°±å·²ç»å­˜åœ¨ï¼Œå®ƒä»¬å¯ä»¥è¢«è®¤ä¸ºå±äº`core`åˆ†ç»„ï¼ˆå†å²é—ç•™ç»„ï¼ˆlegacy groupï¼‰ï¼‰ï¼Œå› æ­¤å®ƒå¯¹åº”çš„GVä¸­åˆ†ç»„ç”¨ä¸€ä¸ª**ç©ºå­—ç¬¦ä¸²**è¡¨ç¤ºï¼Œå®ƒçš„ç‰ˆæœ¬åˆ™ä¸º`v1`ã€‚

åŸºäº[Kubernetes API Reference Doc <KubernetesSVG />](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.27/)ï¼Œæˆ‘ä»¬å¯ä»¥å°†*kind* **æ€»ç»“**ä¸ºä¸‰ç±»ï¼š
* *Kubernetesèµ„æºç±»å‹*å¯¹åº”çš„Goç±»å‹ï¼šå¦‚`Pod`ï¼Œ`Job`ã€‚ï¼ˆåœ¨åç»­ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¼šç®€ç§°æ­¤ç±»å‹ä¸º*å•ä½“ç±»å‹*ï¼‰
* é›†åˆç±»å‹ï¼š*Kubernetesèµ„æº*[^2]å¯¹åº”çš„é›†åˆç±»å‹ï¼Œå¦‚`PodList`ï¼Œ`JobList`ã€‚
* å…¶ä»–ç‰¹æ®Šæˆ–å…ƒç±»å‹ï¼š å¦‚`DeleteOptions`ï¼Œ`Status`ï¼Œ`WatchEvent`ç­‰[^2]ã€‚

è¿™ä¸‰ç§ç±»å‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src={Kind3PNG} style= {{width: "95%"}}/>


:::tip æ³¨
å¦å¤–ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯KubernetesåŸç”Ÿèµ„æºçš„*kind*ï¼ˆå•ä½“ç§ç±»å’Œé›†åˆç§ç±»ï¼‰è¢«å®šä¹‰åœ¨`k8s.io/api`åº“ä¸­ï¼Œé‚£äº›é€šç”¨æˆ–è€…ç‰¹æ®Šçš„*kind*åˆ™è¢«å®šä¹‰åœ¨`k8s.io/apimachiery`åº“ä¸­ã€‚
:::



## å°ç»“

:::tip å°ç»“
æœ¬å°èŠ‚ä¸­æˆ‘ä»¬ä»*GVR*å¼•å…¥äº†*GVK*ï¼Œæ„åœ¨æŒ‡å‡ºï¼š*kind*å’Œ*èµ„æºç±»å‹*ä¸€æ ·å¿…é¡»ä¾èµ–äºAPIåˆ†ç»„åŠç‰ˆæœ¬ï¼ˆGVï¼‰è€Œå­˜åœ¨ã€‚

åŒæ—¶æˆ‘ä»¬åˆä»åºåˆ—åŒ–/ååºåˆ—åŒ–çš„è§’åº¦è¿›ä¸€æ­¥æ‰©å……äº†Kubernetes *kind*çš„æ¦‚å¿µå¹¶ä¸”æ ¹æ®[Kubernetes API Reference Doc <KubernetesSVG />](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.27/#job-v1-batch)æ€»ç»“äº†
kindçš„ä¸‰ç§ç±»å‹ã€‚å…¶ä¸­ç¬¬ä¸‰ä¸ªç§ç±»æ¯”è¾ƒç‰¹æ®Šï¼Œç±»å‹ä¹‹é—´å¹¶æ²¡æœ‰å…±åŒçš„è§„èŒƒæˆ–è€…çº¦å®šã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ**å®ƒä»¬ä»è¦ä¾èµ–äºAPIåˆ†ç»„åŠç‰ˆæœ¬ï¼ˆGVï¼‰è€Œå­˜åœ¨**ã€‚è¿™äº›çŸ¥è¯†åœ¨åç»­ç« èŠ‚ä¸­æœ‰é‡è¦åº”ç”¨ã€‚

å¦å¤–ï¼Œå¯¹äºkindå‰ä¸¤ä¸ªç§ç±»ï¼Œå®ƒä»¬åœ¨æºç å®ç°ä¸Šè¿˜éœ€è¦éµå¾ªå…·ä½“çš„çº¦å®šï¼Œåœ¨åç»­[kindçš„ä¸‰ç±»](./runtime.Object#kindçš„ä¸‰ç±»)å°èŠ‚æˆ‘ä»¬è¿˜ä¼šç»§ç»­ä»‹ç»å®ƒä»¬ã€‚

æœ€åéœ€è¦è¯´æ˜çš„æ˜¯ï¼Œæˆ‘ä»¬ç‰¹æ„æŠŠkindæ¦‚å¿µçš„æ‰©å……æ”¾åœ¨è®¨è®ºGVKçš„ç« èŠ‚â€”â€”æ„åœ¨å¼ºè°ƒå³ä¾¿æ˜¯å¯¹äºéœ€è¦å‚ä¸ç¼–è§£ç çš„ç‰¹æ®Šé€šç”¨ç±»å‹ï¼ˆkindç¬¬ä¸‰ç§ç±»ï¼‰ï¼Œå®ƒä»¬ä¹Ÿæœ‰æ‰€å±çš„GVã€‚
å¯è§*GVK*æ˜¯Kubernetesä¸­æä¸ºé‡è¦åŠåŸºç¡€çš„æ¦‚å¿µã€‚
:::


[comment]: # (TODO[correctness]: ç¬¬ä¸‰ç§åº”è¯¥è¿˜åŒ…æ‹¬subresource)

[^1]: æœ¬å°èŠ‚ä¸­*è¯·æ±‚ä½“*æˆ–è€…*è¿”å›ä½“*éƒ½æ˜¯æŒ‡JSONæ•°æ®æ ¼å¼ã€‚
[^2]: æ³¨æ„æ­¤å¤„ä¸º*Kubernetesèµ„æº*è€Œé*Kuberneteså¯¹è±¡*ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹äº*è™šæ‹Ÿèµ„æº*ï¼Œå®ƒä»¬åŒæ ·æœ‰ç›¸åº”çš„é›†åˆç±»å‹ã€‚
[^3]: åœ¨Kubernetesä¸­ï¼Œç¬¬ä¸‰ç§ç‰¹æ®Šç±»å‹å…±åŒ…æ‹¬ï¼š`ListOptions`ï¼Œ`GetOptions`ï¼Œ`DeleteOptions`ï¼Œ`CreateOptions`ï¼Œ`UpdateOptions`ï¼Œ`PatchOptions`ï¼Œ`Status`ï¼Œ`WatchEvent`ï¼Œ`InternalEvent`ï¼Œ`APIVersions`ï¼Œ`APIGroupList`ï¼Œ`APIGroup`ï¼Œ`APIResourceList`ã€‚

