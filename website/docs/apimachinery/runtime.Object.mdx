---
sidebar_position: 3
---
import GithubSVG from '@site/static/img/github-mark.svg';
import KubernetesSVG from '@site/static/img/kubernetes-mark.svg';
import RuntimeObjectSVG from '@site/static/img/runtime-object.svg';
import SingularSVG from '@site/static/img/singular.svg';
import CollectionSVG from '@site/static/img/collection.svg';
import SerializerKindSVG from '@site/static/img/serializer-kind.svg';



# runtime.Object

åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¼šåŸºäºKubernetesæºç ï¼ˆ`k8s.io/api`åº“å’Œ`k8s.io/apimachinery`åº“ï¼‰è¿›ä¸€æ­¥å»è¯ é‡Šå…ˆå‰åœ¨[å†è¯†kind](./gvk#å†è¯†kind)å¼•å…¥çš„è®ºè¿°â€”â€”"åœ¨Kubernetesä¸­ï¼Œæ‰€æœ‰éœ€è¦**è¢«åºåˆ—åŒ–/ååºåˆ—åŒ–**çš„Goç±»å‹éƒ½è¢«ç§°ä¸º*kind*"ã€‚

ä¸ºäº†è¯´æ˜æ­¤è®ºè¿°ï¼Œæœ¬èŠ‚çš„ä¸»è¦å†…å®¹åŒ…æ‹¬ï¼š
* `k8s.io/apimachinery`åº“ä¸­å¦‚ä½•æŠ½è±¡Kubernetes APIç±»å‹ç³»ç»Ÿï¼ˆ*èµ„æº*/*kind*ï¼‰ï¼›
* `k8s.io/apimachinery`åº“ä¸­å¯¹èµ„æºç¼–/è§£ç è¿‡ç¨‹çš„ä¸€èˆ¬è¡Œä¸ºã€‚



:::tip æ³¨
éœ€è¦åœ¨è¿™é‡Œå¼ºè°ƒçš„æ˜¯ï¼Œæœ¬å°èŠ‚çš„å†…å®¹ä»¥æ–‡æ¡£[API Conventions <GithubSVG />](https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#types-kinds)ä¸­å…³äº*èµ„æº*/*kind*å¿…é¡»è¦éµå¾ªçš„çº¦å®šä¸ºåŸºç¡€ã€‚
æˆ‘ä»¬è®¤ä¸ºæ–‡æ¡£[API Conventions <GithubSVG />](https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#types-kinds)æ˜¯ç¤¾åŒºå¼€å‘è€…æƒ³è¦åœ¨è¯­è¨€ä¸­ç«‹çš„æƒ…å†µä¸‹å¯¹Kubernetes APIç±»å‹ç³»ç»Ÿæ‰€åšçš„è§„èŒƒï¼Œä»¥ä¾¿å¼€å‘è€…å¯ä»¥ä¾æ®è§„èŒƒåˆ©ç”¨ä¸åŒçš„è¯­è¨€æ¥å®ç°å®¢æˆ·ç«¯ä»¥åŠ*æ§åˆ¶å™¨*ã€‚
æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·çœ‹å¾…æ–‡æ¡£[API Conventions <GithubSVG />](https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#types-kinds)ä¸Kubernetesæºç çš„å…³ç³»â€”â€”`k8s.io/api`åº“å’Œ`k8s.io/apimachinery`åº“æ˜¯åŸºäºè¯¥æ–‡æ¡£çš„ä¸€ç§å®ç°æ–¹æ¡ˆã€‚

å½“ç„¶ï¼Œæ–‡æ¡£[API Conventions <GithubSVG />](https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#types-kinds)æœ¬èº«æ˜¯åäºKubernetesæºç äº§ç”Ÿçš„ï¼Œä¸å…¶è¯´ç¤¾åŒºå¼€å‘è€…æƒ³è¦ä¿è¯"è¯­è¨€ä¸­ç«‹"ï¼Œä¸å¦‚è¯´æ–‡æ¡£ä¸­çš„çº¦å®šå…¶å®æ˜¯å¯¹Kubernetesæºç ä¸­APIç±»å‹å®ç°ä¸Šçš„æ€»ç»“ã€‚[ğŸŒ§ï¸](../intro#çº¦å®š)


åœ¨æœ¬å°èŠ‚ä¸­æˆ‘ä»¬å°†ç»“åˆKubernetesæºç ï¼ˆGoè¯­è¨€ï¼‰å¯¹è¯¥æ–‡æ¡£åšè¿›ä¸€æ­¥çš„è¯ é‡Šã€‚
:::

## kindä¸runtime.Object[^1]

åœ¨ä¹‹å‰çš„å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“äº†åœ¨Kubernetesä¸­ï¼Œ*kind*æ˜¯æŸä¸€ç±»Goç±»å‹ï¼ˆå¦‚`type Pod struct {...}`ï¼Œ`type Service struct {...}`ï¼‰çš„ç»Ÿç§°ã€‚
è¿™ç®—æ˜¯ä¸€ç§æ–‡å­—ä¸Šçš„æ€»ç»“ã€‚
é‚£ä¹ˆåœ¨Kubernetesä¸­ï¼Œå¦‚ä½•ä»æºç è§’åº¦å»æè¿°"æ‰€æœ‰ç±»å‹éƒ½å±äº"è¿™ç§æ–‡å­—æ€§è´¨çš„æ€»ç»“å‘¢ï¼Ÿ
åœ¨Goè¯­è¨€ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“*æ¥å£ï¼ˆinterfaceï¼‰*æä¾›äº†ä¸€ç§æŠ½è±¡èƒ½åŠ›ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡â€œæ‰€æœ‰å®ç°äº†æŸä¸ªæ¥å£çš„å¯¹è±¡éƒ½è¢«ç§°ä¸ºkindâ€æ¥ä½“ç°è¿™ç§æ–‡å­—ä¸Šçš„æŠ½è±¡ã€‚

äº‹å®ä¹Ÿçš„ç¡®å¦‚æ­¤ï¼Œåœ¨Kubernetesæºç ä¸­ï¼Œæ‰€æœ‰*kind*ï¼ˆ`k8s.io/api`ï¼‰å…¶å®éƒ½å®ç°äº†`apimachinery`åº“ä¸­çš„`runtime.Object`æ¥å£ã€‚
æ¢ä¸€ç§å™è¿°æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯ï¼š**åœ¨Kubernetesä¸­ï¼Œæ‰€æœ‰å®ç°äº†`runtime.Object`æ¥å£çš„Goç±»å‹è¢«ç§°ä¸º*kind***ã€‚



ä¸‹å›¾å±•ç¤ºäº†`k8s.io/api`åº“ä¸­å®šä¹‰çš„*kind*ä¸`k8s.io/apimachinery`åº“ä¸­çš„åŸºç¡€æ¥å£çš„å…³ç³»ï¼š

<RuntimeObjectSVG style={{height: "560px"}} />


æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹`runtime.Object`æ¥å£çš„å…·ä½“å®šä¹‰ï¼š
```go title="k8s.io/apimachinery/pkg/runtime/interfaces.go"
type Object interface {
	GetObjectKind() schema.ObjectKind
	DeepCopyObject() Object
}
```

è¿™ä¸ªæ¥å£åŒ…å«ä¸¤ä¸ªæ–¹æ³•ï¼š
1. `GetObjectKind()`è¿”å›çš„æ˜¯**å¦ä¸€ä¸ª**`schema.ObjectKind`æ¥å£ï¼š
   <details>
   <summary>schema.ObjectKindæ¥å£</summary>

   ```go title="k8s.io/apimachinery/pkg/runtime/schema/interfaces.go"
   type ObjectKind interface {
       SetGroupVersionKind(kind GroupVersionKind)
       GroupVersionKind() GroupVersionKind
   }
   ```
   </details>

   `schema.ObjectKind`æ¥å£çš„ä¸¤ä¸ªæ–¹æ³•ç”¨äºè·å–åŠè®¾ç½®*GVK*ä¿¡æ¯ã€‚
   æ€»ä¹‹ï¼Œ`runtime.Object`çš„ç¬¬ä¸€ä¸ªæ–¹æ³•å®é™…ä¸Šè§„èŒƒäº†å®ç°ç±»å¿…é¡»èƒ½å¤Ÿè·å–/è®¾ç½®æœ¬ç±»å‹å¯¹åº”çš„*GVK*ä¿¡æ¯ã€‚
2. `DeepCopyObject()` çœ‹èµ·æ¥æ˜¯ä¸ªéå¸¸åŸºç¡€çš„æ–¹æ³•ï¼Œå³å®ç°ç±»éœ€è¦æä¾›ä¸€ä¸ªèƒ½å¤Ÿæ·±æ‹·è´è‡ªèº«çš„æ–¹æ³•ã€‚[ğŸˆ](../intro#çº¦å®š)


:::tip æ³¨
ç›¸æ¯”äºåœ¨ä¹‹å‰å°èŠ‚ä¸­å¯¹*kind*åå‘äºæ¦‚å¿µæ€§çš„æ€»ç»“ï¼Œåœ¨æœ¬å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¾§é‡äºçœŸæ­£ä»æºç å®ç°çš„è§’åº¦ç»™å‡º*kind*çš„å®šä¹‰ã€‚
:::

### metav1.TypeMeta

å¦å¤–ï¼Œéœ€è¦åœ¨è¿™é‡ŒæåŠçš„æ˜¯åœ¨`apimachinery`åº“ä¸­ï¼Œ`metav1.TypeMeta`è¿™ä¸ªå…ƒç±»å‹[^2]å®ç°äº†`runtime.Object`æ¥å£çš„**ç¬¬ä¸€ä¸ªæ–¹æ³•**`GetObjectKind() schema.ObjectKind`ã€‚[ğŸˆ](../intro#çº¦å®š)



<details>
<summary>apimachineryåº“çš„metav1.TypeMetaå…ƒç±»å‹</summary>

```go title=k8s.io/apimachinery/pkg/apis/meta/v1/types.go
type TypeMeta struct {
	Kind string `json:"kind,omitempty" protobuf:"bytes,1,opt,name=kind"`
	APIVersion string `json:"apiVersion,omitempty" protobuf:"bytes,2,opt,name=apiVersion"`
}
```

``` go title="k8s.io/apimachinery/pkg/apis/meta/v1/meta.go"
func (obj *TypeMeta) GetObjectKind() schema.ObjectKind { return obj }
```

</details>

åœ¨å…·ä½“å®ç°ä¸Šï¼Œå®ƒåŒ…å«çš„ç±»æˆå‘˜å‘½åä¹Ÿç¬¦åˆ[API Conventions <GithubSVG />](https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#resources)ä¸­å…³äº*kind*å…ƒå­—æ®µåç§°çš„è¦æ±‚ã€‚
æ ¹æ®çº¦å®šï¼Œæ–‡æ¡£è¦æ±‚*Kubernetesèµ„æº*å¿…é¡»æœ‰åä¸º`kind`ä»¥åŠ`apiversion`å­—æ®µåˆ†åˆ«è¡¨ç¤ºç±»å‹åç§°ä»¥åŠåˆ†ç»„å’Œç‰ˆæœ¬ä¿¡æ¯ï¼š
> [Resources](https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#resources)
>
> All JSON objects returned by an API MUST have the following fields:
>
> * kind: a string that identifies the schema this object should have
> * apiVersion: a string that identifies the version of the schema the object should have
>
> These fields are required for proper decoding of the object.

æ„æ€æ˜¯è¯´ï¼Œ`kind`å’Œ`apiVersion`è¿™ä¸¤ä¸ªå­—æ®µéœ€è¦ç”¨äºè§£ç ï¼ˆååºåˆ—åŒ–ï¼‰èµ„æºã€‚

`apimachinery`åº“ä¸­ä¸ååºåˆ—åŒ–èµ„æºæœ‰å…³çš„ä»£ç ä¹Ÿç¡®å®ä¼š**æ£€æŸ¥è¿™ä¸¤ä¸ªå­—æ®µä»¥åˆ†æå¾—å‡ºèµ„æºçš„GVKä¿¡æ¯**ï¼š

<details>
<summary>apimachineryåº“ä¸­åºåˆ—åŒ–èµ„æºæ—¶æ¨æ–­GVKä¿¡æ¯çš„é€»è¾‘</summary>


```go title="k8s.io/apimachinery/pkg/api/meta/help.go"
func (SimpleMetaFactory) Interpret(data []byte) (*schema.GroupVersionKind, error) {
     findKind := struct {
     	// +optional
     	APIVersion string `json:"apiVersion,omitempty"`
     	// +optional
     	Kind string `json:"kind,omitempty"`
     }{}
     if err := json.Unmarshal(data, &findKind); err != nil {
     	return nil, fmt.Errorf("couldn't get version/kind; json parse error: %v", err)
     }
     gv, err := schema.ParseGroupVersion(findKind.APIVersion)
     if err != nil {
     	return nil, err
     }
     return &schema.GroupVersionKind{Group: gv.Group, Version: gv.Version, Kind: findKind.Kind}, nil
}
```
</details>

è¿™åªæ˜¯`apimachinery`åº“ååºåˆ—åŒ–æœ€åˆçš„æ­¥éª¤ã€‚åœ¨åç»­å°èŠ‚[åºåˆ—åŒ–å™¨ä¸åºåˆ—åŒ–å™¨å·¥å‚](./serializer)ä¸­ï¼Œæˆ‘ä»¬è¿˜ä¼šè¿›ä¸€æ­¥ä»‹ç»`apimachinery`åº“ååºåˆ—åŒ–çš„åç»­æ­¥éª¤ã€‚

:::tip æ³¨
æˆ‘ä»¬åœ¨è¿™é‡Œçªç„¶æåŠ`metav1.TypeMeta`ä¼¼ä¹æœ‰ç‚¹"å”çª"ã€‚
ä¸è¿‡åœ¨æœ¬èŠ‚ï¼Œä½ åªéœ€è¦äº†è§£åˆ°è¿™ä¸ªäº‹å®å³å¯ã€‚è¿™ä¸ªçŸ¥è¯†ç‚¹æ˜¯ä½œä¸ºåç»­[kindæ¡ˆä¾‹æ¢ç©¶](./kind-case-study)å°èŠ‚çš„é¢„å¤‡çŸ¥è¯†è€Œä¸å¾—ä¸åœ¨è¿™é‡Œæå‰æŒ‡å‡ºã€‚
:::


:::tip å°ç»“
ç›®å‰æˆ‘ä»¬å·²ç»æ­éœ²äº†Kubernetesä¸­*kind*è¿™ä¸ªæ¦‚å¿µä¸`apimachinery`åº“ä¸­`runtime.Object`æ¥å£çš„å…³ç³»ã€‚

ä¸è¿‡åœ¨ä¹‹å‰çš„å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬åŸºäº[Kubernetes API Reference Doc <KubernetesSVG />](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.27/)å°†*kind*ç»§ç»­ç»†åˆ†ä¸ºäº†ä¸‰ä¸ªç§ç±»ï¼Œ
ä½†ä¹Ÿä»æ˜¯åŸºäºæ–‡å­—æ€§çš„å™è¿°å»æè¿°æ¯ç§åˆ†ç±»ã€‚
å…¶ä¸­*kind*çš„ç¬¬ä¸‰ä¸ªç§ç±»è¿‡äºç‰¹æ®Šï¼Œåœ¨ç±»å‹ä¸Šæ²¡æœ‰å…·ä½“è¦éµå®ˆçš„çº¦å®šï¼Œå› æ­¤æˆ‘ä»¬ä¸å†æ·±å…¥ç ”ç©¶ã€‚
å¯¹äº*kind*çš„å•ä½“ç§ç±»ä»¥åŠé›†åˆç§ç±»ï¼Œå®ƒä»¬åœ¨Kubernetesæºç ä¸­ä¹Ÿåˆ†åˆ«æœ‰å¯¹åº”çš„æ¥å£æŠ½è±¡ã€‚
ä¸‹é¢æˆ‘ä»¬å°†ç»§ç»­ä»Kubernetesæºç è§’åº¦æ¢è®¨*kind*çš„å•ä½“ç§ç±»ä»¥åŠé›†åˆç§ç±»çš„æœ¬è´¨ã€‚
:::



## kindçš„å•ä½“ç§ç±»ä¸metav1.Object

å¯¹äºå•ä½“ç§ç±»ï¼Œç”±äºå®ƒå±äº*kind*ï¼Œæ ¹æ®å…ˆå‰çš„è®ºè¿°ï¼Œå®ƒå¿…ç„¶å®ç°äº†`runtime.Object`æ¥å£ã€‚é™¤æ­¤ä»¥å¤–ï¼Œä½œä¸ºå•ä½“ç§ç±»ï¼Œå®ƒä»¬è¿˜éœ€è¦å®ç°`metav1.Object`æ¥å£ï¼š
```go title="pkg/apimachinery/pkg/api/meta/v1/meta.go"
type Object interface {
	GetNamespace() string
	SetNamespace(namespace string)
	GetName() string
	SetName(name string)
	GetGenerateName() string
	SetGenerateName(name string)
	GetUID() types.UID
	SetUID(uid types.UID)
	GetResourceVersion() string
	SetResourceVersion(version string)
	// ...
}
```
ä»æ¥å£çš„å®šä¹‰å¯ä»¥çœ‹å‡ºå•ä½“ç±»å‹éœ€è¦æä¾›è·å–/è®¾ç½®ä¸€äº›å…ƒä¿¡æ¯ä¾‹å¦‚åç§°ï¼ˆnameï¼‰ï¼Œå‘½åç©ºé—´ï¼ˆnamespaceï¼‰ï¼Œæ ‡ç­¾ï¼ˆlabelsï¼‰æ³¨è§£ï¼ˆannotationsï¼‰ç­‰çš„æ–¹æ³•ã€‚


ä¸‹å›¾ä»¥`Pod`ç±»å‹ä¸ºä¾‹ï¼Œå®ƒå…¶å®å®ç°äº†`runtime.Object`å’Œ`metav1.Object`ä¸¤ä¸ªæ¥å£ï¼š
<SingularSVG style={{height: "420px"}} />


### metav1.ObjectMetaå…ƒç±»å‹

å¦å¤–ï¼Œæœ‰å¿…è¦åœ¨æœ¬èŠ‚æåŠçš„æ˜¯`apimachinery`åº“ä¸­ï¼Œ
`metav1.ObjectMeta`å…ƒç±»å‹å®ç°äº†`metav1.Object`æ¥å£ã€‚[ğŸˆ](../intro#çº¦å®š)

<details>
<summary>metav1.ObjectMetaå…ƒç±»å‹</summary>

```go title="k8s.io/apimachinery/pkg/apis/meta/v1/types.go"
// ObjectMeta is metadata that all persisted resources must have, which includes all objects
// users must create.
type ObjectMeta struct {
	Name string `json:"name,omitempty" protobuf:"bytes,1,opt,name=name"`
	GenerateName string `json:"generateName,omitempty" protobuf:"bytes,2,opt,name=generateName"`
	Namespace string `json:"namespace,omitempty" protobuf:"bytes,3,opt,name=namespace"`
	SelfLink string `json:"selfLink,omitempty" protobuf:"bytes,4,opt,name=selfLink"`
	UID types.UID `json:"uid,omitempty" protobuf:"bytes,5,opt,name=uid,casttype=k8s.io/kubernetes/pkg/types.UID"`
	ResourceVersion string `json:"resourceVersion,omitempty" protobuf:"bytes,6,opt,name=resourceVersion"`
	Generation int64 `json:"generation,omitempty" protobuf:"varint,7,opt,name=generation"`
	CreationTimestamp Time `json:"creationTimestamp,omitempty" protobuf:"bytes,8,opt,name=creationTimestamp"`
	DeletionTimestamp *Time `json:"deletionTimestamp,omitempty" protobuf:"bytes,9,opt,name=deletionTimestamp"`
	DeletionGracePeriodSeconds *int64 `json:"deletionGracePeriodSeconds,omitempty" protobuf:"varint,10,opt,name=deletionGracePeriodSeconds"`
	Labels map[string]string `json:"labels,omitempty" protobuf:"bytes,11,rep,name=labels"`
	Annotations map[string]string `json:"annotations,omitempty" protobuf:"bytes,12,rep,name=annotations"`
	OwnerReferences []OwnerReference `json:"ownerReferences,omitempty" patchStrategy:"merge" patchMergeKey:"uid" protobuf:"bytes,13,rep,name=ownerReferences"`
	Finalizers []string `json:"finalizers,omitempty" patchStrategy:"merge" protobuf:"bytes,14,rep,name=finalizers"`
	ManagedFields []ManagedFieldsEntry `json:"managedFields,omitempty" protobuf:"bytes,17,rep,name=managedFields"`
}
```


```go title="k8s.io/apimachinery/pkg/apis/meta/v1/meta.go"
func (meta *ObjectMeta) GetNamespace() string                { return meta.Namespace }
func (meta *ObjectMeta) SetNamespace(namespace string)       { meta.Namespace = namespace }
func (meta *ObjectMeta) GetName() string                     { return meta.Name }
func (meta *ObjectMeta) SetName(name string)                 { meta.Name = name }
func (meta *ObjectMeta) GetGenerateName() string             { return meta.GenerateName }
func (meta *ObjectMeta) SetGenerateName(generateName string) { meta.GenerateName = generateName }
func (meta *ObjectMeta) GetUID() types.UID                   { return meta.UID }
func (meta *ObjectMeta) SetUID(uid types.UID)                { meta.UID = uid }
func (meta *ObjectMeta) GetResourceVersion() string          { return meta.ResourceVersion }
func (meta *ObjectMeta) SetResourceVersion(version string)   { meta.ResourceVersion = version }
func (meta *ObjectMeta) GetGeneration() int64                { return meta.Generation }
func (meta *ObjectMeta) SetGeneration(generation int64)      { meta.Generation = generation }
func (meta *ObjectMeta) GetSelfLink() string                 { return meta.SelfLink }
func (meta *ObjectMeta) SetSelfLink(selfLink string)         { meta.SelfLink = selfLink }
func (meta *ObjectMeta) GetCreationTimestamp() Time          { return meta.CreationTimestamp }
func (meta *ObjectMeta) SetCreationTimestamp(creationTimestamp Time) { meta.CreationTimestamp = creationTimestamp }
func (meta *ObjectMeta) GetDeletionTimestamp() *Time { return meta.DeletionTimestamp }
func (meta *ObjectMeta) SetDeletionTimestamp(deletionTimestamp *Time) { meta.DeletionTimestamp = deletionTimestamp }
func (meta *ObjectMeta) GetDeletionGracePeriodSeconds() *int64 { return meta.DeletionGracePeriodSeconds }
func (meta *ObjectMeta) SetDeletionGracePeriodSeconds(deletionGracePeriodSeconds *int64) { meta.DeletionGracePeriodSeconds = deletionGracePeriodSeconds }
func (meta *ObjectMeta) GetLabels() map[string]string                 { return meta.Labels }
func (meta *ObjectMeta) SetLabels(labels map[string]string)           { meta.Labels = labels }
func (meta *ObjectMeta) GetAnnotations() map[string]string            { return meta.Annotations }
func (meta *ObjectMeta) SetAnnotations(annotations map[string]string) { meta.Annotations = annotations }
func (meta *ObjectMeta) GetFinalizers() []string                      { return meta.Finalizers }
func (meta *ObjectMeta) SetFinalizers(finalizers []string)            { meta.Finalizers = finalizers }
func (meta *ObjectMeta) GetOwnerReferences() []OwnerReference         { return meta.OwnerReferences }
func (meta *ObjectMeta) SetOwnerReferences(references []OwnerReference) { meta.OwnerReferences = references }
func (meta *ObjectMeta) GetManagedFields() []ManagedFieldsEntry { return meta.ManagedFields }
func (meta *ObjectMeta) SetManagedFields(managedFields []ManagedFieldsEntry) { meta.ManagedFields = managedFields }
```
</details>

åœ¨å…·ä½“å®ç°ä¸Šï¼Œ`metav1.Object`ç±»æˆå‘˜å‘½åä¹Ÿç¬¦åˆ[API Conventions <GithubSVG />](https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#objects)ä¸­å…³äºå•ä½“ç±»å‹å…ƒå­—æ®µçš„è§„èŒƒã€‚


æ ¹æ®æ–‡æ¡£[API Conventions <GithubSVG />](https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#objects)ï¼Œå¯¹äºå•ä½“ç§ç±»ï¼Œå®ƒä»¬**å¿…é¡»**åŒ…å«åä¸º`metadata`çš„å­—æ®µï¼ŒåŒæ—¶åœ¨`metadata`å­—æ®µä¸‹ç”±**å¿…é¡»**è¦æœ‰åä¸º`namespace`ï¼Œ`name`ï¼Œ`uid`ç­‰å­—æ®µã€‚
å¦å¤–ï¼Œå®ƒä»¬**åº”è¯¥**å¸¦æœ‰`resourceVersion`ï¼Œ`generation`ï¼Œ`labels`ï¼Œ`annotations`ï¼Œ`deletionTimestamp`ï¼Œ`creationTimestamp`ç­‰å­—æ®µã€‚

<details>
<summary>å•ä½“ç±»å‹çš„å®ç°çº¦å®š</summary>

> [Objects](https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#objects)
>
> Metadata
> Every object kind MUST have the following metadata in a nested object field called "metadata":
>
> * namespace: a namespace is a DNS compatible label that objects are subdivided into. The default namespace is 'default'. See the namespace docs for more.
> * name: a string that uniquely identifies this object within the current namespace (see the identifiers docs). This value is used in the path when retrieving an individual object.
> * uid: a unique in time and space value (typically an RFC 4122 generated identifier, see the identifiers docs) used to distinguish between objects with the same name that have been deleted and recreated
>
> Every object SHOULD have the following metadata in a nested object field called "metadata":
>
> * resourceVersion: a string that identifies the internal version of this object that can be used by clients to determine when objects have changed. This value MUST be treated as opaque by clients and passed unmodified back to the server. Clients should not assume that the resource version has meaning across namespaces, different kinds of resources, or different servers. (See concurrency control, below, for more details.)
> * generation: a sequence number representing a specific generation of the desired state. Set by the system and monotonically increasing, per-resource. May be compared, such as for RAW and WAW consistency.
> * creationTimestamp: a string representing an RFC 3339 date of the date and time an object was created
> * deletionTimestamp: a string representing an RFC 3339 date of the date and time after which this resource will be deleted. This field is set by the server when a graceful deletion is requested by the user, and is not directly settable by a client. The resource will be deleted (no longer visible from resource lists, and not reachable by name) after the time in this field except when the object has a finalizer set. In case the finalizer is set the deletion of the object is postponed at least until the finalizer is removed. Once the deletionTimestamp is set, this value may not be unset or be set further into the future, although it may be shortened or the resource may be deleted prior to this time.
> * labels: a map of string keys and values that can be used to organize and categorize objects (see the labels docs)
> * annotations: a map of string keys and values that can be used by external tooling to store and retrieve arbitrary metadata about this object (see the annotations docs)

</details>

:::tip æ³¨
æˆ‘ä»¬ç›®å‰ä¸ºæ­¢åªæ˜¯é™ˆè¿°äº†*kind*ä¸­çš„å•ä½“ç§ç±»ï¼ˆå¦‚`Pod`ï¼‰å®ç°äº†`metav1.Object`æ¥å£è¿™ä¸ªäº‹å®ã€‚ä½†æ˜¯å´æ²¡æœ‰
è¡¥å……kindä¸­çš„*å•ä½“ç§ç±»*æ˜¯å¦‚ä½•å®ç°`metav1.Object`çš„å…·ä½“ç»†èŠ‚ã€‚
åœ¨åç»­[kindæ¡ˆä¾‹æ¢ç©¶](./kind-case-study)å°èŠ‚æˆ‘ä»¬è¿˜ä¼šè§£é‡Šå…·ä½“çš„*kind*ï¼ˆ`k8s.io/api`ï¼‰æ˜¯å¦‚ä½•åˆ©ç”¨å…ƒç±»å‹ï¼ˆ`k8s.io/apimachinery`ï¼‰æ¥é—´æ¥å®ç°è¿™äº›æŠ½è±¡æ¥å£çš„â€”â€”è¿™ä¹Ÿæ˜¯æˆ‘ä»¬åœ¨æœ¬èŠ‚æåŠ`k8s.io/apimachinery`åº“ä¸­å…ƒç±»å‹çš„åŠ¨æœºã€‚
:::



### é›†åˆç§ç±»
å¯¹äºé›†åˆç§ç±»ï¼Œé™¤äº†è¦å®ç°`runtime.Object`æ¥å£å¤–ï¼Œå®ƒä»¬è¿˜éœ€è¦å®ç°`metav1.ListInterface`æ¥å£ï¼š
```go title="pkg/apis/meta/v1/meta.go"
type ListInterface interface {
	GetResourceVersion() string
	SetResourceVersion(version string)
	GetSelfLink() string
	SetSelfLink(selfLink string)
	GetContinue() string
	SetContinue(c string)
	GetRemainingItemCount() *int64
	SetRemainingItemCount(c *int64)
}
```

ä¸‹å›¾ä»¥`PodList`ç±»å‹ä¸ºä¾‹ï¼Œå±•ç¤ºäº†å®ƒæ‰€å®ç°çš„ä¸¤ä¸ªæ¥å£ï¼š

<CollectionSVG style={{height: "420px"}} />


æ ¹æ®[API Conventions <GithubSVG />](https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#types-kinds)ï¼Œé›†åˆç§ç±»åœ¨å®ç°ä¸Šè¿˜**å¿…é¡»**è¦åŒ…å«åä¸º`Items`çš„æ•°ç»„ï¼Œå¹¶ä¸”ç±»å‹åç§°å¿…é¡»è¦ä»¥"List"ç»“å°¾ã€‚
>
>
> Lists are collections of resources of one (usually) or more (occasionally) kinds.
>
> The name of a list kind must end with "List". Lists have a limited set of common metadata. All lists use the required "items" field to contain the array of objects they return. Any kind that has the "items" field must be a list kind.


å¦å¤–ï¼Œéœ€è¦åœ¨è¿™é‡ŒæåŠçš„æ˜¯åœ¨`apimachinery`åº“ä¸­ï¼Œ`metav1.ListMeta`ç±»è™½ç„¶å®ç°äº†`metav1.ListInterface`æ¥å£ï¼Œ**ä½†æ˜¯å¹¶æ²¡æœ‰åŒ…å«[API Conventions <GithubSVG />](https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#types-kinds)æ‰€è¦æ±‚çš„`Items`å­—æ®µ**ã€‚[ğŸˆ](../intro#çº¦å®š)

:::tip æ³¨
è‡³äº`metav1.ListMeta`æ²¡æœ‰åŠ å…¥`Items`çš„åˆ‡ç‰‡æˆå‘˜çš„åŸå› ï¼Œç§ä»¥ä¸ºå¯èƒ½æ˜¯`metav1.ListInterface`æ¥å£æœ¬èº«å°±æ²¡æœ‰ä¸`Items`ç›¸å…³çš„æ–¹æ³•ã€‚[ğŸŒ§ï¸](../intro#çº¦å®š)
è€Œ`metav1.ListInterface`æ¥å£æ²¡æœ‰ä¸`Items`ç›¸å…³çš„æ–¹æ³•çš„åŸå› å¯èƒ½æ˜¯å¼€å‘è€…æœ¬èº«è®¾è®¡ä¸Šçš„ç–å¿½ã€‚[ğŸŒ§ï¸](../intro#çº¦å®š)è¯æ®æ˜¯ï¼š
åœ¨`apimachinery`åº“ä¸­æœ‰ä¸€ä¸ªåˆ¤æ–­ç±»å‹æ˜¯å¦ä¸ºé›†åˆç§ç±»çš„å‡½æ•°`IsListType`ï¼š
<details>
<summary>IsListTypeå‡½æ•°</summary>

```go title="k8s.io/apimachinery/pkg/api/meta/help.go"
// IsListType returns true if the provided Object has a slice called Items.
// TODO: Replace the code in this check with an interface comparison by
// creating and enforcing that lists implement a list accessor.
func IsListType(obj runtime.Object) bool {
	switch t := obj.(type) {
	case runtime.Unstructured:
		return t.IsList()
	}
	t := reflect.TypeOf(obj)

	isListCache.lock.RLock()
	ok, exists := isListCache.byType[t]
	isListCache.lock.RUnlock()

	if !exists {
		_, err := getItemsPtr(obj)
		ok = err == nil

		// cache only the first 1024 types
		isListCache.lock.Lock()
		if len(isListCache.byType) < 1024 {
			isListCache.byType[t] = ok
		}
		isListCache.lock.Unlock()
	}

	return ok
}
```

</details>

`IsListType`å‡½æ•°çš„å‡½æ•°æ–‡æ¡£ä¸­ä¹Ÿæ˜ç¡®è¯´æ˜äº†ï¼š
> IsListType returns true if the provided Object has a slice called Items.

å®ƒæ˜¯é€šè¿‡æ£€æŸ¥ç±»å‹ä¸­æ˜¯å¦å­˜åœ¨ä¸€ä¸ª`Items`çš„sliceå­—æ®µæ¥åˆ¤æ–­ç±»å‹æ˜¯å¦ä¸ºé›†åˆã€‚
åŒæ—¶ï¼Œåœ¨æ­¤å‡½æ•°çš„`TODO`ä¿¡æ¯ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™æ ·ä¸€å¥è¯ï¼š
> TODO: Replace the code in this check with an interface comparison by
> creating and enforcing that lists implement a list accessor.

è¯´æ˜é€šè¿‡æ£€æŸ¥ç±»å‹ä¸­æ˜¯å¦å«æœ‰`Items`å­—æ®µåœ¨å®˜æ–¹å¼€å‘è€…çœ‹æ¥ç¡®å®å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„æ–¹å¼ï¼Œé€šè¿‡æ£€æŸ¥ç±»å‹æ˜¯å¦å®ç°äº†`metav1.ListInterface`æ¥å£æ¥åˆ¤æ–­æ›´å…·æœ‰è¯´æœåŠ›ã€‚
æ‰€ä»¥åœ¨å°†æ¥`metav1.ListInterface`å¯èƒ½ä¼šåŠ ä¸Šç±»ä¼¼äº`GetItems()`çš„æ–¹æ³•ã€‚[ğŸŒ§ï¸](../intro#çº¦å®š)

:::



:::tip å°ç»“
åˆ°ç°åœ¨ä¸ºæ­¢æˆ‘ä»¬æ€»ç»“äº†Kubernetesæºç æ˜¯å¦‚ä½•éµå¾ª[API Conventions <GithubSVG />](https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#types-kinds)ä¸­å¯¹*èµ„æº*/*kind*å­—æ®µæ‰€åšçš„çº¦å®šã€‚
å…·ä½“æ¥è¯´ï¼Œé¦–å…ˆKubernetesæºç `k8s.io/apimachinery`åº“é€šè¿‡Goæ¥å£çš„æ–¹å¼æŠ½è±¡äº†æ–‡æ¡£ä¸­å¯¹äº*å•ä½“ç§ç±»*ä»¥åŠ*é›†åˆç§ç±»*çš„å…·ä½“è¦æ±‚ã€‚
å…¶æ¬¡`k8s.io/apimachinery`åº“ä¸­çš„å…ƒç±»å‹å®ç°äº†æ‰€æŠ½è±¡çš„æ¥å£å¹¶åœ¨æˆå‘˜å˜é‡çš„è®¾ç½®ä¸Šä¹Ÿç¬¦åˆ[API Conventions <GithubSVG />](https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#types-kinds)å¯¹*èµ„æº*/*kind*éœ€è¦æ‰€åŒ…å«çš„å…ƒä¿¡æ¯çš„è¦æ±‚ã€‚
:::


## åˆè¯†[^3]apimachineryåº“çš„åºåˆ—åŒ–å™¨
:::tip æ³¨
ç›®å‰ï¼Œæˆ‘ä»¬ä¼¼ä¹åªè®ºè¯äº†*kind*æ˜¯æŒ‡å®ç°äº†`runtime.Object`çš„Goç±»å‹ã€‚ç„¶è€Œæœ¬èŠ‚æœ€å¼€å§‹å¯¹*kind*çš„æ‰©å……å®šä¹‰æ˜¯ï¼šæ‰€æœ‰éœ€è¦**è¢«åºåˆ—åŒ–/ååºåˆ—åŒ–**çš„Goç±»å‹éƒ½è¢«ç§°ä¸º*kind*"ã€‚
æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†"è¿å¸¦"ä»‹ç»`apimachinery`åº“ä¸­çš„åºåˆ—åŒ–å™¨ä¸`runtime.Object`çš„å…³ç³»ä»¥å®Œæ•´çš„è®ºè¿°æœ¬èŠ‚å¼€å§‹å¯¹*kind*çš„æ‰©å……å®šä¹‰ã€‚
:::

`runtime.Object`æ¥å£æœ¬èº«å…¶å®å¹¶æ²¡æœ‰åŒ…å«ä¸ç¼–/è§£ç ç›´æ¥ç›¸å…³çš„æ–¹æ³•ã€‚
ä¸ºäº†è¯´æ¸…æ¥š`runtime.Object`æ¥å£ä¸ç¼–/è§£ç çš„å…³ç³»ï¼Œæˆ‘ä»¬éœ€è¦ä»`apimachinery`åº“çš„åºåˆ—åŒ–åŸç†æ­¥éª¤è¯´èµ·ã€‚
æˆ‘ä»¬åœ¨è¿™é‡Œå…ˆç›´æ¥ç»™å‡ºç»“è®ºï¼Œåœ¨åç»­[åºåˆ—åŒ–å™¨ä¸åºåˆ—åŒ–å™¨å·¥å‚](./serializer)ç« èŠ‚æˆ‘ä»¬è¿˜ä¼šç»™å‡ºå…·ä½“ä»‹ç»`apimachinery`åº“çš„åºåˆ—åŒ–åŸç†ã€‚

åœ¨`apimachinery`åº“ä¸­ï¼Œ**ç›´æ¥**å‚ä¸å¯¹kindç¼–/è§£ç æ“ä½œçš„æ˜¯*åºåˆ—åŒ–å™¨ï¼ˆserializersï¼‰*[^4]ã€‚
è€Œ`apimachinery`åº“ä¸­çš„åºåˆ—åŒ–å™¨ä¾èµ–äºä¸€ä¸ªå«åš`runtime.Scheme`[^5]ç»“æ„ï¼ˆä¹Ÿå°±æ˜¯åºåˆ—åŒ–å™¨ç±»å‹åŒ…å«ä¸€ä¸ª`runtime.Scheme`ç±»å‹çš„æˆå‘˜ï¼‰ã€‚
å¯¹äº`runtime.Scheme`ç±»å‹ï¼Œä½ å¯ä»¥ç®€å•æŠŠå®ƒç†è§£æˆä¸€å¼ Goç±»å‹çš„"æ³¨å†Œè¡¨"ã€‚
**åªæœ‰åœ¨`scheme`[^6]ç»“æ„ä¸­â€œæ³¨å†Œâ€è¿‡çš„Goç±»å‹æ‰å¯ä»¥è¢«åºåˆ—åŒ–å™¨åºç¼–/è§£ç **ã€‚


## runtime.Schemeä¸kind

åœ¨ä¸Šä¸€å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬åœ¨ä»‹ç»`apimachinery`åº“ä¸­çš„åºåˆ—åŒ–å™¨æ—¶å¼•å…¥äº†`runtime.Scheme`ç±»å‹ã€‚
é‚£ä¹ˆåœ¨å‰æ–‡æ‰€è°“çš„â€œæ³¨å†Œâ€ç±»å‹å…·ä½“æŒ‡ä»€ä¹ˆå‘¢ï¼Ÿ
åœ¨`runtime.Scheme`ä¸­å­˜åœ¨ä¸€ä¸ª`map`ç±»å‹çš„æˆå‘˜(æ˜ å°„è¡¨)[^7]â€”â€”`gvkToType`:
```go title="k8s.io/apimachinery/pkg/runtime/scheme.go"
type Scheme struct {
    // highlight-next-line
	gvkToType map[schema.GroupVersionKind]reflect.Type
	
	// ...
}

```
åŒæ—¶ï¼Œ`runtime.Scheme`ä¹Ÿå¯¹å¤–æä¾›äº†å¾€æ­¤`map`ä¸­æ’å…¥ï¼ˆæ³¨å†Œï¼‰æ•°æ®çš„æ–¹æ³•ï¼š
```go title="k8s.io/apimachinery/pkg/runtime/scheme.go"
func (s *Scheme) AddKnownTypeWithName(gvk schema.GroupVersionKind, obj Object) {
   // ...
}
```

æˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒè¿™ä¸ªæ–¹æ³•çš„å…·ä½“å®ç°ï¼Œæˆ‘ä»¬ç°åœ¨åªéœ€è¦çŸ¥é“æ­¤æ–¹æ³•å¯ä»¥å°†ç±»å‹ä¸º`runtime.Object`ï¼ˆå³å‚æ•°`obj`ï¼‰çš„å¯¹è±¡ä»¥åŠå¯¹åº”çš„GVKä¿¡æ¯ï¼ˆå‚æ•°`gvk`ï¼‰æ³¨å†Œè¿›`gvkToType`è¿™å¼ è¡¨ä¸­[^4]ã€‚
ä¹Ÿå°±æ˜¯è¯´ï¼Œ`Scheme`åªèƒ½æ³¨å†Œ**`runtime.Object`ç±»å‹çš„å¯¹è±¡**ã€‚
è€Œæ ¹æ®ä¹‹å‰çš„å®šä¹‰ï¼Œ*kind*å°±æ˜¯å®ç°äº†`runtime.Object`æ¥å£çš„Goç±»å‹çš„ç»Ÿç§°ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥è¯´`Scheme`ç±»å‹ç”¨äºæ³¨å†Œkindã€‚

<SerializerKindSVG style={{width: "95%"}}/>

:::tip ç¼–/è§£ç "æ³¨å†Œ"æœºåˆ¶çš„å†å²

Kubernetesä¸­ç¼–/è§£ç çš„"æ³¨å†Œ"æœºåˆ¶æœ€æ—©å¯ä»¥è¿½æº¯åˆ°[<GithubSVG /> Pull Request #196](https://github.com/kubernetes/kubernetes/pull/196)ã€‚

åœ¨[<GithubSVG /> Pull Request #196](https://github.com/kubernetes/kubernetes/pull/196)ä¸­ï¼Œå¼€å‘è€…é¦–æ¬¡å°†*kind*ç›´æ¥ä½œä¸ºå­—æ®µåµŒå…¥APIçš„JSON Schema[^8]ä¸­ï¼Œè¿™æ ·åšçš„åŠ¨æœºåœ¨ä½œè€…çœ‹æ¥æ˜¯ï¼š"Make api able to marshal its types correctly"ã€‚
åœ¨[<GithubSVG /> Pull Request #196](https://github.com/kubernetes/kubernetes/pull/196)ä¹‹å‰ï¼Œå…¶å®`kube-apiserver`ç”šè‡³ä¸å¸¸è§Goçš„REST HTTP Serverå¹¶æœ¬è´¨åŒºåˆ«ã€‚å¯¹äºæ¯ä¸ªAPIè¯·æ±‚ï¼Œhandlerè°ƒç”¨`json.Unmarshal()/json.Marshal()`è¿›è¡Œæœ´ç´ çš„ååºåˆ—åŒ–/åºåˆ—åŒ–å³å¯ã€‚
è¿™ç§æ–¹å¼çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯**æ¯ä¸ª**APIçš„handleréƒ½è¦äº‹å…ˆçŸ¥é“æ­¤APIè¯·æ±‚/è¿”å›ä½“å¯¹åº”çš„Goç±»å‹ï¼Œæ‰èƒ½è°ƒç”¨`json.Unmarshal`/`json.Marshal`ã€‚
åœ¨[<GithubSVG /> Pull Request #196](https://github.com/kubernetes/kubernetes/pull/196)ä¹‹åï¼Œåœ¨å¯¹APIè¯·æ±‚ä½“çš„åºåˆ—åŒ–/ååºåˆ—åŒ–çš„å¤„ç†å‘ç”Ÿäº†è´¨çš„è½¬å˜ã€‚
å…·ä½“æ¥è¯´ï¼Œå¼€å‘è€…ç¬¬ä¸€æ¬¡å¼•å…¥äº†Goç±»å‹æ³¨å†Œæœºåˆ¶ï¼š
```go title="pkg/api/helper.go"
var knownTypes = map[string]reflect.Type{}

func init() {
	AddKnownTypes(
		PodList{},
		Pod{},
		ReplicationControllerList{},
		ReplicationController{},
		ServiceList{},
		Service{},
		Status{},
	)
}

func AddKnownTypes(types ...interface{}) {
	for _, obj := range types {
		t := reflect.TypeOf(obj)
		knownTypes[t.Name()] = t
	}
}

```
å…¶ä¸­`knownTypes`å˜é‡ç”¨äºå°†ç±»å‹åç§°ï¼ˆ`string`ï¼‰æ˜ å°„åˆ°å…·ä½“çš„åå°„ç±»å‹ï¼ˆ`reflect.Type`ï¼‰ã€‚åŒæ—¶åœ¨`init()`å‡½æ•°ä¸­ï¼Œå°†æ‰€æœ‰APIçš„Goç±»å‹æ³¨å†Œè¿›`knownTypes`è¿™å¼ è¡¨ä¸­ã€‚
è¿™ä¹ˆåšçš„å¥½å¤„æ˜¯ï¼Œå¯¹äºä»»æ„çš„HTTPè¯·æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ª**ç»Ÿä¸€**çš„è§£ç å‡½æ•°æ¥å¤„ç†è¯·æ±‚ä½“çš„JSONå­—èŠ‚åºåˆ—ï¼ˆ`[]byte`ï¼‰çš„ååºåˆ—åŒ–ï¼š
```go title="pkg/api/helper.go"
func Decode(data []byte) (interface{}, error) {
	findKind := struct {
		Kind string `json:"kind,omitempty" yaml:"kind,omitempty"`
	}{}
	// yaml is a superset of json, so we use it to decode here. That way, we understand both.
	err := yaml.Unmarshal(data, &findKind)
	if err != nil {
		return nil, fmt.Errorf("Couldn't get kind: %#v", err)
	}
	objType, found := knownTypes[findKind.Kind]
	if !found {
		return nil, fmt.Errorf("%v is not a known type", findKind.Kind)
	}
	obj := reflect.New(objType).Interface()
	err = yaml.Unmarshal(data, obj)
	if err != nil {
		return nil, err
	}
	_, jsonBase, err := nameAndJSONBase(obj)
	if err != nil {
		return nil, err
	}
	// Don't leave these set. Track type with go's type.
	jsonBase.Kind = ""
	return obj, nil
}
```
è¿™ä¸ªè§£ç å‡½æ•°çš„é€»è¾‘éå¸¸ç®€å•æ¸…æ™°ï¼Œé¦–å…ˆæ•è·å­—èŠ‚åºåˆ—`data`çš„`kind`å­—æ®µï¼Œè·å–ç±»å‹ä¿¡æ¯ä»¥åï¼Œç„¶ååœ¨`knownTypes`è¡¨ä¸­é‡Œç›´æ¥æŸ¥æ‰¾åˆ°å¯¹åº”çš„Goç±»å‹ï¼Œæœ€åè°ƒç”¨`json.Unmarshal()`å®Œæˆååºåˆ—åŒ–å·¥ä½œå³å¯ã€‚


`knownTypes`æ­£æ˜¯åæ¥`runtime.Scheme`ç±»å‹çš„å‰èº«ã€‚å½¼æ—¶ï¼Œç”šè‡³*èµ„æº*çš„æ¦‚å¿µè¿˜æœªåœ¨ç¤¾åŒºå½¢æˆï¼ŒAPIåˆ†ç»„å¹¶ä¸å­˜åœ¨ï¼Œ`apiVersion`å­—æ®µä¹Ÿæ²¡æœ‰å¼•å…¥APIçš„JSON Schemaã€‚
å› æ­¤ï¼Œç›¸æ¯”äºç°åœ¨Kubernetesä½¿ç”¨å®Œæ•´çš„GVKä¿¡æ¯æ˜ å°„åˆ°å…·ä½“çš„Goç±»å‹ï¼Œ å½“æ—¶`knownTypes`çš„æ˜ å°„å…³ç³»ååˆ†æœ´ç´ ï¼š`kind`ç›´æ¥åˆ°Goç±»å‹ã€‚

:::

## å°ç»“
:::tip å°ç»“
è‡³æ­¤ï¼Œä»kindä¸`runtime.Object`çš„å…³ç³»ï¼Œä»åºåˆ—åŒ–å™¨ä¸`runtime.Scheme`å…³ç³»ï¼Œä»`runtime.Scheme`ä¸`runtime.Object`çš„å…³ç³»ï¼Œ
æˆ‘ä»¬çš„è®ºè¿°å½¢æˆäº†é€»è¾‘é—­ç¯â€”â€”æˆ‘ä»¬ä»æºç çš„è§’åº¦é˜è¿°äº†"åœ¨Kubernetesä¸­ï¼Œä»»ä½•éœ€è¦åºåˆ—åŒ–/ååºåˆ—åŒ–çš„Goç±»å‹ç»Ÿç§°ä¸º*kind*"ã€‚
:::


[^1]: æœ¬æ–‡ä¸­æ‰€å‡ºç°çš„`runtime`æŒ‡`apimachinery`åº“ä¸‹`runtime`åŒ…ã€‚
[^2]: æœ¬æ–‡ä¸­æ‰€å‡ºç°çš„`metav1`æŒ‡`apimachinery`åº“`meta`åŒ…çš„`v1`å­åŒ…ã€‚

[^3]: åœ¨åç»­[åºåˆ—åŒ–å™¨ä¸åºåˆ—åŒ–å™¨å·¥å‚](./serializer)å°èŠ‚æˆ‘ä»¬è¿˜ä¼šå¯¹`apimachinery`ä¸­çš„åºåˆ—åŒ–å™¨åšè¿›ä¸€æ­¥ä»‹ç»ã€‚
[^4]: è¿™é‡Œçš„*åºåˆ—åŒ–å™¨*å¹¶ä¸æŒ‡ä»£`apimachinery`åº“ä¸­**æŸä¸€ä¸ªå…·ä½“**çš„ç±»å‹ï¼Œåœ¨`apimachinery`åº“ä¸­æœ‰å¤šç§è¡Œä¸ºå¤æ‚çš„åºåˆ—åŒ–å™¨ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ç”¨*åºåˆ—åŒ–å™¨*æŒ‡ä»£`apimachinery`åº“ä¸­å„ç§åºåˆ—åŒ–å™¨çš„ä¸€èˆ¬è¡Œä¸ºã€‚
[^5]: æ³¨æ„ä¸å‰æ–‡æåˆ°çš„schem**<u>a</u>**åŒ…åŒºåˆ†ï¼Œæ­¤å¤„ä¸ºruntimeåŒ…ä¸‹çš„Schem**<u>e</u>**ç±»å‹ã€‚
[^6]: åœ¨ä¸ä½œå¦å¤–è¯´æ˜çš„æƒ…å†µä¸‹ï¼Œæœ¬ä¹¦æ‰€å‡ºç°çš„`scheme`è¡¨ç¤º`runtime.Scheme`ç±»å‹çš„å®ä¾‹ã€‚

[^7]: `runtime.Scheme`ä¸­ï¼Œä¸ä»…ä»…å­˜åœ¨`gvkToType`è¿™ä¸€å¼ æ˜ å°„è¡¨ï¼ŒåŒæ—¶ï¼Œæ–¹æ³•`AddKnownTypeWithName`ä¹Ÿä¸ä»…ä»…å‘ä¸€å¼ æ˜ å°„è¡¨ä¸­æ’å…¥æ•°æ®ã€‚
      æˆ‘ä»¬åœ¨è¿™å°½é‡æŠ¹å»å®ç°ä¸Šçš„ä¸€äº›ç»†èŠ‚ï¼Œä¾§é‡äºè¯´æ˜`runtime.Scheme`çš„ä¸€ä¸ªé‡è¦ä½œç”¨â€”â€”æ³¨å†Œã€‚
[^8]: å½¼æ—¶*èµ„æº*çš„æ¦‚å¿µç”šè‡³è¿˜æ²¡æœ‰æ­£å¼å½¢æˆã€‚åœ¨Kubernetesæ—©æœŸé˜¶æ®µï¼Œå®˜æ–¹å¼€å‘è€…æ›´å€¾å‘äºä½¿ç”¨æœ¯è¯­*APIå¯¹è±¡ï¼ˆAPI Objectï¼‰*æˆ–æ˜¯*APIç±»å‹ï¼ˆAPI Typeï¼‰*æ¥æŒ‡ä»£APIçš„JSON Schemaã€‚*APIå¯¹è±¡ï¼ˆAPI Objectï¼‰*é¦–æ¬¡å‡ºç°åœ¨[<GithubSVG /> Pull Request #529](https://github.com/kubernetes/kubernetes/pull/529)
