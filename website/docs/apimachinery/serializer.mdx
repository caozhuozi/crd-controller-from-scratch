---
sidebar_position: 4
---

import SerializerBasicSVG from '@site/static/img/serializer-basic.svg';
import SerializerAdvanceSVG from '@site/static/img/serializer-advance.svg';


# åºåˆ—åŒ–å™¨ä¸åºåˆ—åŒ–å™¨å·¥å‚

åœ¨æœ¬èŠ‚ä¸­æˆ‘ä»¬å°†æ·±å…¥ä»‹ç»ä¸€ä¸‹`apimachinery`åº“ä¸­çš„åºåˆ—åŒ–å™¨å’Œåºåˆ—åŒ–å·¥å‚ã€‚

:::note
å¯¹äº`apimachinery`åº“ä¸­åºåˆ—åŒ–å™¨çš„ç¼–/è§£ç æµç¨‹ï¼Œæˆ‘ä»¬ä¸ä¼šç…§æ¬å¤§æ®µæºç å¹¶åšè¡Œçº§åˆ«çš„è§£é‡Šã€‚å®ƒçš„å®ç°ä¸ºäº†è€ƒè™‘å„ç§æƒ…å†µè¿œæ¯”æˆ‘ä»¬æƒ³è±¡çš„è¦å¤æ‚ã€‚
æœ¬èŠ‚ä»‹ç»çš„åºåˆ—åŒ–å†…å®¹ä»ç„¶æ˜¯ä¸ºäº†æœåŠ¡äºæœ¬ä¹¦çš„ç›®æ ‡â€”â€”èƒ½å¤Ÿç†è§£æœ€åå®ç°çš„ç²¾ç®€è‡ªå®šä¹‰æ§åˆ¶å™¨ä»£ç ã€‚
:::


## JSONåºåˆ—åŒ–å™¨
åœ¨ä¹‹å‰çš„å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥äº†åºåˆ—åŒ–å™¨çš„æ¦‚å¿µï¼Œå¹¶ä¸”çŸ¥é“`apimachinery`åº“ä¸­çš„åºåˆ—åŒ–å™¨éœ€è¦ä¾èµ–`scheme`æ‰èƒ½å·¥ä½œã€‚
æ¥ä¸‹æ¥æˆ‘ä»¬ä»æºç çš„è§’åº¦å…ˆä»‹ç»`apimachinery`åº“ä¸­**æœ€ä¸ºåŸºç¡€**çš„åºåˆ—åŒ–ç»„ä»¶JSONåºåˆ—åŒ–å™¨çš„è§£ç æµç¨‹ã€‚

```go title="k8s.io/apimachinery/pkg/runtime/serializer/json/json.go"
type Serializer struct {
	meta    MetaFactory
	options SerializerOptions
	creater runtime.ObjectCreater
	typer   runtime.ObjectTyper

	identifier runtime.Identifier
}
```
æˆ‘ä»¬å°†é‡ç‚¹å…³æ³¨`meta`ï¼Œ`creater`ï¼Œ`typer`è¿™ä¸‰ä¸ªç¼–è§£ç è¿‡ç¨‹ä¸­æ¶‰åŠåˆ°çš„æ ¸å¿ƒæˆå‘˜ç±»ã€‚
ä½ å¯èƒ½å‘ç°å¹¶æ²¡æœ‰ä¸`runtime.Scheme`ç±»ç›¸å…³çš„æˆå‘˜ç±»ï¼Œé‚£ä¹ˆè¿™ä¸ªåŸºç¡€çš„JSONåºåˆ—åŒ–ç»„ä»¶éš¾é“ä¸éœ€è¦`scheme`å°±å¯ä»¥å·¥ä½œå—ï¼Ÿ
äº‹å®å¹¶éå¦‚æ­¤ï¼Œæ­£å¦‚å‰æ–‡æ‰€è¯´ï¼ŒJSONåºåˆ—åŒ–å™¨æ˜¯`apimachinery`åº“ä¸­æœ€ä¸ºåŸºç¡€çš„ç»„ä»¶ï¼Œ
å®˜æ–¹å¼€å‘è€…ç‰¹æ„åœ¨å®ç°ä¸Šåšäº†æ›´è¿›ä¸€æ­¥çš„æŠ½è±¡â€”â€”å®ƒå¹¶ä¸ç›´æ¥ä¾èµ–äº`runtime.Scheme`å¯¹è±¡ï¼Œè€Œæ˜¯ä»»ä½•ä¸`runtime.Scheme`æœ‰åŒç­‰èƒ½åŠ›çš„ç±»å‹éƒ½å¯ä»¥ã€‚ 
å…·ä½“æ¥è¯´ï¼Œåªè¦å®ç°äº†`runtime.ObjectCreater`å’Œ`runtime.ObjectTyper`ä¸¤ä¸ªæ¥å£çš„ç±»å‹éƒ½å¯ä»¥ï¼Œå…¶ä¸­ï¼š
* `runtime.ObjectTyper`æ‰€è¦è¡¨è¿°çš„èƒ½åŠ›æ˜¯ï¼šç»™å®šä¸€ä¸ª`runtime.Object`å¯¹è±¡ï¼Œåˆ¤å®šæ­¤å¯¹è±¡æ˜¯å¦è¢«*è®¤å¯ï¼ˆrecognizeï¼‰*[^1]ï¼›
* `runtime.ObjectCreater`æ‰€è¦è¡¨è¿°çš„èƒ½åŠ›æ˜¯ï¼šç»™å®šä¸€ä¸ª*GVK*ä¸‰å…ƒç»„ä¿¡æ¯ï¼Œèƒ½å¤Ÿåˆ›å»ºæ­¤*GVK*å¯¹åº”Goç±»å‹çš„å®ä¾‹ï¼›

è€Œ`runtime.Scheme`çš„ç¡®å®ç°äº†`runtime.ObjectCreater`å’Œ`runtime.ObjectTyper`æ¥å£ã€‚
å¹¶ä¸”ï¼Œ`apimachinery`åº“ä¸­åœ¨åˆå§‹åŒ–`Serializer`å¯¹è±¡çš„æˆå‘˜å˜é‡`creater`å’Œ`typer`æ—¶ä½¿ç”¨çš„ç¡®å®æ˜¯ä¸€ä¸ª`scheme`å¯¹è±¡ã€‚

`meta`çš„ä½œç”¨æ˜¯ä»åŸå§‹JSONå­—èŠ‚åºåˆ—ï¼ˆ`bytes[]`ï¼‰ä¸­**å¼ºè¡Œ**æ¨ç†ï¼ˆinterpretï¼‰å‡ºæ­¤å­—èŠ‚åºåˆ—åŒ…å«çš„`GVK`ä¿¡æ¯ã€‚å…·ä½“å®ç°ä¸Šä¹Ÿååˆ†ç®€å•æ¸…æ™°ï¼š
```go title="k8s.io/apimachinery/pkg/runtime/serializer/json/meta.go"
func (SimpleMetaFactory) Interpret(data []byte) (*schema.GroupVersionKind, error) {
	findKind := struct {
		// +optional
		APIVersion string `json:"apiVersion,omitempty"`
		// +optional
		Kind string `json:"kind,omitempty"`
	}{}
	if err := json.Unmarshal(data, &findKind); err != nil {
		return nil, fmt.Errorf("couldn't get version/kind; json parse error: %v", err)
	}
	gv, err := schema.ParseGroupVersion(findKind.APIVersion)
	if err != nil {
		return nil, err
	}
	return &schema.GroupVersionKind{Group: gv.Group, Version: gv.Version, Kind: findKind.Kind}, nil
}
```
åœ¨å‡½æ•°ä¸­é¢„å…ˆå£°æ˜äº†ä¸€ä¸ªä»…åŒ…å«`APIVersion`ä»¥åŠ`Kind`çš„ç©ºç»“æ„ä½“ï¼Œå°è¯•å…ˆå°†å­—èŠ‚åºåˆ—è§£ç ä¸ºæ­¤ç»“æ„æ¥è·å–æ­¤å­—èŠ‚åºåˆ—çš„åŸå§‹`gvk`çš„ä¿¡æ¯ã€‚
```go
findKind := struct {
    // +optional
    APIVersion string `json:"apiVersion,omitempty"`
    // +optional
    Kind string `json:"kind,omitempty"`
}{}
```

åœ¨æ­£å¼ä»‹ç»JSONåºåˆ—åŒ–å™¨çš„è§£ç æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹`apimachinery`åº“ä¸­çº¦å®šçš„è§£ç å™¨æ‰€éœ€è¦å®ç°çš„æ¥å£ï¼š
```go
type Decoder interface {
	Decode(data []byte, defaults *schema.GroupVersionKind, into Object) (Object, *schema.GroupVersionKind, error)
}
```
é€šå¸¸ï¼Œå¯¹äºä¸€ä¸ªè§£ç å‡½æ•°ï¼Œå®ƒçš„ç­¾ååº”è¯¥ç±»ä¼¼äº`Decode(data []byte) (Object, error)`ï¼Œå®ƒçš„ä½œç”¨é¡¾åæ€ä¹‰å°±æ˜¯æŠŠä¸€æ®µå­—èŠ‚åºåˆ—è½¬åŒ–ä¸ºä¸€ä¸ªGoå¯¹è±¡ã€‚

è€Œåœ¨`apimachinery`åº“ä¸­çº¦å®šçš„`Decode()`æ–¹æ³•ä¸­ï¼Œé™¤äº†åŸå§‹å­—èŠ‚åºåˆ—æ•°æ®`data`è¿™ä¸ªå‚æ•°ä»¥å¤–ï¼Œè¿˜éœ€è¦`defaults`ä»¥åŠ`into`ä¸¤ä¸ªå‚æ•°ã€‚è§£ç æ–¹æ³•è¿™æ ·è®¾è®¡çš„åŸå› æ˜¯æä¾›äº†æ›´å¤šçš„çµæ´»æ€§ã€‚
å®˜æ–¹å¼€å‘è€…å¸Œæœ›è§£ç å™¨èƒ½å¤Ÿï¼š
1. é€šè¿‡åŸå§‹å­—èŠ‚åºåˆ—ï¼ˆ`data`ï¼‰åŒ…å«çš„gvkä¿¡æ¯ä»¥åŠè°ƒç”¨è€…æä¾›çš„GVKä¿¡æ¯ï¼ˆ`defaults`ï¼‰å…±åŒæ¨æ–­å‡ºä¸€ä¸ªå¯èƒ½çš„gvk[^2]ï¼›
2. å¦‚æœè°ƒç”¨è€…å·²ç»é¢„å…ˆæä¾›äº†è§£ç åçš„ç›®æ ‡å¯¹è±¡ï¼ˆ`into`ï¼‰ï¼Œè§£ç å™¨åº”è¯¥å°½é‡ä½¿ç”¨è°ƒç”¨è€…æä¾›çš„è€Œé¿å…åœ¨å†…å­˜ä¸­å†åˆ†é…ä¸€ä¸ªæ–°å¯¹è±¡[^3]ã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬ç”¨å›¾ç¤ºçš„æ–¹å¼ç»™å‡ºJSONåºåˆ—åŒ–å™¨çš„è§£ç æµç¨‹ã€‚

<SerializerBasicSVG style={{"width": "95%"}}/>

<SerializerAdvanceSVG style={{"width": "100%"}}/>

ç›¸æ¯”äºè§£ç æµç¨‹ï¼Œç¼–ç æµç¨‹ç›¸å½“ç®€å•ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä¸å†åšèµ˜è¿°ã€‚


## åºåˆ—åŒ–å™¨å·¥å‚CodecFactory

åœ¨`apimachinery`åº“ä¸­ï¼Œä¸Šè¿°çš„JSONåºåˆ—åŒ–å™¨å…¶å®æ˜¯ä¸€ä¸ªåŸºç¡€ç»„ä»¶ï¼Œé€šå¸¸åœ¨Kubernetesä¸­æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯æ›´ä¸Šå±‚çš„åºåˆ—åŒ–å™¨å°è£…`CodecFactory`ï¼š
```go
type CodecFactory struct {
	scheme    *runtime.Scheme
	universal runtime.Decoder
	accepts   []runtime.SerializerInfo

	legacySerializer runtime.Serializer
}
```

`CodecFactory`å®ç°äº†`NegotiatedSerializer`[^4]è¿™ä¸ªæ ¸å¿ƒæ¥å£:
```go title="k8s.io/apimachinery/pkg/runtime/interfaces.go"
type NegotiatedSerializer interface {
	SupportedMediaTypes() []SerializerInfo

	EncoderForVersion(serializer Encoder, gv GroupVersioner) Encoder
	DecoderToVersion(serializer Decoder, gv GroupVersioner) Decoder
}
```
1. `SupportedMediaTypes()`è¡¨ç¤ºå®ç°ç±»éœ€è¦åŒæ—¶æ”¯æŒå¤šç§æ•°æ®æ ¼å¼ï¼ˆä¾‹å¦‚JSONï¼ŒYAMLï¼Œprotobufï¼‰çš„ç¼–è§£ç ï¼Œæ¢å¥è¯è¯´ï¼Œå®ç°ç±»éœ€è¦é›†æˆå¤šç§æ•°æ®æ ¼å¼çš„åºåˆ—åŒ–å™¨ã€‚
2. `EncoderForVersion()`ä»¥åŠ`DecoderToVersion()`è¡¨ç¤ºå®ç°æ­¤æ¥å£çš„å·¥å‚ç±»éœ€è¦æä¾›**å¯ä»¥å°†èµ„æºç¼–/è§£ç æˆæŸä¸ªæŒ‡å®šç‰ˆæœ¬**çš„ç¼–è§£ç å™¨â€”â€”å°†èµ„æºåœ¨è§£ç **å**æˆ–è€…ç¼–ç **å‰***è½¬æ¢ï¼ˆconvertï¼‰*æˆæŒ‡å®šç‰ˆæœ¬ï¼ˆversionï¼‰ï¼Œä¾‹å¦‚å°†æŸèµ„æºçš„`v1beta1`ç‰ˆæœ¬è½¬æ¢ä¸º`v1`ç‰ˆæœ¬[^3]ã€‚
    éœ€è¦æ³¨æ„çš„æ˜¯å®ç°ç±»`CodecFactory`åŒæ—¶ä¹Ÿæä¾›äº†`WithoutConversion()`æ–¹æ³•ä»¥è·å–ä¸å¸¦èµ„æºç‰ˆæœ¬è½¬åŒ–åŠŸèƒ½çš„ç¼–è§£ç å™¨ã€‚[ğŸˆ](../intro#çº¦å®š)

æˆ‘ä»¬å†ç¨å¾®ä»‹ç»`CodecFactory`ç±»ä¸­çš„ä¸€äº›é‡è¦æˆå‘˜:
* `scheme`æˆå‘˜â€”â€”åºåˆ—åŒ–å™¨åœ¨ç¼–è§£ç å‰éœ€è¦æ£€æŸ¥`scheme`ä¸­æ³¨å†Œçš„ç±»å‹ã€‚
* `accepts`åˆ‡ç‰‡åŒ…å«å¤šç§æ•°æ®æ ¼å¼çš„åºåˆ—åŒ–å™¨ï¼Œä¸Šè¿°çš„JSONåºåˆ—åŒ–å™¨åªæ˜¯å…¶ä¸­çš„ä¸€ç§ã€‚
* `universal`æˆå‘˜çš„ä½œç”¨æ˜¯æä¾›äº†ä¸€ä¸ª**é€šç”¨**å¿«æ·çš„**è§£ç **å™¨ï¼Œå®ƒèƒ½å¤Ÿè¯†åˆ«å­—èŠ‚åºåˆ—çš„æ•°æ®æ ¼å¼ï¼ˆä¾‹å¦‚åˆ¤å®šæ•°æ®æ˜¯å±äºJSONè¿˜æ˜¯YAMLï¼‰å†æ‰¾åˆ°å¯¹åº”çš„åºåˆ—åŒ–å™¨è¿›è¡Œè§£ç ã€‚



## ParameterCodec
ä¸Šè¿°çš„`CodecFactory`ä¸»è¦ç”¨äºHTTP**è¯·æ±‚/è¿”å›ä½“**ä»¥åŠ**å†™å…¥/è¯»å–**etcdçš„ç¼–è§£/ç ã€‚åœ¨Kubernetesä¸­ï¼Œè¿˜éœ€è¦ä¸€ç§ç‰¹æ®Šçš„"ç¼–è§£ç å™¨"[^5]ï¼Œå®ƒçš„ä½œç”¨æ˜¯è´Ÿè´£HTTP URLå‚æ•°ï¼ˆQuery Parametersï¼‰ä¸Goå¯¹è±¡ä¹‹é—´çš„è½¬æ¢ã€‚
ä¾‹å¦‚ï¼ŒGoå¯¹è±¡`metav1.ListOptions{Limit: 1, LabelSelector: "app=foo"}`[^6]å°†ä¼šè§£ç æˆURLå‚æ•°`limit=1&app%3D=foo`ã€‚
å¦å¤–ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ`ParameterCodec`ç¼–è§£ç å™¨ä»ç„¶ä¾èµ–äº`Scheme`æ³¨å†Œæœºåˆ¶å·¥ä½œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ`ListOptions`ç±»å‹ä¹ŸåŒæ ·éœ€è¦äº‹å…ˆæ³¨å†Œè¿›`scheme`ä¸­ã€‚

## å°ç»“
:::tip
æœ¬èŠ‚ä»‹ç»çš„`apimachinery`åº“ä¸­`CodecFactory`ä»¥åŠ`ParameterCodec`ä¸¤ä¸ªç±»å‹åœ¨æˆ‘ä»¬å®ç°è‡ªå®šä¹‰æ§åˆ¶å™¨çš„å®¢æˆ·ç«¯æœ‰ç€é‡è¦åº”ç”¨ã€‚
:::


[^1]: *è®¤å¯ï¼ˆrecoginizeï¼‰*åœ¨è¿™é‡Œæ˜¯ä¸€ç§å¯¹åº”æ¥å£å±‚çº§çš„æŠ½è±¡è¡¨è¿°ã€‚åªæœ‰è¢«*è®¤å¯*çš„å¯¹è±¡æ‰è‚¯ä»¥è¢«åºåˆ—åŒ–ã€‚`Scheme`çš„*æ³¨å†Œ*å³æ˜¯ä¸€ä¸ªå…·ä½“å®ç°*è®¤å¯*çš„æœºåˆ¶ã€‚
[^2]: è¿™æ ·è®¾è®¡çš„ä¸€ä¸ªå¥½å¤„æ˜¯å¯¹äºåŸå§‹æ•°æ®æœªåŒ…å«gvkä¿¡æ¯çš„æƒ…å†µï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨è€…æä¾›çš„gvkä¿¡æ¯ï¼ˆ`defaults`ï¼‰ç”šè‡³æ˜¯`into`çš„gvkä¿¡æ¯å…œåº•ã€‚
      å½“ç„¶ï¼Œè¿™ç§çµæ´»æ€§ä¹Ÿå¸¦æ¥äº†å®ç°ä¸Šçš„ä¸æ–¹ä¾¿ã€‚å°¤å…¶æ˜¯åŸå§‹æ•°æ®åŒ…å«çš„å®é™…gvkä¿¡æ¯å’Œè°ƒç”¨è€…æä¾›çš„gvkä¿¡æ¯ä»¥åŠ`into`çš„gvkä¸ä¸€è‡´çš„æƒ…å†µã€‚
      å› æ­¤åœ¨ç¼–ç å™¨æ¥å£çš„å®ç°ä¸­ï¼ˆä¾‹å¦‚JSONåºåˆ—åŒ–å™¨ï¼‰ï¼Œæœ‰ç›¸å½“ä¸€éƒ¨åˆ†é€»è¾‘åœ¨å¤„ç†è¿™ç§æƒ…å½¢ã€‚
[^3]: èµ„æºä¸åŒç‰ˆæœ¬çš„è½¬åŒ–æ˜¯Kubernetes**æœåŠ¡ç«¯**å¤„ç†èµ„æºè¯·æ±‚çš„é‡è¦éƒ¨åˆ†ï¼Œé€šè¿‡å°†èµ„æºè½¬åŒ–æˆä¸€ä¸ªå†…éƒ¨ç‰ˆæœ¬(internal/hub version)ä»¥ä¾¿å¯¹ä¸åŒç‰ˆæœ¬çš„èµ„æº**ç»Ÿä¸€è¿›è¡Œç›¸å…³é€»è¾‘çš„å¤„ç†**ã€‚
      æˆ‘ä»¬åœ¨è¿™é‡Œä»…ç»™å‡ºä¸€ä¸ªKubernetesæœåŠ¡ç«¯èµ„æºç‰ˆæœ¬è½¬æ¢å‘ç”Ÿçš„ä¸€èˆ¬æµç¨‹ï¼ˆæ”¹ç¼–è‡ªç¤¾åŒºæ–‡æ¡£[API Changes](https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api_changes.md#operational-overview)ï¼‰ï¼š
        1. A user POSTs a Pod object to /api/v7beta1/...
        2. The JSON is unmarshalled into a v7beta1.Pod structure
        3. Default values are applied to the v7beta1.Pod
        4. The v7beta1.Pod is converted to an hub.Pod internal version
        5. The hub.Pod is validated, and any errors are returned to the user
        6. The hub.Pod is converted to a v6.Pod (because v6 is the latest stable version)
        7. The v6.Pod is marshalled into JSON and written to etcd

      ç›¸å…³å†…å®¹ä¸åœ¨æœ¬ä¹¦è®¨è®ºèŒƒå›´ä¹‹å†…ï¼Œè¯·å‚è€ƒå‚è€ƒ[Kubernetes APIè¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸ](../intro#æ‰©å±•é˜…è¯»)ï¼Œä»¥åŠkubebuiderå¯¹äº[hub version](https://book.kubebuilder.io/multiversion-tutorial/conversion-concepts.html)æ¦‚å¿µçš„ä»‹ç»
      `apimachinery`åº“ä¸­å®ç°äº†ä¸€ä¸ªå¸¦æœ‰èµ„æºç‰ˆæœ¬è½¬æ¢åŠŸèƒ½çš„ç¼–è§£ç å™¨`codec`(`k8s.io/apimachinery/pkg/runtime/serializer/versioning`)ï¼Œå¯¹äºç¼–/è§£ç åŠŸèƒ½ï¼Œå®ƒä»ç„¶åŸºäºçš„æ˜¯åŸºç¡€åºåˆ—åŒ–å™¨ã€‚
      ç”±äºæ‰€æœ‰èµ„æºç±»å‹çš„Kubernets API URLä¸­éƒ½æœ‰åˆ†ç»„å’Œç‰ˆæœ¬ä¿¡æ¯ï¼Œclientç«¯å‘é€çš„è¯·æ±‚å’Œæ¥å—åˆ°çš„è¿”å›ä¸­çš„èµ„æºåˆ†ç»„åŠç‰ˆæœ¬éƒ½æ˜¯ç¡®å®šçš„ï¼Œå› æ­¤åœ¨clientç«¯çš„åºåˆ—åŒ–å™¨æ²¡æœ‰ç‰ˆæœ¬è½¬æ¢çš„éœ€æ±‚ã€‚

[^4]: å®˜æ–¹å¼€å‘è€…ç”¨*Negotiated(åå•†)*å‘½åæ­¤æ ¸å¿ƒæ¥å£æ˜¯å› ä¸ºè¿™ä¸ªåºåˆ—åŒ–å™¨é€šå¸¸åœ¨è¢«ç”¨äºServerç«¯æ—¶å¯ä»¥æ‰§è¡Œ*[HTTPå†…å®¹åå•†ï¼ˆHTTP Content negotiationï¼‰](https://developer.mozilla.org/en-US/docs/Web/HTTP/Content_negotiation)*ã€‚
      *HTTPå†…å®¹åå•†*æ˜¯æŒ‡åœ¨è¿”å›èµ„æºè¯·æ±‚æ—¶å¦‚ä½•é€‰æ‹©ç‰¹å®šçš„æ•°æ®è¡¨ç¤ºå½¢å¼ï¼ˆå°¤å…¶æ˜¯å®¢æˆ·ç«¯åœ¨è¯·æ±‚èµ„æºæ—¶æ²¡æœ‰é€šè¿‡HTTPçš„`Accept`å¤´æ˜ç¡®æŒ‡å®šæ¥å—æ ¼å¼æ—¶ï¼‰ã€‚è¿™ä½¿å¾—ä¸Šå±‚å°è£…çš„åºåˆ—åŒ–å™¨éœ€è¦æ”¯æŒ/é›†æˆå¤šç§æ•°æ®ç±»å‹çš„ç¼–/è§£ç å™¨ã€‚
      
      é™¤æ­¤ä»¥å¤–ï¼Œåœ¨kubernetes Serverç«¯ç»„ä»¶ï¼Œä¾‹å¦‚`apiserver`ä¸­ï¼Œéœ€è¦å°†å¯¹èµ„æºçš„ä¸åŒç‰ˆæœ¬çš„è¯·æ±‚é€šé€šè½¬æ¢ä¸ºä¸€ä¸ªå†…éƒ¨ç‰ˆæœ¬ï¼ˆ`APIInternalVersion`æˆ–è€…ä¹Ÿè¢«ç§°ä½œ`HubVersion`ï¼‰ä»¥ä¾¿å¯¹ä¸åŒç‰ˆæœ¬çš„èµ„æº**ç»Ÿä¸€è¿›è¡Œç›¸å…³é€»è¾‘çš„å¤„ç†**ã€‚è¿™ç§èµ„æºç‰ˆæœ¬åœ¨serverç«¯çš„è½¬åŒ–ä¹Ÿå¯ä»¥ç†è§£æˆä¸€ç§server**å†…éƒ¨**å¯¹èµ„æºç‰ˆæœ¬çš„åå•†ã€‚[ğŸŒ§ï¸](../intro#çº¦å®š)
      æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°å®˜æ–¹å¼€å‘è€…å¯¹`negotiatedSerializerWrapper`çš„è¿™æ ·ä¸€æ®µæ³¨é‡Šï¼š
      > TODO: We should split negotiated serializers that we can change versions on from those we can change
      > serialization formats on
      
      æ„æ€æ˜¯è¯´"æˆ‘ä»¬åº”è¯¥å°†å¯ä»¥åå•†ï¼ˆèµ„æºï¼‰ç‰ˆæœ¬çš„åºåˆ—åŒ–å™¨ä¸å¯ä»¥åå•†åºåˆ—åŒ–æ ¼å¼çš„åºåˆ—åŒ–å™¨åˆ†å¼€"ã€‚åœ¨å®˜æ–¹å¼€å‘è€…çœ‹æ¥ï¼Œèµ„æºç‰ˆæœ¬çš„å†…éƒ¨è½¬æ¢ä¹Ÿå¯ä»¥ç§°ä¹‹ä¸º*åå•†*ã€‚[ğŸŒ§ï¸](../intro#çº¦å®š)
      
      å› æ­¤ï¼Œ`NegotiatedSerializer`ä¸­æ‰€è°“çš„*åå•†*å¯è§†ä¸ºä¸¤ä¸ªå±‚æ¬¡: i) æ•°æ®æ ¼å¼ ii)  èµ„æºç‰ˆæœ¬è½¬æ¢
[^5]: é€šå¸¸æˆ‘ä»¬æ‰€è¯´çš„*åºåˆ—åŒ–å™¨*æˆ–è€…*ç¼–è§£ç å™¨*æ˜¯æŒ‡å­—èŠ‚åºåˆ—ä¸Goå¯¹è±¡ä¹‹é—´çš„è½¬åŒ–ï¼Œæ­¤å¤„çš„"ç¼–è§£ç å™¨"å¹¶ä¸èƒ½å½’ä¸ºæ­¤ç±»ï¼Œå®ƒçš„ä½œç”¨æ˜¯HTTP URLå‚æ•°ï¼ˆQuery Parametersï¼‰ä¸Goå¯¹è±¡ä¹‹é—´çš„è½¬æ¢ã€‚
[^6]: æ³¨æ„æ­¤å¤„çš„`ListOptions`ä¸æˆ‘ä»¬åœ¨ä¹‹å‰[å†è¯†kind](./gvk#å†è¯†kind)å°èŠ‚ä¸­æåŠçš„`DeleteOptions`è”ç³»äºåŒºåˆ«ï¼š`DeleteOptions`ä¸`ListOptions`åŒå±äºkindç¬¬ä¸‰ç§ç±»ï¼Œä½†æ˜¯`DeleteOptions`å¯¹åº”çš„æ˜¯HTTPè¯·æ±‚**ä½“**è€Œä¸æ˜¯HTTP URLå‚æ•°ã€‚

      

