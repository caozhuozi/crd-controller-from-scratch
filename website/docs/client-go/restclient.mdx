---
sidebar_position: 1
---

import ClientConfigSVG from '@site/static/img/client-config.svg';
import ConfigInsidePNG from '@site/static/img/config-inside.png';
import ConfigOutSidePNG from '@site/static/img/config-outside.png';
import RequestPNG from '@site/static/img/request.png';
import ClientRelationPNG from '@site/static/img/client-relation.png';
import ClientChainPNG from '@site/static/img/client-chain.png';



# RESTClient

æœ¬èŠ‚çš„åŠ¨æœºä¸æˆ‘ä»¬åœ¨[client-goä¸apimachinery](../apimachinery/client-go-and-apimachinery)ä¸€æ ·ï¼Œ
`client-go`ä¸­å°è£…åŸå®Œå¤‡èµ„æºå®¢æˆ·ç«¯`clientset`ä»…é’ˆå¯¹åŸç”Ÿçš„Kubernetesèµ„æºç±»å‹ã€‚
æˆ‘ä»¬éœ€è¦æ¢ç©¶`client-go`èƒŒåä¸`kube-apiserver`é€šä¿¡çš„ç»†èŠ‚ï¼Œè¿™æ ·æˆ‘ä»¬æ‰èƒ½"ç…§çŒ«ç”»è™"â€”â€”å®ç°ä¸€ä¸ªé’ˆå¯¹*è‡ªå®šä¹‰èµ„æº*çš„å®¢æˆ·ç«¯ã€‚
`client-go`ä¸­çš„`RESTClient`å°±æ˜¯èƒŒåç»†èŠ‚çš„ä¸€éƒ¨åˆ†ã€‚

:::tip æ³¨
å½“ç„¶ï¼Œæ­£å¦‚æˆ‘ä»¬åœ¨[GVK](../apimachinery/gvk)å°èŠ‚å°±å·²ç»æåŠè¿‡çš„ä¸€æ ·ï¼Œç†è®ºä¸Šï¼Œåªè¦æˆ‘ä»¬æœ‰ä¸`kube-apiserver`è¿›è¡ŒTLSåŠ å¯†é€šä¿¡çš„è¯ä¹¦å’Œå¯†é’¥ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥ä¸å€ŸåŠ©`client-go`è€Œä½¿ç”¨å…¶ä»–ä»»ä½•è¯­è¨€ä¸`kube-apiserver`äº¤äº’ã€‚
ä¸è¿‡ï¼Œè¿™äº›å†…å®¹ä¸åœ¨æœ¬ä¹¦çš„è®¨è®ºèŒƒå›´ä¹‹å†…ã€‚æœ¬ä¹¦çš„ä¸»æ—¨æ˜¯å¸®åŠ©è¯»è€…ç†è§£kubebuilderç­‰æ§åˆ¶å™¨æ¡†æ¶èƒŒåçš„æœºåˆ¶ã€‚æ­£å› ä¸ºè¿™äº›æ¡†æ¶æœ¬èº«åŸºäº`client-go`å’Œ`apimachinery`åº“æ„å»ºï¼Œ
æ¢ç©¶è¿™ä¸¤ä¸ªåº“èƒŒåçš„ç»†èŠ‚ä¹Ÿæˆä¸ºæˆ‘ä»¬å¿…é¡»è¦ç»å†çš„è¿‡ç¨‹ã€‚
:::


## Clientsetä¸RESTClient

åœ¨[å‰è¨€](../intro)ä¸­ï¼Œæˆ‘ä»¬è¦æ±‚é˜…è¯»æœ¬ä¹¦éœ€è¦æŒæ¡çš„é¢„å¤‡çŸ¥è¯†åŒ…æ‹¬ä¼šä½¿ç”¨`client-go`ä¸­çš„`Clientset`ã€‚`Clientset`é¡¾åæ€ä¹‰æ˜¯Kubernetesæ‰€æœ‰**å†…ç½®**èµ„æºç±»å‹çš„å®¢æˆ·ç«¯çš„**é›†åˆ**ï¼Œæ­£å¦‚å®ƒçš„å®šä¹‰ä¸€æ ·ï¼š
```go title="k8s.io/client-go/kubernetes/clientset.go"
type Clientset struct {
	appsV1                       *appsv1.AppsV1Client
	appsV1beta1                  *appsv1beta1.AppsV1beta1Client
	appsV1beta2                  *appsv1beta2.AppsV1beta2Client
	// ...
```
æˆ‘ä»¬å¯ä»¥çœ‹åˆ°`Clientset`åŒ…å«äº†æ‰€æœ‰å†…ç½®APIåˆ†ç»„ï¼ˆåŠç‰ˆæœ¬ï¼‰[^1]çš„å®¢æˆ·ç«¯ã€‚
è¯·æ³¨æ„ï¼Œæ ¹æ®å…¶ä¸­æ¯ä¸ªå®¢æˆ·ç«¯çš„å‘½åï¼Œ**æ¯ä¸ªå®¢æˆ·ç«¯å…¶å®çš„å¯¹åº”çš„æ˜¯ä¸€ä¸ªAPIç»„ï¼Œè€Œå¹¶ä¸æ˜¯å…·ä½“åˆ°æŸä¸€ç§èµ„æºç±»å‹**ã€‚

æˆ‘ä»¬å†ç¨å¾®æ·±å…¥æ¢ç©¶ä¸€ä¸‹æ¯ä¸ª*APIç»„å®¢æˆ·ç«¯*çš„ç±»å‹ï¼Œä¾‹å¦‚`appsv1.AppsV1Client`ï¼š
```go title="k8s.io/client-go/kubernetes/typed/apps/v1/apps_client.go"
type AppsV1Client struct {
	restClient rest.Interface
}
```
å…¶ä¸­`rest.Interface`[^2]æ˜¯ä¸€ä¸ªè¡¨è¾¾HTTP RESTFulåŠ¨è¯çš„é€šç”¨æ¥å£ï¼Œæ­£å¦‚å®ƒçš„å®šä¹‰ä¸€æ ·ï¼š
```go title="k8s.io/client-go/rest/client.go"
type Interface interface {
	GetRateLimiter() flowcontrol.RateLimiter
	Verb(verb string) *Request
	// highlight-next-line
	Post() *Request
	// highlight-next-line
	Put() *Request
	// highlight-next-line
	Patch(pt types.PatchType) *Request
	// highlight-next-line
	Get() *Request
	// highlight-next-line
	Delete() *Request
	APIVersion() schema.GroupVersion
}
```
åœ¨`client-go`ä¸­ï¼Œ`RESTClient`æ˜¯`rest.Interface`æ¥å£çš„æ ‡å‡†å®ç°ã€‚
æ‰€ä»¥ï¼ŒAPIç»„å®¢æˆ·ç«¯å®é™…ä¸Šæ˜¯å¯¹`client-go`ä¸­æ›´ä¸ºåŸºç¡€çš„RESTfulå®¢æˆ·ç«¯ç»„ä»¶`RESTClient`çš„ä¸€ç§å°è£…ã€‚

åœ¨äº†è§£äº†è¿™ä¸ªäº‹å®ä¹‹åï¼Œæˆ‘ä»¬è‡ªç„¶è€Œç„¶åœ°çŒœæµ‹`RESTClient`ç±»å‹æœ¬èº«åˆå§‹åŒ–çš„"ç²’åº¦"å¯èƒ½å°±æ˜¯GVã€‚é‚£ä¹ˆäº‹å®æ˜¯å¦ä¹Ÿæ˜¯è¿™æ ·å‘¢ï¼Ÿ
æ ¹æ®`RESTClient`çš„åˆå§‹åŒ–å‡½æ•°çš„ç­¾åï¼š
```go title="client-go/rest/config.go"
func RESTClientFor(config *Config) (*RESTClient, error) {
    // ...
}
```

å¯ä»¥çœ‹å‡ºï¼Œ`rest.Config`ç»“æ„è¢«ç”¨äºé…ç½®åŠåˆå§‹åŒ–`RESTClient`ã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬å°†ç¨å¾®æ¢ç©¶ä¸€ä¸‹`rest.Config`ç±»å‹ã€‚
`rest.Config`åˆåµŒå…¥äº†ä¸€ä¸ªå«åš`ContentConfig`çš„ç»“æ„ï¼š
```go title="k8s.io/client-go/rest/config.go"
type Config struct {
  ContentConfig
  // ...
}
```
è€Œæ ¹æ®`ContentConfig`ç»“æ„çš„å®šä¹‰ï¼š
```go title="k8s.io/client-go/rest/config.go"
type ContentConfig struct {
  GroupVersion *schema.GroupVersion
  // ...
}
```
å…¶ä¸­`GroupVersion`æˆå‘˜è¯´æ˜äº†`ContentConfig`ç»“æ„çš„"ç²’åº¦"æ­£æ˜¯GVã€‚å› æ­¤ï¼Œ`RESTClient`ç±»å‹çš„ç²’åº¦ä¹Ÿå¯ä»¥è¢«è¯å®ä¸ºGVã€‚

ä¸‹å›¾æ€»ç»“äº†`RESTClient`çš„åˆå§‹åŒ–å‡½æ•°`RESTClientFor()`çš„"é…ç½®é“¾"çš„å…³ç³»ï¼š
<ClientConfigSVG style={{width: "100%"}}/>

:::tip
æˆ‘ä»¬ä»`clientset`çš„è§’åº¦åˆ‡å…¥ï¼Œä»‹ç»äº†`client-go`ä¸­çš„*APIç»„å®¢æˆ·ç«¯*ï¼Œ
å†ä»*APIç»„å®¢æˆ·ç«¯*å¼•å…¥`client-go`çš„"çœŸæ­£"çš„HTTPå®¢æˆ·ç«¯åŸºç¡€ç»„ä»¶`RESTClient`ï¼Œæ„åœ¨è¯´æ˜`RESTClient`åˆå§‹åŒ–"ç²’åº¦"æ˜¯*GroupVersion*ã€‚
:::

## RESTClientåŸºæœ¬ç”¨æ³•[ğŸˆ](../intro#çº¦å®š)

ä¸‹é¢æˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªæä¸ºç®€å•çš„ä¾‹å­æ¥ä»‹ç»å¦‚ä½•ä½¿ç”¨`RESTClient`ç±»å‹ç›´æ¥ä¸Kubernetes APIäº¤äº’ã€‚

```go
package main

import (

        corev1 "k8s.io/api/core/v1"
        metav1 "k8s.io/apimachinery/pkg/apis/meta/v1"
        "k8s.io/client-go/kubernetes/scheme"
        "k8s.io/client-go/rest"
        "k8s.io/client-go/tools/clientcmd"
)

func main() {

        config, _ := clientcmd.BuildConfigFromFlags("", "/root/.kube/config")

        config.APIPath = "/api"
        config.GroupVersion = &corev1.SchemeGroupVersion
        config.NegotiatedSerializer = scheme.Codecs.WithoutConversion()

        restClient, _ := rest.RESTClientFor(config)

        result := &corev1.PodList{}
        
        // list
        restClient.
                Get().
                Namespace("default").
                Resource("pods").
                Name("pod").
                VersionedParams(&metav1.ListOptions{}, scheme.ParameterCodec).
                Do().
                Into(result)
       
}
```

ç›´æ¥ä½¿ç”¨RESTClientç±»å‹ä¸Kubernetes APIäº¤äº’ä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š
1. ç¬¬ä¸€éƒ¨åˆ†ä¸»è¦æ˜¯é€šè¿‡`rest.Config`å¯¹è±¡æ¥åˆå§‹åŒ–ä¸€ä¸ª`RESTClient`å®ä¾‹ã€‚
   * `clientcmd.BuildConfigFromFlags()` [^3]ç”¨äºåˆ›å»ºå¹¶è¿”å›ä¸€ä¸ª`rest.Config`å¯¹è±¡ï¼ŒåŒæ—¶å°†`.kube/config`æ–‡ä»¶ä¸­è®°å½•çš„ä¿¡æ¯è½¬åŒ–ä¸º`Config`å¯¹è±¡ä¸­çš„`Host`å­—æ®µä»¥åŠç”¨äºä¸`kube-apiserver`TLSåŠ å¯†é€šä¿¡çš„æœ‰å…³å­—æ®µã€‚
     <img src={ConfigOutSidePNG} width="90%" />
   * è®¾ç½®Kubernetes API URL Pathçš„æ ¹è·¯å¾„, é€šå¸¸ä¸º`/apis`ï¼Œä½†æ˜¯å¯¹äº*æ ¸å¿ƒç»„*è¿™ä¸ªAPIåˆ†ç»„æ¥è¯´ï¼Œç”±äºå†å²åŸå› ï¼Œå®ƒå¯¹åº”çš„APIæ ¹è·¯å¾„åˆ™æ˜¯`/api`
   * è®¾ç½®èµ„æºçš„APIåˆ†ç»„åŠç‰ˆæœ¬ä¿¡æ¯â€”â€”æ­£å¦‚æˆ‘ä»¬ä¸ŠèŠ‚è¯å®çš„é‚£æ ·ï¼š`RESTClient`çš„é…ç½®"ç²’åº¦"æ˜¯GV
   * æŒ‡å®šç”¨äºHTTPè¯·æ±‚ä¸è¿”å›ä½“ç¼–/è§£ç çš„åºåˆ—åŒ–å™¨ï¼š
     * æ‰€ç”¨çš„åºåˆ—åŒ–å™¨å·¥å‚`scheme.Codecs`æ­£æ˜¯ä¹‹å‰[client-goä¸­çš„å…¨å±€åºåˆ—åŒ–å™¨å·¥å‚](../apimachinery/client-go-and-apimachinery#client-goä¸­çš„å…¨å±€åºåˆ—åŒ–å™¨å·¥å‚)ç« èŠ‚ä¸­æ‰€è¯´çš„å…¨å±€åºåˆ—åŒ–å·¥å‚`Codec`ã€‚
     * å¦å¤–ï¼Œä¸åŒäº`kube-apiserver`æœåŠ¡ç«¯ï¼Œå®¢æˆ·ç«¯åœ¨å¯¹èµ„æºç¼–ç å‰/è§£ç åä¸éœ€è¦å†é¢å¤–è¿›è¡Œèµ„æºç‰ˆæœ¬é—´çš„è½¬æ¢ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†`Codec`çš„`WithoutConversion()`æ–¹æ³•è·å–ä¸è¿›è¡Œèµ„æºç‰ˆæœ¬è½¬åŒ–çš„åºåˆ—åŒ–å™¨ã€‚

     :::tip æ³¨
     å¯ä»¥è¯´æˆ‘ä»¬åœ¨[åºåˆ—åŒ–å™¨ä¸åºåˆ—åŒ–å·¥å‚](../apimachinery/serializer)ä»¥åŠ[client-goä¸apimachinery](#../apimachinery/client-go-and-apimachinery)å°èŠ‚çš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯ä¸ºäº†è¿™ä¸€è¡Œä»£ç æ‰€åšçš„é“ºå«ã€‚
     :::


2. ç¬¬äºŒéƒ¨åˆ†åˆ™æ˜¯è°ƒç”¨`RESTClient`ç›¸å…³æ–¹æ³•ç”¨äºå®é™…å‘Kubernetes APIå‘èµ·è¯·æ±‚ã€‚
   å¯ä»¥çœ‹å‡ºï¼Œ`RESTClient`å‘é€è¯·æ±‚çš„ä»£ç åŸºäº*å»ºé€ è€…æ¨¡å¼ï¼ˆbuilder patternï¼‰*ï¼Œå…·ä½“çš„èµ„æºç±»å‹ï¼Œå‘½åç©ºé—´ç­‰æ˜¯åœ¨å‘Kubernetes APIå‘èµ·è¯·æ±‚æ—¶æŒ‡å®šã€‚
   ä¸€ä¸ªç¨å¾®ç‰¹æ®Šçš„æ–¹æ³•æ˜¯`VersionedParams()`ï¼Œå®ƒç”¨äºå°†`metav1.ListOptions`å¯¹è±¡"è§£ç "ä¸ºHTTP URLä¸­æŸ¥è¯¢å‚æ•°ï¼ˆquery parameterï¼‰ï¼Œå®ƒçš„ç¬¬äºŒä¸ªå‚æ•°ç”¨äºæŒ‡å®šè§£ç å™¨ï¼Œè€Œè¿™ä¸ªè§£ç å™¨æ­£æ˜¯ä¹‹å‰[client-goä¸­çš„å…¨å±€urlå‚æ•°åºåˆ—åŒ–å™¨](../apimachinery/client-go-and-apimachinery#client-goä¸­çš„å…¨å±€urlå‚æ•°åºåˆ—åŒ–å™¨)ç« èŠ‚ä¸­æåŠçš„å…¨å±€URLå‚æ•°åºåˆ—åŒ–å™¨`ParameterCodec`ã€‚
   è¿™äº›å¡«å…¥çš„ä¿¡æ¯ï¼ˆåŒ…æ‹¬æ ¹è·¯å¾„ï¼ŒGroupVersionï¼Œèµ„æºç±»å‹ï¼Œå‘½åç©ºé—´ç­‰ï¼‰æœ€ç»ˆå°†è¢«ç”¨äºç»„æˆHTTPè¯·æ±‚çš„URLï¼ˆä»¥åŠURLä¸­çš„æŸ¥è¯¢å‚æ•°ï¼‰ã€‚

### Requestç±»å‹
æˆ‘ä»¬æœ‰å¿…è¦åœ¨è¿™é‡Œç¨å¾®æåŠä¸€ä¸ªå¯èƒ½è¢«å¿½ç•¥çš„ç»†èŠ‚ã€‚
åœ¨ä¸Šè¿°çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è¯´`RESTClient`åŸºäºå»ºé€ è€…æ¨¡å¼ã€‚å…¶å®æ›´å‡†ç¡®çš„è¯´æ³•æ˜¯åŸºäºå»ºé€ è€…æ¨¡å¼çš„æ˜¯`client-go`ä¸­çš„`Request`ç±»å‹è€Œé`RESTClient`ã€‚

æˆ‘ä»¬å¯ä»¥å†å›è¿‡å¤´æ¥å…·ä½“çœ‹çœ‹`RESTClient`çš„æ¥å£`rest.Interface`ï¼Œå¯ä»¥å‘ç°`RESTClient`çš„`Post()`ï¼Œ`Get()`ï¼Œ`Delete()`ç­‰æ–¹æ³•å…¶å®è¿”å›æ˜¯`Request`ç±»å‹ï¼ˆæŒ‡é’ˆï¼‰ï¼Œè€Œä¸æ˜¯`RESTClient`ç±»å‹è‡ªèº«ã€‚
çœŸæ­£æ‰§è¡Œå‘Kubernetes APIå‘é€è¯·æ±‚åŠ¨ä½œçš„å…¶å®æ˜¯`Request`ç±»å‹ã€‚
ä¸Šè¿°ä¾‹å­ä¸­çš„`Namespace()`ï¼Œ`Resource()`ï¼Œ`Name()`ï¼Œ`VersionedParams()`ç­‰æ–¹æ³•å…¶å®æ˜¯`Request`ç±»å‹çš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•è¿”å›çš„ä¹Ÿæ˜¯`Request`ç±»å‹æœ¬èº«ã€‚æ‰€ä»¥`RESTClient`çš„é“¾å¼è°ƒç”¨å…¶å®åœ¨èƒŒååŸºäºçš„æ˜¯`Request`ç±»å‹çš„å»ºé€ è€…æ¨¡å¼ã€‚


éœ€è¦æ³¨æ„çš„æ˜¯`Request`ç±»å‹åŒ…æ‹¬ä¸€ä¸ªå®Œæ•´çš„`RESTClient`ç»“æ„ï¼š
```go title="client-go/rest/request.go"
type Request struct {
	c *RESTClient

	// ...
}
```
è¿™å°±æ„å‘³ç€ï¼Œ`Request`ç»“æ„å°†å¯ä»¥ä½¿ç”¨`RESTClient`ä¸­æ‰€æºå¸¦çš„é…ç½®åŠç»„ä»¶ä¸Kubernetes APIé€šä¿¡ï¼šä¾‹å¦‚ï¼Œ**åå•†åºåˆ—åŒ–å™¨**ï¼ŒTLSåŠ å¯†é€šä¿¡çš„è¯ä¹¦ç­‰ç­‰ã€‚
æ‰€ä»¥ï¼Œç°åœ¨çœ‹æ¥ï¼Œ`RESTClient`æ›´åƒæ˜¯ä¸€ä¸ªæºå¸¦å„ç§é…ç½®åŠå·¥å…·çš„"å£³"ï¼Œå®ƒè°ƒç”¨`Post()`ï¼Œ`Get()`ï¼Œ`Delete()`ç­‰æ–¹æ³•å°†è‡ªèº«è½¬åŒ–ä¸º`Request`ç±»å‹çš„ä¸€éƒ¨åˆ†ã€‚


å¦å¤–ä¸€ä¸ªéœ€è¦æ³¨æ„çš„ç»†èŠ‚æ˜¯ï¼Œ`Request`ç±»å‹çš„`Do()`æ–¹æ³•åˆ™æœ‰æ‰€ä¸åŒï¼Œå®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªå«åš`Result`çš„ç±»å‹ã€‚
ä»¥ä¸‹åŠ¨ä½œåœ¨`Do()`æ–¹æ³•ä¸­å®Œæˆï¼š
* å®é™…å‘Kubernetes APIå‘é€HTTPè¯·æ±‚
* åœ¨æ‹¿åˆ°HTTPè¿”å›åï¼Œ`Request`ä½¿ç”¨å…¶`RESTClient`æˆå‘˜ä¸­çš„**åå•†åºåˆ—åŒ–å™¨**å†å°†è¿”å›ä½“ååºåˆ—åŒ–ï¼Œå¹¶è¿›ä¸€æ­¥å°è£…æˆ`Result`ç±»å‹å¹¶è¿”å›

æ¢ä¸ªè§’åº¦æ¥è¯´ï¼Œåœ¨`Do()`ä¹‹å‰æ‰€æœ‰çš„é“¾å¼è°ƒç”¨å…¶å®éƒ½åœ¨ä¸ºç»„è£…å‘å¾€Kubernetes APIçš„HTTPè¯·æ±‚è€Œå‡†å¤‡ã€‚

ä¸‹å›¾ä»¥`Get()`æ–¹æ³•ä¸ºä¾‹æ€»ç»“äº†`RESTClient`çš„é“¾å¼è°ƒç”¨ä¸­å„ç±»å‹ä¹‹é—´çš„å…³ç³»ï¼š
<img src={RequestPNG} style={{width: "100%"}}/>





## èµ„æºå®¢æˆ·ç«¯
å…¶å®é™¤äº†*APIç»„å®¢æˆ·ç«¯*å¤–ï¼Œ`client-go`ä¸­ä¹Ÿä¸ºæ¯ä¸ªèµ„æºç±»å‹å°è£…äº†ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œä¾‹å¦‚ä¸º`pods`å°è£…çš„å®¢æˆ·ç«¯ï¼š
```go title="k8s.io/client-go/kubernetes/typed/core/v1/pod.go"
type pods struct {
	client rest.Interface
	ns     string
}
```
å¯ä»¥çœ‹å‡ºï¼Œ`pods`å®¢æˆ·ç«¯ä¹Ÿæ˜¯å¯¹åŸºç¡€ç»„ä»¶`RESTClient`çš„å°è£…ï¼Œè€Œä¸”ç›¸æ¯”äºAPIç»„å®¢æˆ·ç«¯ï¼Œå¤šäº†ä¸€ä¸ªæœ‰å…³å‘½åç©ºé—´çš„ï¼ˆnamespaceï¼‰çš„æˆå‘˜å˜é‡ã€‚
å¦å¤–ï¼Œé€šè¿‡å®ƒå¯¹åº”çš„æ¥å£:
```go "k8s.io/client-go/kubernetes/typed/core/v1/pod.go"
type PodInterface interface {
    // highlight-next-line
	Create(ctx context.Context, pod *v1.Pod, opts metav1.CreateOptions) (*v1.Pod, error)
	// highlight-next-line
	Update(ctx context.Context, pod *v1.Pod, opts metav1.UpdateOptions) (*v1.Pod, error)
	UpdateStatus(ctx context.Context, pod *v1.Pod, opts metav1.UpdateOptions) (*v1.Pod, error)
	// highlight-next-line
	Delete(ctx context.Context, name string, opts metav1.DeleteOptions) error
	// highlight-next-line
	Get(ctx context.Context, name string, opts metav1.GetOptions) (*v1.Pod, error)
	// highlight-next-line
	List(ctx context.Context, opts metav1.ListOptions) (*v1.PodList, error)
	Watch(ctx context.Context, opts metav1.ListOptions) (watch.Interface, error)
	Patch(ctx context.Context, name string, pt types.PatchType, data []byte, opts metav1.PatchOptions, subresources ...string) (result *v1.Pod, err error)
	// ...
}
```
æˆ‘ä»¬å¯ä»¥çœ‹å‡º*èµ„æºå®¢æˆ·ç«¯*ä¸ºæŸä¸€èµ„æºç±»å‹çš„å¢åˆ æ”¹æŸ¥éƒ½å°è£…äº†ç›¸åº”çš„æ–¹æ³•ã€‚å¹¶ä¸”åœ¨å®ç°ä¸Šï¼Œå°è£…çš„å„ä¸ªæ–¹æ³•ä¸­å…¶å®éƒ½ä½¿ç”¨äº†`RESTClient`è¿™ä¸ªåŸºç¡€ç»„ä»¶ï¼Œä¾‹å¦‚podsèµ„æºå®¢æˆ·ç«¯çš„`Get()`æ–¹æ³•ï¼š
```go title="k8s.io/client-go/kubernetes/typed/core/v1/pod.go"
func (c *pods) Get(ctx context.Context, name string, options metav1.GetOptions) (result *v1.Pod, err error) {
	result = &v1.Pod{}
	err = c.client.Get().
		Namespace(c.ns).
		Resource("pods").
		Name(name).
		VersionedParams(&options, scheme.ParameterCodec).
		Do(ctx).
		Into(result)
	return
}
```

:::tip
é™¤äº†å¢åˆ æ”¹æŸ¥ä»¥å¤–ï¼Œå…¶ä¸­èµ„æºå®¢æˆ·ç«¯å°è£…çš„`Watch()`å’Œ`UpdateStatus()`æ–¹æ³•ä¹Ÿååˆ†é‡è¦ï¼Œæˆ‘ä»¬åœ¨åç»­ç« èŠ‚è¿˜ä¼šä»‹ç»ã€‚
åœ¨è¿™é‡Œï¼Œä½ åªéœ€è¦äº†è§£`client-go`ä¸ºæ¯ä¸ªèµ„æºç±»å‹ä¹Ÿ**å•ç‹¬**å°è£…äº†ä¸€ä¸ªå®¢æˆ·ç«¯ã€‚
:::

## client-goä¸­å„å®¢æˆ·ç«¯ç±»å‹ä¹‹é—´çš„å…³ç³»
åˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰ä»‹ç»*APIç»„å®¢æˆ·ç«¯*ä¸*èµ„æºå®¢æˆ·ç«¯*çš„å…³ç³»ï¼Œæˆ‘ä»¬åªè¦ç¨å¾®æ¢ç©¶*APIç»„å®¢æˆ·ç«¯*çš„æ–¹æ³•å°±ä¼šçŸ¥é“å®ƒä»¬ä¹‹é—´çš„å…³ç³»äº†â€”â€”ä¸ºäº†é˜…è¯»ä¸Šçš„è¿è´¯æ€§ï¼Œåœ¨[Clientsetä¸RESTClient](#clientsetä¸restclient)å°èŠ‚ä¸­æˆ‘ä»¬åªæ˜¯ä»‹ç»äº†APIç»„å®¢æˆ·ç«¯ç±»å‹çš„ç»“æ„ä½“ï¼Œå¹¶æ²¡æœ‰æåŠå®ƒçš„æ–¹æ³•ã€‚
æˆ‘ä»¬è¿˜æ˜¯ä»¥`appsv1.AppsV1Client`ç»„å®¢æˆ·ç«¯ä¸ºä¾‹ï¼š
```go title="k8s.io/client-go/kubernetes/typed/apps/v1/apps_client.go"

type AppsV1Client struct {
	restClient rest.Interface
}

func (c *AppsV1Client) DaemonSets(namespace string) DaemonSetInterface {
	return newDaemonSets(c, namespace)
}

func (c *AppsV1Client) Deployments(namespace string) DeploymentInterface {
	return newDeployments(c, namespace)
}

func (c *AppsV1Client) ReplicaSets(namespace string) ReplicaSetInterface {
	return newReplicaSets(c, namespace)
}
// ...
```
å®ƒæ‰€å°è£…çš„æ–¹æ³•ä»¥ç»„å†…çš„å„èµ„æºç±»å‹ä¸ºæ–¹æ³•åï¼Œä»¥å‘½åç©ºé—´ä¸ºå‚æ•°ï¼Œå¹¶è¿”å›å„èµ„æºå®¢æˆ·ç«¯ã€‚

`Clientset`ï¼ŒAPIç»„å®¢æˆ·ç«¯ï¼Œèµ„æºå®¢æˆ·ç«¯ï¼Œ`RESTClient`çš„å…³ç³»å¯ä»¥è¢«æ€»ç»“æˆä¸‹å›¾æ‰€ç¤ºï¼š

<img src={ClientRelationPNG} width="380px"/>


å…¶å®ï¼Œ`clientset`çš„é“¾å¼è°ƒç”¨æœ¬è´¨ä¸Šå°±æ˜¯å°è£…çš„ä¸åŒå®¢æˆ·ç«¯ä¹‹é—´çš„è½¬åŒ–ï¼Œæœ€ç»ˆç”±`RESTClient`ç±»å‹å®Œæˆä¸Kubernetes APIçš„äº¤äº’ã€‚
ä¾‹å¦‚å¯¹äºå¦‚ä¸‹`clientset`çš„é“¾å¼è°ƒç”¨ï¼š
```go
clientset.AppsV1().Deployments("default").Get(context.TODO(),  metav1.GetOptions{})
```
å®¢æˆ·ç«¯ç±»å‹çš„è½¬åŒ–å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src={ClientChainPNG} width="680px"/>


## å°ç»“

:::tip
è™½ç„¶åœ¨æœ¬èŠ‚ä¸­æˆ‘ä»¬ä»‹ç»äº†`client-go`ä¸­çš„å¤šä¸ªå®¢æˆ·ç«¯ç±»å‹ï¼Œä½†æ˜¯æœ¬èŠ‚çš„é‡ç‚¹ä¾ç„¶æ˜¯`RESTClient`çš„ä½¿ç”¨æ–¹æ³•ã€‚
åŸå› æ˜¯ä¸ç®¡æ˜¯`Clientset`è¿˜æ˜¯*APIç»„å®¢æˆ·ç«¯*ï¼Œäº¦æˆ–æ˜¯*èµ„æºå®¢æˆ·ç«¯*ï¼Œå®ƒä»¬éƒ½æ˜¯ä¸ºKubernetes**åŸç”Ÿ**èµ„æºå°è£…çš„å®¢æˆ·ç«¯ã€‚
å¯¹äºè‡ªå®šä¹‰èµ„æºï¼Œæˆ‘ä»¬ä¸å¾—ä¸åˆ©ç”¨æ›´ä¸ºåº•å±‚çš„`RESTClient`æ¥ç¼–å†™å®¢æˆ·ç«¯ã€‚
:::



[^1]: ä¸ºäº†å™è¿°ä¸Šçš„æ–¹ä¾¿ï¼Œåœ¨æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šæŠŠ*APIç»„åŠå…¶ç‰ˆæœ¬*ç®€ç§°ä¸ºAPIç»„ï¼Œ*GV*æˆ–è€…*GroupVersion*ã€‚
[^2]: `rest`æŒ‡`client-go`åº“ä¸­çš„`rest`åŒ…ã€‚
[^3]: ä¾‹å­ä¸­ç»™çš„æ˜¯è¿è¡Œåœ¨Kubernetesé›†ç¾¤å¤–çš„å®¢æˆ·ç«¯ä¾‹å­ï¼Œå¯¹äºå·²çŸ¥è¦è¿è¡Œåœ¨é›†ç¾¤ä¸­çš„å®¢æˆ·ç«¯ï¼Œéœ€è¦ä½¿ç”¨`rest.InClusterConfig()`æ–¹æ³•æ¥åˆ›å»º`rest.Config`å¯¹è±¡ã€‚
      <img src={ConfigInsidePNG} style={{width: "90%"}}/>



